name: Giguna Steppes
short: Giguna

areas:
- name: Giguna Northeast
  on_entry: $reset_old_area(^newpos)
  start:
    _door_opened: false
  spots:
    - name: East 9
      coord: [18.95, 8.75]
      exits:
        - to: Ebih > Ebih West > West 9
          tags: [xshift]
    - name: Inner Wall
      coord: [18.65, 8.95]
      local:
        - to: East 9
          jumps: 2
        - to: Crow Eating
          jumps: 4
    - name: Crow Eating
      coord: [17.85, 8.9]
      local:
        - to: Save Point
        - to: Gate Left
      exits:
        - to: Gate Vent
          req: $hover
    - name: Save Point
      coord: [17.5, 9.5]
      local:
        - to: Step
          jumps: 1
        - to: Gate Left
        - to: Crow Eating
      locations:
        - name: Seen
          item: Map_17_10
          time: 0
          tags: [map]
      actions:
        - name: Save
          do: $save
          time: 1.3
        # Stopgap for greedy search not able to do a global Recall
        - name: Save-Recall
          req: $can_recall
          do: $save; ^mode = 'Indra'
          to: ^indra
          time: 4.3
      exits:
        - to: Gate Vent
          req: $hover and $hook
          time: 2
    - name: Step
      coord: [17.3, 9.4]
      local:
        - to: West 10
        - to: Save Point
      exits:
        - to: West 9
          req: $climb or $hook
          time: 1.7
        - to: West 9
          req: $grab
          time: 1.9
        - to: Gate Vent
          req: $hover
          time: 2.3
    - name: West 10
      coord: [17.05, 9.5]
      local:
        - to: Step
          jumps: 1
      exits:
        - to: Carnelian > East 10
          tags: [xshift]
    - name: West 9
      coord: [17.05, 8.8]
      local:
        - to: Step
      exits:
        - to: Ruins East > East 9
          tags: [xshift]
    - name: Gate Left
      coord: [17.8, 9.6]
      local:
        - to: Save Point
          jumps: 1
      exits:
        - to: Gate Button
          req: Giguna_Northeast_Gate
          time: 2.5
      actions:
        - name: Throw Drone
          req: $can_deploy and Slingshot_Hook
          do: $deploy_drone
          to: Giguna > Giguna Northeast > Gate Vent
          time: 1.25

    - name: Gate Vent
      coord: [18, 9.1]
      local:
        - to: Gate Button
          thru: [18.35, 9.1]
        - to: Save Point
    - name: Gate Button
      coord: [18.5, 9.75]
      local:
        - to: Gate Right
          jumps: 1
      locations:
        - name: Open Gate
          item: Giguna_Northeast_Gate
          canon: Giguna_Northeast_Gate
          time: 0.5
      exits:
        - to: Gate Left
          req: Giguna_Northeast_Gate
          time: 2.5
    - name: Gate Right
      coord: [18.75, 9.6]
      local:
        - to: Gate Button
        - to: Shaft Bottom
      locations:
        - name: Remote Button
          item: Giguna_Northeast_Gate
          canon: Giguna_Northeast_Gate
          req: $boomerang

    - name: Shaft Bottom
      coord: [18.8, 10.6]
      local:
        - to: East 11
        - to: Right Column
          jumps: 1
      # TODO: measure time going back up
    - name: East 11
      coord: [18.95, 10.75]
      local:
        - to: Shaft Bottom
          jumps: 1
      exits:
        - to: Ebih > Ebih West > West 11
          tags: [xshift]
    - name: Right Column
      coord: [17.9, 10.5]
      local:
        - to: Switch
        - to: Shaft Bottom
      actions:
        - name: Open Door From Afar
          req: $unlock3 and Infection_Range{3} and not ^_door_opened
          do: ^_door_opened = true
          time: 0.5
      exits:
        - to: Door
          req: ^_door_opened
          movement: base
    - name: Switch
      coord: [17.7, 10.8]
      exits:
        - to: Door
          req: ^_door_opened and ($grab or $hook)
        - to: Right Column
          req: $grab or $hook
      actions:
        - name: Open Door
          req: $unlock3 and not ^_door_opened
          do: ^_door_opened = true
    - name: Door
      coord: [17.5, 10.5]
      local:
        - to: Right Column
        - to: Vault
      locations:
        - name: Remote Flask
          item: Flask
          canon: Giguna_Northeast_Flask
          req: $boomerang
          tags: [remote_flask]
    - name: Vault
      coord: [17.2, 10.8]
      locations:
        - name: Item
          item: Flask
          canon: Giguna_Northeast_Flask
          tags: [flask]
      exits:
        - to: Door
          req: ^_door_opened
          movement: base
          jumps: 2
        - to: Door
          req: ^_door_opened and $hook
          time: 0.7

- name: Carnelian
  on_entry: $reset_old_area(^newpos)
  start:
    _door_opened: false
  reset:
    _upper_susar: false
    _lower_susar: false
  spots:
    - name: East 10
      coord: [16.95, 9.5]
      local:
        - to: East Cliff
      exits:
        - to: Giguna Northeast > West 10
          tags: [xshift]
    - name: East Cliff
      coord: [16.35, 9.7]
      local:
        - to: East 10
          jumps: 2
        - to: Upper Susar
          jumps: 2
        - to: Middle Platforms
        - to: Switch
    - name: Upper Susar
      coord: [15.85, 9.6]
      exits:
        - to: Upper Path
          req: ^_upper_susar
          movement: base
        - to: Middle Platforms
          req: ^_upper_susar
          movement: base
        - to: East Cliff
          req: ^_upper_susar
          movement: base
      actions:
        - name: Caught
          req: not ^_upper_susar
          do: ^_upper_susar = true
          tags: [susar]
        - name: Hack
          req: not ^_upper_susar and $allegiance1
          price: 100
          do: ^_upper_susar = true
          time: 0.5
    - name: Middle Platforms
      coord: [16.1, 10]
      local:
        - to: Rock
        - to: Switch
      exits:
        - to: Upper Susar
          req: $climb
          time: 1.75  # TODO: better than a guess
        - to: East Cliff
          req: $grab
          time: 1.5
    - name: Switch
      coord: [16.2, 10.7]
      local:
        - to: Rock
          jumps: 1
      exits:
        - to: Door
          req: ^_door_opened
          movement: base
      actions:
        - name: Open Door
          req: $unlock3 and not ^_door_opened
          do: ^_door_opened = true
          time: 0.5
    - name: Door
      coord: [16.4, 10.7]
      exits:
        - to: Switch
          req: ^_door_opened
          movement: base
        - to: Vault
          req: ^_door_opened
          movement: base
          jumps: 1
    - name: Vault
      coord: [16.7, 10.6]
      locations:
        - name: Item
          item: Carnelian_Ring
          tags: [standing]
      exits:
        - to: Door
          req: ^_door_opened
          movement: base
    - name: Rock
      coord: [16, 10.4]
      local:
        - to: Lower Susar
        - to: Middle Platforms
          jumps: 2
        - to: Switch
    - name: Lower Susar
      coord: [15.6, 10.5]
      exits:
        - to: West Ledge
          req: ^_lower_susar and $grab
          time: 1.25
        - to: West Ledge
          req: ^_lower_susar and $hook
        - to: Rock
          req: ^_lower_susar
          movement: base
          jumps: 1
      actions:
        - name: Caught
          req: not ^_lower_susar
          do: ^_lower_susar = true
          tags: [susar]
        - name: Hack
          req: not ^_lower_susar and $allegiance1
          do: ^_lower_susar = true
          price: 100
          time: 0.5
    - name: Upper Path
      coord: [15.6, 9.6]
      local:
        - to: Upper Susar
        - to: West Ledge
    - name: West Ledge
      coord: [15.3, 10.1]
      local:
        - to: Lower Susar
        - to: West 10
        - to: Upper Path
      exits:
        - to: West 10
          req: $grab
    - name: West 10
      coord: [15.05, 9.8]
      local:
        - to: West Ledge
      exits:
        - to: West Caverns > East 10
          tags: [xshift]

- name: West Caverns
  on_entry: $reset_old_area(^newpos)
  reset:
    _east_susar: false
  spots:
    - name: East 10
      coord: [14.95, 9.8]
      local:
        - to: East Platform
        - to: Small Staircase
        - to: Tunnel Entrance
          jumps_down: 1
      exits:
        - to: Carnelian > West 10
          tags: [xshift]
        - to: Column 2 Top
          req: $hover
          time: 6
    - name: East Platform
      coord: [14.5, 10.1]
      local:
        - to: Small Staircase
          jumps_down: 1
        - to: Tunnel Entrance
          jumps_down: 1
        - to: Small Platform
    - name: Small Staircase
      coord: [14.55, 10.5]
      local:
        - to: Tunnel Entrance
          jumps_down: 1
        - to: Small Platform
          jumps: 3
      exits:
        - to: East 10
          req: $climb
          movement: base
          jumps: 4
    - name: Tunnel Entrance
      coord: [14.55, 10.7]
      local:
        - to: Small Platform
          jumps: 3
        - to: Tunnel Bottom
          jumps_down: 1
        - to: Small Staircase
          jumps: 2
    - name: Small Platform
      coord: [14.2, 10.2]
      local:
        - to: Higher Ledge
        - to: East Platform
        - to: Small Staircase
        - to: Tunnel Entrance
      actions:
        - name: Throw Drone Up
          req: $can_deploy
          do: $deploy_drone
          to: Giguna > West Caverns > Higher Ledge
          time: 1.5
    - name: Higher Ledge
      coord: [14.1, 9.9]
      local:
        - to: Floating Brick
          jumps: 2
        - to: Small Platform
        - to: East Platform
        - to: Small Staircase
        - to: Tunnel Entrance
    - name: Floating Brick
      coord: [14.25, 9.6]
      local:
        - to: Higher Ledge
        - to: East Platform
        - to: Column 2 Top
          jumps: 2
    - name: Column 2 Top
      coord: [14, 9.3]
      local:
        - to: Higher Ledge
        - to: East Platform
        - to: Top Gap Right
    - name: Top Gap Right
      coord: [13.65, 9.5]
      local:
        - to: Column 2 Top
        - to: Top Gap Left
    - name: Top Gap Left
      coord: [13.4, 9.6]
      local:
        - to: Top Gap Right
        - to: Column 1 Top Right
          jumps: 1
    - name: Column 1 Top Right
      coord: [13.35, 9.3]
      local:
        - to: Top Gap Left
        - to: Top Gap Right
        - to: Column 1 Top Left
    - name: Column 1 Top Left
      coord: [13, 9.3]
      local:
        - to: Column 1 Top Right
        - to: Cache
        - to: Bush
    - name: Cache
      coord: [13.1, 9.8]
      local:
        - to: Bush
        - to: Column 1 Top Left
          thru: [12.875, 9.5]
          jumps: [2, 1]
      locations:
        - name: Item
          item: Power_Matrix
          tags: [standing]
    - name: Bush
      coord: [12.5, 9.8]
      local:
        - to: Cache
        - to: Column 1 Top Left
          thru: [12.875, 9.5]
          jumps: [2, 1]
      locations:
        - name: Item
          item: Power_Core
          req: $more_refills
          tags: [standing]

    - name: Tunnel Bottom
      coord: [14.8, 11.45]
      local:
        - to: Tunnel Fork
        - to: Tunnel Entrance
      exits:
        - to: Tunnel Entrance
          req: $grab
          time: 2.25
    - name: Tunnel Fork
      coord: [14.7, 11.7]
      local:
        - to: East Susar
        - to: East 13
          thru: [14.5, 11.75]
      exits:
        - to: Tunnel Bottom
          req: $grab
          time: 0.85
        - to: Tunnel Entrance
          req: $hook
          time: 2.25
    - name: East Susar
      coord: [14.8, 11.75]
      exits:
        - to: Tunnel Fork
          req: ^_east_susar
          movement: base
          jumps: 1
        - to: East 12
          req: ^_east_susar
          movement: base
      actions:
        - name: Caught
          req: not ^_east_susar
          do: ^_east_susar = true
          tags: [susar]
        - name: Hack
          req: not ^_east_susar and $allegiance1
          do: ^_east_susar = true
          price: 100
          time: 0.5
    - name: East 12
      coord: [14.95, 11.75]
      local:
        - to: East Susar
      exits:
        - to: Wasteland > West 12
          tags: [xshift]
    - name: East 13
      coord: [14.95, 12.75]
      exits:
        - to: Wasteland > West 13
          tags: [xshift]

    - name: Northwest
      coord: [12.2, 9.1]
      local:
        - to: West 13
    - name: West 13
      coord: [12.05, 12.3]
      exits:
        - to: Far Corner > East 13
          tags: [xshift]

- name: Wasteland
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West 12
      coord: [15.05, 11.75]
      local:
        - to: Upper Cliff
      exits:
        - to: West Caverns > East 12
          tags: [xshift]
    - name: Upper Cliff
      coord: [15.3, 11.95]
      local:
        - to: West 12
          jumps: 1
        - to: West 13
          thru: [15.4, 12.2]
        - to: Lower Cliff
    - name: West 13
      coord: [15.05, 12.75]
      local:
        - to: Middle Path
          jumps: 1
      exits:
        - to: West Caverns > East 13
          tags: [xshift]
    - name: Middle Path
      coord: [15.4, 12.65]
      local:
        - to: West 13
        - to: Middle Cliff
          jumps: 2
    - name: Middle Cliff
      coord: [15.7, 12.45]
      local:
        - to: Upper Cliff
        - to: Middle Path
        - to: Lower Cliff
        - to: Lower Path Right
      actions:
        - name: Throw Drone
          req: $can_deploy and Slingshot_Hook
          do: $deploy_drone_and_move(`Giguna > Wasteland > Middle Path`)
          to: Giguna > Wasteland > West 12
          time: 3.5
    - name: Lower Path Right
      coord: [15.65, 13.3]
      local:
        - to: Lower Path Left
      exits:
        - to: Lower Cliff
          req: $climb
          time: 1.5
    - name: Lower Path Left
      coord: [15.4, 13.3]
      local:
        - to: Lower Path Right
        - to: West 14
    - name: Lower Cliff
      coord: [15.85, 12.85]
      local:
        - to: Lower Path Left
      exits:
        - to: Middle Cliff
          req: $climb
        - to: Middle Cliff
          req: $grab
          time: 0.85
    - name: West 14
      coord: [15.05, 13.7]
      local:
        - to: Lower Path Left
          jumps: 2
      exits:
        - to: Giguna Base > East 14
          tags: [xshift]

    # East half, er, three-quarters
    - name: East 12
      coord: [18.95, 11.8]
      local:
        - to: East Ledge
      exits:
        - to: Ebih > Ebih West > West 12
          tags: [xshift]
    - name: East 13
      coord: [18.95, 12.7]
      local:
        - to: Door Left
        - to: Bluff by Door
        - to: Tiny Hill
      exits:
        - to: Ebih > Ebih West > West 13
          tags: [xshift]
    - name: East 14
      coord: [18.95, 13.6]
      local:
        - to: Door Right
          jumps: 2  # ?
      exits:
        - to: East Caverns > West 14
          tags: [xshift]
    - name: East Ledge
      coord: [18.7, 12.2]
      local:
        - to: East 13
        - to: Door Left
        - to: Bluff by Door
        - to: Tiny Hill
      exits:
        - to: East 12
          req: $grab or $climb
          movement: base
          jumps: 3
        - to: East 12
          req: $hook
          time: 1  # ?
    - name: Door Left
      coord: [18.5, 13.2]
      local:
        - to: Bluff by Door
        - to: Tiny Hill
      exits:
        - to: Door Right
          req: Ebih_Wasteland_Door
          movement: base
    - name: Door Right
      coord: [18.65, 13.2]
      local:
        - to: East 14
      locations:
        - name: Health
          item: Health_Fragment
          tags: [standing]
      exits:
        - to: Door Left
          req: Ebih_Wasteland_Door
          movement: base
    - name: Bluff by Door
      coord: [18.4, 13.6]
      local:
        - to: Tiny Hill
          jumps: 2
      exits:
        - to: Door Left
          req: $grab and $climb
          movement: base
          jumps: 3
        - to: Door Left
          req: $hook
          time: 1  # ?
    - name: Tiny Hill
      coord: [18.0, 13.5]
      local:
        - to: Bluff by Door
        - to: Center Plains
    - name: Steeper Hill
      coord: [17.2, 13.3]
      local:
        - to: Center Plains
        - to: West Plains
    - name: Center Plains
      coord: [17.4, 13.6]
      local:
        - to: Tiny Hill
          jumps: 1
      exits:
        - to: Steeper Hill
          req: $grab or $climb
          movement: base
          jumps: 2
    - name: West Plains
      coord: [17.0, 13.6]
      local:
        - to: Steeper Hill
          jumps: 3
        - to: Passage East
        - to: Westward Hill
    - name: Passage East
      coord: [16.6, 13.6]
      local:
        - to: West Plains
        - to: Westward Hill
      exits:
        - to: Passage Cache
          req: ^mode == 'drone' and Ebih_Wasteland_Passage_H
          movement: base
      hybrid:
        - name: Clear Horizontal Passage Manually
          to: Passage Cache
          item: Ebih_Wasteland_Passage_H
          canon: Ebih_Wasteland_Passage_H
          req: ^mode == 'drone'
          time: 15  # ?
          item_time: 0
        - name: Mist through Horizontal Passage
          to: Passage Cache
          item: Ebih_Wasteland_Passage_H
          canon: Ebih_Wasteland_Passage_H
          req: ^mode == 'drone' and Mist_Upgrade
          movement: mist2
          item_time: 0

    - name: Passage Cache
      coord: [15.4, 13.6]
      exits:
        - to: Passage East
          req: ^mode == 'drone' and Ebih_Wasteland_Passage_H
          movement: base
      hybrid:
        - name: Clear Horizontal Passage Manually
          to: Passage East
          item: Ebih_Wasteland_Passage_H
          canon: Ebih_Wasteland_Passage_H
          req: ^mode == 'drone'
          time: 15  # ?
          item_time: 0
        - name: Mist through Horizontal Passage
          to: Passage East
          item: Ebih_Wasteland_Passage_H
          canon: Ebih_Wasteland_Passage_H
          req: ^mode == 'drone' and Mist_Upgrade
          movement: mist2
          item_time: 0
    - name: Westward Hill
      coord: [16.45, 13.4]
      local:
        - to: Lower Cliff
          jumps: 4
        - to: Passage East
        - to: West Plains

    # Upper portion
    - name: Upper Cache
      coord: [16.4, 11.5]
    - name: Cache Ledge
      coord: [16.5, 11.8]
    - name: Left Platform West
      coord: [16.75, 11.9]
    - name: Left Platform East
      coord: [17.0, 12.0]
    - name: Center Platform West
      coord: [17.25, 11.7]
    - name: Center Platform East
      coord: [17.5, 11.8]
    - name: Right Platform West
      coord: [17.75, 12.05]
    - name: Right Platform East
      coord: [17.95, 12.1]
    - name: Lower Platform West
      coord: [17.9, 13.0]
    - name: Lower Platform East
      coord: [18.15, 13.0]
    - name: Ladder Ledge
      coord: [18.15, 12.4]
    - name: Switch Ledge
      coord: [18.05, 11.6]
    - name: Switch Approach
      coord: [18.3, 11.5]
    - name: Switch
      coord: [18.5, 11.5]

- name: Giguna Base
  on_entry: $reset_old_area(^newpos)
  start:
    _door_open: false
  spots:
    - name: East 14
      coord: [14.95, 13.7]
      local:
        - to: Stone Knob
      exits:
        - to: Wasteland > West 14
          tags: [xshift]
    - name: Stone Knob
      coord: [14.55, 13.9]
      local:
        - to: Kari
          thru: [14.35, 14.1]
        - to: Middle Platform
          thru: [14.35, 14.1]
      exits:
        - to: Upper Cliff
          req: $climb
          time: 1.5
        - to: Upper Cliff
          req: $hook
          time: 1
      actions:
        - name: Throw Drone
          req: $can_deploy
          do: $deploy_drone_and_move(`Giguna > Giguna Base > Kari`)
          to: Giguna > Giguna Base > Upper Cliff
    - name: Upper Cliff
      coord: [14.25, 13.55]
      local:
        - to: Stone Knob
        - to: Kari
          thru: [14.35, 14.1]
        - to: Middle Platform
          thru: [14.35, 14.1]
        - to: Right Pillar
    - name: Right Pillar
      coord: [13.9, 13.6]
      local:
        - to: Ruin
        - to: Upper Cliff
          jumps: 1
      exits:
        - to: Left Pillar
          req: $grab
          time: 1.5
    - name: Left Pillar
      coord: [13.5, 13.55]
      local:
        - to: Ruin
      exits:
        - to: Right Pillar
          req: $grab
          time: 1.5
    - name: Ruin
      coord: [13.75, 14.1]
      locations:
        - name: Item
          item: Wall_Climb
          tags: [urn]
      exits:
        - to: Right Pillar
          req: $climb
          time: 1.5
        - to: Left Pillar
          req: $grab and $climb
          time: 1.5
    - name: Middle Platform
      coord: [14.45, 14.7]
      local:
        - to: Kari
        - to: Building Entry
      exits:
        - to: Stone Knob
          req: $grab
          time: 2.35
        - to: Stone Knob
          req: $hook
          time: 1.5
        - to: Staircase Top
          req: $hover
          time: 4.2
        - to: Below Gate
          req: ^_door_open
          movement: base
          jumps_down: 2
    - name: Kari
      coord: [14.4, 15.55]
      local:
        - to: Middle Platform
          jumps: 5
        - to: Building Entry
          jumps: 1
        - to: Table
          jumps_down: 1
      exits:
        - to: Below Gate
          req: ^_door_open
          movement: base
    - name: Building Entry
      coord: [14.1, 15.5]
      local:
        - to: Staircase Bottom
        - to: Save Point
          jumps_down: 1
        - to: Table
          jumps_down: 1
        - to: Kari
      exits:
        - to: Building Interior > Entry
          tags: [interior]
    - name: Staircase Top
      coord: [13.35, 14.75]
      local:
        - to: Staircase Bottom
          jumps_down: 2
        - to: Table
          jumps_down: 4
        - to: Save Point
          jumps_down: 3
        - to: Building Entry
        - to: West Grate
      exits:
        - to: Left Pillar
          req: $grab
          time: 4
        - to: Left Pillar
          req: $hook
          time: 3.5
    - name: West Grate
      coord: [13.15, 14.75]
      local:
        - to: Staircase Top
      exits:
        - to: West 15
          req: Nanite_Mist
          price: 30
          movement: mist2
    - name: West 15
      coord: [13.05, 14.75]
      exits:
        - to: West Grate
          req: Nanite_Mist
          price: 30
          movement: mist2
        - to: Helipad > East 15
          tags: [xshift]
    - name: Staircase Bottom
      coord: [13.2, 15.7]
      local:
        - to: Staircase Top
          jumps: 5
        - to: Save Point
          jumps_down: 1
        - to: West 16
        - to: Building Entry
          jumps: 1
    - name: Table
      coord: [13.7, 15.95]
      local:
        - to: Kari
          thru: [14, 15.9]
          jumps: [1, 2]
        - to: Building Entry
          thru: [14, 15.9]
          jumps: [1, 2]
        - to: Save Point
          jumps: 1
      locations:
        - name: News
          item: Researchers_Missing
          tags: [standing]
    - name: Save Point
      coord: [13.5, 15.8]
      local:
        - to: Staircase Bottom
          jumps: 1
        - to: Building Entry
          jumps: 2
        - to: Table
        - to: West 16
      actions:
        - name: Save
          do: $save
          time: 1.3
    - name: West 16
      coord: [13.05, 15.85]
      local:
        - to: Staircase Bottom
          jumps: 1
        - to: Save Point
      exits:
        - to: Helipad > East 16
          tags: [xshift]

    - name: East 17
      coord: [14.95, 16.6]
      local:
        - to: Lower Fork
          jumps: 2
      exits:
        - to: Hard Rock > West 17
          tags: [xshift]
    - name: Lower Fork
      coord: [14.75, 16.3]
      local:
        - to: East 17
        - to: Switch Distance 4
      exits:
        - to: Below Gate
          req: $grab
          movement: base
          jumps: 3
        - to: Below Gate
          req: $hook
          time: 0.8  # ?
    - name: Below Gate
      coord: [14.55, 16.05]
      local:
        - to: Lower Fork
      exits:
        - to: Kari
          req: ^_door_open and $grab and $climb
          movement: base
          jumps: 6
        - to: Kari
          req: ^_door_open and $hook
          time: 1  # ?
        - to: Middle Platform
          req: ^_door_open and $grab and $climb
          movement: base
          jumps: 12
        - to: Middle Platform
          req: ^_door_open and $hook
          time: 3  # ?
    - name: Switch Distance 1
      coord: [14.05, 16.65]
      local:
        - to: Switch Distance 2
      actions:
        - name: Open Door
          req: $open
          do: ^_door_open = true
          tags: [hack]
    - name: Switch Distance 2
      coord: [14.1, 16.7]
      local:
        - to: Switch Distance 1
          jumps: 1
        - to: Switch Distance 3
      actions:
        - name: Open Door
          req: $open and $range1
          do: ^_door_open = true
          tags: [hack]
    - name: Switch Distance 3
      coord: [14.15, 16.7]
      local:
        - to: Switch Distance 2
        - to: Switch Distance 4
      actions:
        - name: Open Door
          req: $open and $range2
          do: ^_door_open = true
          tags: [hack]
    - name: Switch Distance 4
      coord: [14.2, 16.7]
      local:
        - to: Switch Distance 3
        - to: Lower Fork
          jumps: 4
      actions:
        - name: Open Door
          req: $open and $range3
          do: ^_door_open = true
          tags: [hack]

- name: Building Interior
  graph_offset: [0, 60]
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: Entry
      coord: [14.1, 15.5]
      local:
        - to: Bookshelf
          jumps: 3
      exits:
        - to: Bookshelf
          req: $grab or $climb
          time: 1.35
        - to: Bookshelf
          req: $hook
          time: 1
        - to: Giguna Base > Building Entry
          tags: [exterior]
    - name: Bookshelf
      coord: [13.85, 15.0]
      local:
        - to: Entry
          jumps_down: 2
      locations:
        - name: Note
          item: Letter_from_Trace
          tags: [standing]

- name: Ruins East
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East 9
      coord: [16.95, 8.8]
      local:
        - to: Bottom Rock
          jumps: 2
        - to: Cliff
      exits:
        - to: Giguna Northeast > West 9
          tags: [xshift]
    - name: Bottom Rock
      coord: [16.3, 8.5]
      local:
        - to: East 9
        - to: West 9
      exits:
        - to: Cliff
          req: $hook
          time: 3.45
    - name: West 9
      coord: [16.05, 8.6]
      local:
        - to: Bottom Rock
          jumps: 1
      exits:
        - to: Ruins Center > East 9
          tags: [xshift]
    - name: Cliff
      coord: [16.6, 7.6]
      local:
        - to: Bottom Rock
        - to: East 9
        - to: West 9
          thru: [16.2, 7.7]
      exits:
        - to: Ledge
          req: $climb
        - to: Ledge
          req: $hook
          time: 0.8
    - name: Ledge
      coord: [16.55, 7.4]
      local:
        - to: Cliff
      exits:
        - to: Small Passage
          req: ^mode == 'drone'
          time: 0.35
        - to: Pillar
          req: $grab and $climb
          movement: base
          jumps: 7
    - name: Small Passage
      coord: [16.45, 7.4]
      local:
        - to: West 8
      exits:
        - to: Ledge
          req: ^mode == 'drone'
          time: 0.35
    - name: West 8
      coord: [16.05, 7.5]
      local:
        - to: Small Passage
          jumps: 1
      exits:
        - to: Ruins Center > East 8
          tags: [xshift]
    - name: Pillar
      coord: [16.25, 6.4]
      local:
        - to: West 7
        - to: Way Up High
        - to: Ledge
    - name: West 7
      coord: [16.05, 6.8]
      exits:
        - to: Ruins Top > East 7
          tags: [xshift]
        - to: Pillar
          req: $grab and $climb
          movement: base
          jumps: 3
    - name: Way Up High
      coord: [16.55, 5.45]
      local:
        - to: Pillar
        - to: Cliff
        - to: East 9
      locations:
        - name: Item
          item: Flask
          tags: [flask]
      # TODO: exits toward Ruins Top?

- name: Ruins Center
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East 8
      coord: [15.95, 7.5]
      local:
        - to: Tablet
      exits:
        - to: Ruins East > West 8
          tags: [xshift]
    - name: Tablet
      coord: [15.8, 7.5]
      local:
        - to: East 8
      locations:
        - name: Item
          item: Aansur
          tags: [standing]
    - name: East 9
      coord: [15.95, 8.6]
      local:
        - to: Wall Bottom
          jumps: 1
      exits:
        - to: Ruins East > West 9
          tags: [xshift]
    - name: Wall Bottom
      coord: [15.2, 8.4]
      local:
        - to: East 9
          jumps: 1
      exits:
        - to: Wall Top
          req: $climb
          movement: base
          jumps: 2
    - name: Wall Top
      coord: [15.2, 8.15]
      local:
        - to: Wall Bottom
          jumps_down: 1
        - to: East 9
      exits:
        - to: Center Top
          req: $grab
          time: 1.5
    - name: Center Top
      coord: [15.1, 7.7]
      local:
        - to: West Platform Right
    - name: West Platform Right
      coord: [14.8, 8.15]
      local:
        - to: West Platform Left
      # exit?
    - name: West Platform Left
      coord: [14.4, 8.15]
      local:
        - to: West Platform Right
        - to: West 9
          jumps_down: 1
    - name: West 9
      coord: [14.05, 8.6]
      # todo: connection to West Platform Left?
      exits:
        - to: Ruins West > East 9
          tags: [xshift]

- name: Ruins West
  on_entry: $reset_old_area(^newpos)
  reset:
    _kishib_handled: false
  spots:
    - name: East 9
      coord: [13.95, 8.6]
      local:
        - to: Save Point
        - to: Platform
          jumps: 1
      exits:
        - to: Ruins Center > West 9
          tags: [xshift]
    - name: Save Point
      coord: [13.5, 8.7]
      local:
        - to: Platform
          jumps: 2
        - to: East 9
          jumps: 1
      actions:
        - name: Save
          do: $save
          tags: [save]
    - name: Platform
      coord: [13.5, 8.35]
      local:
        - to: Save Point
          jumps_down: 2
        - to: East 9
        - to: Nook
          jumps: 2
    - name: Nook
      coord: [13.4, 8.0]
      local:
        - to: Platform
      exits:
        - to: Lower Ledge
          req: $grab and $climb
          time: 2.35
    - name: Lower Ledge
      coord: [13.4, 7.4]
      local:
        - to: Nook
        - to: Platform
      exits:
        - to: Upper Ledge
          req: $grab and ^_kishib_handled
          time: 4
      actions:
        - name: Hack Kishib
          req: not ^_kishib_handled and $allegiance1
          price: 100
          do: ^_kishib_handled = true
          tags: [hack]
        - name: Destroy Kishib
          req: not ^_kishib_handled and $shockwave
          price: 100
          do: ^_kishib_handled = true
          tags: [shockwave]
    - name: Upper Ledge
      coord: [13.6, 6.35]
      local:
        - to: Lower Ledge
        - to: Platform
        - to: East 7
    - name: East 7
      coord: [13.95, 6.7]
      exits:
        - to: Upper Ledge
          req: $grab
          time: 1.2
        - to: Ruins Top > West 7
          tags: [xshift]
    
    - name: Rooftop East Edge
      coord: [13.6, 5.65]
      local:
        - to: Rooftop West Edge
          jumps: 1
        # I mean... we *could* jump back down, but why?
    - name: Rooftop West Edge
      coord: [13.3, 5.45]
      local:
        - to: West 7
    - name: West 7
      coord: [13.05, 6.3]
      exits:
        - to: West Tower > East 7
          tags: [xshift]

- name: Ruins Top
  on_entry: $reset_old_area(^newpos)
  start:
    _doors_open: false
  spots:
    - name: West 7
      coord: [14.05, 6.7]
      exits:
        - to: Ruins West > East 7
          tags: [xshift]
        - to: West Door
          req: ^_doors_open
          movement: base
          jumps: 1
        - to: West Pillar
          req: $grab or $climb
          time: 2.25
    - name: West Door
      coord: [14.275, 6.55]
      exits:
        - to: West 7
          req: ^_doors_open
          movement: base
        - to: Entryway
          req: ^_doors_open
          movement: base
    - name: West Pillar
      coord: [14.3, 6.0]
      local:
        - to: West 7
        - to: Entryway
    - name: Entryway
      coord: [14.45, 6.75]
      local:
        - to: Portal Left
      exits:
        - to: West Door
          req: ^_doors_open
          movement: base
          jumps: 2
    - name: Portal Left
      coord: [15.3, 6.8]
      local:
        - to: Entryway
        - to: Portal
          jumps: 1
      exits:
        - to: Small Ledge
          req: $grab or $hook
          time: 1.0
    - name: Small Ledge
      coord: [15.25, 6.5]
      local:
        - to: Portal Left
        - to: Portal
      locations:
        - name: Shockwave Flask
          item: Flask
          canon: Giguna_Top_Flask
          tags: [shockwave]
          time: 4.0
      exits:
        - to: Interior Ledge
          req: $hook
          time: 1.5  # ?
    - name: Portal
      coord: [15.475, 6.6]
      data:
        flipside: Giguna Breach > Peak > Save Point
      local:
        - to: Portal Left
        - to: Small Ledge
          jumps: 1
      exits:
        - to: Interior Ledge
          req: $hook
          time: 1.5  # ?
        - to: East Door
          req: ^_doors_open
          movement: base
      actions:
        - name: Enter Portal
          req: ^mode == 'drone'
          do: $portal(^flipside)
          to: ^flipside
          tags: [portal]
    - name: Interior Ledge
      coord: [15.65, 6.2]
      exits:
        - to: Portal
          req: ^mode == 'drone'
          time: 0.8
        - to: Upper Tunnel
          req: $grab or $hook
          time: 1.0  # ?
    - name: Upper Tunnel
      coord: [15.5, 5.8]
      local:
        - to: Interior Ledge
        - to: Flask
      # boomerang remote flask?
    - name: Flask
      coord: [15.3, 5.95]
      local:
        - to: Upper Tunnel
          jumps: 1
      locations:
        - name: Flask
          item: Flask
          canon: Giguna_Top_Flask
          tags: [flask]
    - name: East Door
      coord: [15.725, 6.75]
      exits:
        - to: Portal
          req: ^_doors_open
          movement: base
          jumps: 1
        - to: East 7
          req: ^_doors_open
          movement: base
    - name: East 7
      coord: [15.95, 6.8]
      exits:
        - to: East Door
          req: ^_doors_open
          movement: base
          jumps: 1
        - to: Ruins East > West 7
          tags: [xshift]
    
    # post-breach
    - name: Save Point
      coord: [14.8, 5.8]
      data:
        flipside: Giguna Breach > Peak > Portal
      local:
        - to: Switch
          jumps: 1
      actions:
        - name: Save
          do: $save
          tags: [save]
      # TODO: move through the small passage with the drone
    - name: Switch
      coord: [14.95, 5.6]
      local:
        - to: Save Point
      actions:
        - name: Open Doors
          req: $open
          do: ^_doors_open = true
          tags: [hack]
      exits:
        - to: Rooftop West
          req: $grab
          movement: base
          jumps: 3
        - to: Turret Balcony East
          req: $grab
          movement: base
          jumps: 4
    - name: Rooftop West
      coord: [15.1, 5.2]
      local:
        - to: Switch
        - to: Rooftop East
      exits:
        - to: Turret Balcony East
          req: $grab
          movement: base
          jumps: 2
    - name: Rooftop East
      coord: [15.6, 5.2]
      local:
        - to: Rooftop West
        - to: Rooftop Gutter
      # TODO: Movement to the high flask
    - name: Rooftop Gutter
      coord: [15.825, 5.55]
      local:
        - to: Rooftop East
          jumps: 2
        - to: East 7
      # TODO: movement to the high flask and the pillar
    - name: Turret Balcony East
      coord: [14.8, 5.2]
      local:
        - to: Turret Balcony West
        - to: Switch
      exits:
        - to: Rooftop West
          req: $grab
          movement: base
          jumps: 2
    - name: Turret Balcony West
      coord: [14.35, 5.2]
      local:
        - to: West Pillar
        - to: Entryway
        - to: West 7
      actions:
        - name: Throw Drone onto Tower
          req: $grab and $can_deploy
          do: $deploy_drone_and_move(`Giguna > Ruins Top > West 7`)
          to: Giguna > Ruins West > Rooftop East Edge
          time: 3.8
          tags: [xshift]
    
- name: West Tower
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East 7
      coord: [12.95, 6.3]
      local:
        - to: Top
    - name: Top
      coord: [12.6, 7.2]
      local:
        - to: Southwest
          thru: [12.4, 7.25]
      locations:
        - name: Tablet
          item: The_Ideal_Kiengir
          tags: [standing]
    - name: Southwest
      coord: [12.2, 8.9]
      exits:
        - to: West Caverns > Northwest
          tags: [yshift]

- name: Far Corner
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East 13
      coord: [11.95, 12.3]
      local:
        - to: Grass
    - name: Grass
      coord: [11.55, 12.9]
      local:
        - to: South
      locations:
        - name: Obscured Item
          item: Flask
          tags: [flask]
    - name: South
      coord: [11.4, 12.9]  # TODO: yshifts should be at .95/.05 as well!
      exits:
        - to: Helipad > North
          tags: [yshift]

- name: Helipad
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East 15
      coord: [12.95, 14.75]
      local:
        - to: Helicopter
          jumps: 2
      exits:
        - to: Giguna Base > West 15
          tags: [xshift]
    - name: North
      coord: [11.4, 13.1]
      local:
        - to: Helicopter
        - to: Wall Top
        - to: Irikar Drop
    - name: Helicopter
      coord: [11.7, 14.65]
      local:
        - to: East 15
        - to: Wall Top
        - to: Irikar Drop
    - name: East 16
      coord: [12.95, 15.85]
      local:
        - to: Railing
      exits:
        - to: Giguna Base > West 16
          tags: [xshift]
    - name: Irikar Drop
      coord: [11.1, 15.5]
      local:
        - to: So Close!
        - to: South Left
        - to: South Middle
        - to: South Right
    - name: Wall Top
      coord: [11.8, 15.45]
      local:
        - to: Wall Bottom
        - to: Staircase Top
      exits:
        - to: Railing
          req: $hover
          movement: base
    - name: Railing
      coord: [12.5, 15.85]
      local:
        - to: East 16
        - to: Wall Bottom
        - to: Staircase Top
          jumps_down: 1
        - to: East 18
          thru: [12.55, 16.45]
          jumps_down: [1, 0]
      exits:
        - to: Wall Top
          req: Nanite_Mist and Mist_Upgrade
          price: 70
          movement: mist2
    - name: Wall Bottom
      coord: [11.9, 16.7]
      local:
        - to: Staircase Top
        # TODO: balloon boost
    - name: So Close!
      coord: [11.4, 16.65]
      local:
        - to: South Right
      exits:
        - to: Tablet Ledge
          req: $hover
          movement: base
        - to: Tablet Ledge
          req: Nanite_Mist and Mist_Upgrade
          price: 20
          movement: base
    - name: Tablet Ledge
      coord: [11.5, 16.7]
      local:
        - to: South Middle
        - to: South Right
      locations:
        - name: Tablet
          item: Journal_2049_10_29
          tags: [standing]
    - name: Staircase Top
      coord: [12.45, 16.7]
      local:
        - to: Wall Bottom
        - to: East 18
    - name: East 18
      coord: [12.95, 17.4]
      local:
        - to: Staircase Top
          jumps: 4
      exits:
        - to: Lamassu > West 18
          tags: [xshift]
    - name: South Left
      coord: [11.1, 17.9]
    - name: South Middle
      coord: [11.3, 17.9]
    - name: South Right
      coord: [11.75, 17.9]
    - name: Lowest Ledge
      coord: [12.3, 17.9]

- name: Clouds
  on_entry: $reset_old_area(^newpos)
  reset:
    # We'll only move these together
    _platform_and_portal: false
  spots:
    - name: North Left
      coord: [11.1, 18.1]
      local:
        - to: Southwest
    - name: North Middle
      coord: [11.3, 18.1]
      local:
        - to: Southwest
        - to: Platform Start
    - name: North Right
      coord: [11.75, 18.1]
      local:
        - to: Pull Right
    - name: North Under Ledge
      coord: [12.3, 18.1]
    - name: Platform Start
      coord: [11.3, 19.5]
      local:
        - to: Straight Down
      actions:
        - name: Hack and Ride to Portal
          req: not ^_platform_and_portal and $activate and $attract and Breach_Sight and Remote_Drone
          do: ^_platform_and_portal = true; if (^indra WITHIN ^position) { ^indra = `Giguna > Clouds > Platform Stop` }
          to: Platform Stop
          time: 12  # estimate includes changing active item twice
        - name: Hack, Deploy, Ride to Portal
          req: not ^_platform_and_portal and $activate and $can_deploy and $attract and Breach_Sight
          do: ^_platform_and_portal = true; $deploy_drone_and_move(`Giguna > Clouds > Platform Stop`)
          to: Platform Stop
          time: 12  # it's not really additional time
        # Early portal gives us about .5s savings, is that worth modeling?

    - name: Platform Stop
      coord: [12.5, 18.7]
      data:
        flipside: Giguna Breach > Pink Clouds > Normal Entry
      local:
        - to: Pull Right
        - to: Southeast
      exits:
        - name: Enter Portal
          req: ^_platform_and_portal and ^mode == 'drone'
          to: ^flipside
          tags: [portal]
      
    - name: Cache
      coord: [12.9, 18.3]
      data:
        flipside: Giguna Breach > Pink Clouds > Corner
      locations:
        - name: Item
          item: Big_Flask
          tags: [flask]
    - name: Platform Early Portal
      coord: [12.5, 18.85]
    - name: Southwest
      coord: [11.0, 19.9]
      exits:
        - to: Irikar > Hub > Northwest
          tags: [yshift]
    - name: Straight Down
      coord: [11.3, 19.9]
      exits:
        - to: Irikar > Hub > North Above Portal
          tags: [yshift]
    - name: Pull Right
      coord: [12.25, 19.9]
      exits:
        - to: Irikar > Hub > Northwest Above Bowl
          tags: [yshift]
    - name: Southeast
      coord: [12.8, 19.9]
      exits:
        - to: Irikar > Hub > Northeast Above Bowl
          tags: [yshift]

- name: Lamassu
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West 18
      coord: [13.05, 17.4]
      local:
        - to: Staircase Top
      exits:
        - to: Helipad > East 18
          tags: [xshift]
    - name: Staircase Top
      coord: [13.45, 17.4]
      local:
        - to: West 18
        - to: Staircase Bottom
    - name: Staircase Bottom
      coord: [13.7, 17.8]
      local:
        - to: Staircase Top
          jumps: 2
        - to: Staircase Landing
        - to: Broken Pillar
        - to: Upper Platform Edge
    - name: Staircase Landing
      coord: [13.75, 18.05]
      local:
        - to: Staircase Bottom
          jumps: 2
        - to: Broken Pillar
        - to: Upper Platform Edge
    - name: Broken Pillar
      coord: [13.8, 18.3]
      local:
        - to: Upper Platform Edge
      exits:
        - to: Staircase Landing
          req: $grab
          movement: base
          jumps: 2
    - name: Upper Platform Edge
      coord: [14.15, 18.45]
      local:
        - to: Broken Pillar
          jumps: 1
        - to: Lower Platform Left
    - name: Lower Platform Left
      coord: [14.35, 18.7]
      local:
        - to: Lower Platform Right
      exits:
        - to: Upper Platform Edge
          req: $grab  # ?
          movement: base
          jumps: 2
    - name: Lower Platform Right
      coord: [14.6, 18.7]
      local:
        - to: Lower Platform Left
      exits:
        - to: Head
          req: $grab and $climb
          movement: base
          jumps: 3
    - name: Head
      coord: [14.9, 18.2]
      local:
        - to: Wingtip
          jumps: 1
        - to: Lower Platform Right
        - to: Lower Platform Left
    - name: Rear Platform
      coord: [15.5, 17.8]
      local:
        - to: Head
        - to: East 18  # or requires grab?
          jumps: 2
    - name: Wingtip
      coord: [15.7, 18.1]
      local:
        - to: Head
        - to: Deposit
        - to: Rear Gap
          jumps: 1
    - name: Rear Gap
      coord: [15.8, 18.0]
      local:
        - to: Deposit
        - to: Wingtip
      exits:
        - to: East 18
          req: $grab
          movement: base
          jumps: 4
    - name: Deposit
      coord: [15.65, 19.5]
      local:
        - to: Wingtip
          jumps: 8
        - to: Rear Gap
          jumps: 9
      locations:
        - name: Flask
          item: Flask
          tags: [flask]
    - name: East 18
      coord: [15.95, 17.5]
      local:
        - to: Rear Platform
        - to: Rear Gap
      exits:
        - to: Dual Path > West 18
          tags: [xshift]

- name: Dual Path
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West 18
      coord: [16.05, 17.5]
      local:
        - to: Below Left Switch
      exits:
        - to: West Gate
          req: $grab
          movement: base
          jumps: 2
        - to: West Gate
          req: $hook
          time: 1  # ?
        - to: Lamassu > East 18
          tags: [xshift]
    - name: Below Left Switch
      coord: [16.2, 17.7]
      local:
        - to: West 18
          jumps: 1
        - to: West Slope
        - to: Left Switch
          jumps: 1
      locations:
        - name: Remote Switch
          item: Giguna_Dual_Path_Switch
          canon: Giguna_Dual_Path_Switch
          req: $boomerang
          time: 0.5  # ?
    - name: Left Switch
      coord: [16.3, 17.5]
      local:
        - to: Below Left Switch
        - to: West Slope
      locations:
        - name: Hit Switch
          item: Giguna_Dual_Path_Switch
          canon: Giguna_Dual_Path_Switch
          req: $can_damage
          time: 0  # we don't exactly hang in the air
    - name: West Slope
      coord: [16.85, 17.7]
      local:
        - to: Below Left Switch
        - to: In the Grass
    - name: In the Grass
      coord: [17.7, 17.75]
      local:
        - to: West Slope
          jumps: 1
        - to: Base of Wall
      exits:
        - to: Wall Top
          req: $grab and $climb
          movement: base
          jumps: 3
        - to: Wall Top
          req: $hook
          time: 1  # ?
    - name: Base of Wall
      coord: [17.85, 17.75]
      local:
        - to: In the Grass
      exits:
        - to: Wall Top
          req: $grab and $climb
          movement: base
          jumps: 3
        - to: Wall Top
          req: $hook
          time: 1  # ?
        - to: Wall Secret
          req: ^mode == 'drone'
          time: 1  # ?
        - to: Wall Secret
          req: ^mode == 'drone' and Mist_Upgrade
          movement: mist2
          price: 20  # ?
    - name: Wall Secret
      coord: [17.95, 17.75]
      locations:
        - name: Health
          item: Health_Fragment
      exits:
        - to: Base of Wall
          req: ^mode == 'drone'
          movement: base
    - name: Wall Top
      coord: [17.85, 17.25]
      local:
        - to: In the Grass
        - to: West Slope
        - to: Base of Wall
        - to: Below Right Switch
    - name: Right Switch
      coord: [18.1, 17.3]
      local:
        - to: Wall Top
          jumps: 2
        - to: Below Right Switch
      locations:
        - name: Hit Switch
          item: Giguna_Dual_Path_Switch
          canon: Giguna_Dual_Path_Switch
          req: $can_damage
          time: 0  # we don't exactly hang in the air
    - name: Below Right Switch
      coord: [18.15, 17.45]
      local:
        - to: Right Switch
          jumps: 1
        - to: Wall Top
          jumps: 2
        - to: East Gate
          jumps: 2
        - to: East 18
      locations:
        - name: Remote Switch
          item: Giguna_Dual_Path_Switch
          canon: Giguna_Dual_Path_Switch
          req: $boomerang
          time: 0.5  # ?
    - name: East Gate
      coord: [18.4, 17.3]
      local:
        - to: Below Right Switch
          jumps_down: 1
        - to: East 18
          jumps_down: 1
      exits:
        - to: East Gate NW
          req: Giguna_Dual_Path_Switch and ($grab or $climb)
          movement: base
          jumps: 3
        - to: East Gate NW
          req: Giguna_Dual_Path_Switch and $hook
          time: 1  # ?
    - name: East 18
      coord: [18.95, 17.65]
      local:
        - to: East Gate
          jumps: 2
        - to: Below Right Switch
          jumps: 2
      exits:
        - to: Gateway > West 18
          tags: [xshift]

    # Upper path
    - name: West Gate
      coord: [16.3, 17.2]
      local:
        - to: West 18
        - to: Below Left Switch
      exits:
        - to: West Gate NW
          req: Giguna_Dual_Path_Switch and $climb
          movement: base
          jumps: 3
        - to: West Gate NE
          req: Giguna_Dual_Path_Switch and $climb
          movement: base
          jumps: 2
        - to: West Gate NW
          req: Giguna_Dual_Path_Switch and $hook
          time: 1  # ?
        - to: West Gate NE
          req: Giguna_Dual_Path_Switch and $hook
          time: 1  # ?
    - name: West Gate NW
      coord: [16.2, 16.85]
      local:
        - to: West 17
        - to: West Gate NE
      exits:
        - to: West Gate
          req: Giguna_Dual_Path_Switch
          movement: base
    - name: West Gate NE
      coord: [16.4, 16.85]
      local:
        - to: West Gate NW
        - to: Midway
          jumps: 1
      exits:
        - to: West Gate
          req: Giguna_Dual_Path_Switch
          movement: base
    - name: West 17
      coord: [16.05, 16.85]
      local:
        - to: West Gate NW
      exits:
        - to: Hard Rock > East 17
          tags: [xshift]
    - name: Midway
      coord: [17.35, 16.8]
      local:
        - to: West Gate NE
          jumps: 1
      exits:
        - to: Midway Plateau
          req: $grab or $climb
          movement: base
          jumps: 2
        - to: Midway Plateau
          req: $hook
          time: 1  # ?
    - name: Midway Plateau
      coord: [17.55, 16.5]
      local:
        - to: Midway
        - to: East Gate NW
    - name: East Gate NW
      coord: [18.25, 16.8]
      local:
        - to: Midway Plateau
          jumps: 2
      exits:
        - to: East Gate NE
          req: $hook
          time: 1  # ?
    - name: East Gate NE
      coord: [18.55, 16.45]
      local:
        - to: East Gate NW
        - to: East 17
      exits:
        - to: East Gate
          req: Giguna_Dual_Path_Switch
          movement: base
    - name: East 17
      coord: [18.95, 16.85]
      local:
        - to: East Gate NE
          jumps: 3
      exits:
        - to: East Caverns > West 17
          tags: [xshift]

- name: Hard Rock
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East 17
      coord: [15.95, 16.85]
      local:
        - to: Rock Right
      exits:
        - to: Dual Path > West 17
          tags: [xshift]
    - name: Rock Right
      coord: [15.7, 16.85]
      local:
        - to: East 17
      locations:
        - name: Shockwave Boulder
          item: Giguna_Boulder
          canon: Giguna_Boulder
          req: $shockwave
          price: 100
          tags: [shockwave]
      exits:
        - to: Rock Center
          req: Giguna_Boulder
          movement: base
      hybrid:
        - name: Enter Rock as Mist
          item: Giguna_Boulder
          canon: Giguna_Boulder
          to: Rock Center
          req: Nanite_Mist and Mist_Upgrade
          price: 30
          movement: mist2
    - name: Rock Center
      coord: [15.55, 16.85]
      local:
        - to: Rock Left
        - to: Rock Right
      locations:
        - name: Tablet
          item: Building_of_the_School
          tags: [standing]
    - name: Rock Left
      coord: [15.4, 16.85]
      local:
        - to: West 17
          jumps: 2
      locations:
        - name: Shockwave Boulder
          item: Giguna_Boulder
          canon: Giguna_Boulder
          req: $shockwave
          price: 100
          tags: [shockwave]
      exits:
        - to: Rock Center
          req: Giguna_Boulder
          movement: base
      hybrid:
        - name: Enter Rock as Mist
          item: Giguna_Boulder
          canon: Giguna_Boulder
          to: Rock Center
          req: Nanite_Mist and Mist_Upgrade
          price: 30
          movement: mist2
    - name: West 17
      coord: [15.05, 16.6]
      local:
        - to: Rock Left
      exits:
        - to: Giguna Base > East 17
          tags: [xshift]

- name: East Caverns
  on_entry: $reset_old_area(^newpos)
  start:
    _door_opened: false
  load:
    _combo_entered: false
  reset:
    _upper_susar: false
    _mid_susar: false
  spots:
    - name: West 14
      coord: [19.05, 13.6]
      local:
        - to: Upper Platforms Left
        - to: Upper Floor
      exits:
        - to: Wasteland > East 14
          tags: [xshift]
      actions:
        - name: Enter Combo
          req: not ^_combo_entered
          do: ^_combo_entered = true
          time: 1.75
    - name: Upper Platforms Left
      coord: [19.3, 13.65]
      local:
        - to: West 14
          jumps: 1
        - to: Upper Platforms Right
        - to: Upper Floor
    - name: Upper Platforms Right
      coord: [19.65, 13.8]
      local:
        - to: Upper Floor Ledge
        - to: Upper Susar
          jumps: 1
        - to: Upper Susar Mid-jump
          jumps: 1
        - to: Middle Ledge
      exits:
        - to: Upper Passage West
          req: $hook and $hover
          time: 1.5  # ?
        # mist movement is also possible
    - name: Upper Floor
      coord: [19.55, 13.9]
      local:
        - to: Upper Platforms Right
          jumps: 1
        - to: Upper Platforms Left
          jumps: 2
        - to: Upper Floor Ledge
      exits:
        - to: West 14
          req: $grab
          movement: base
          jumps: 3
        - to: Upper Passage West
          req: $hook and $hover
          time: 1  # ?
    - name: Upper Floor Ledge
      coord: [19.7, 14.0]
      local:
        - to: Upper Floor
        - to: Upper Platforms Right
          jumps: 1
        - to: Upper Susar
          jumps: 1
        - to: Middle Ledge
        - to: Midwest Ledge
    - name: Upper Susar
      coord: [19.875, 13.75]
      actions:
        - name: Caught
          req: not ^_upper_susar
          do: ^_upper_susar = true
          tags: [susar]
      exits:
        - to: Top Past Susar
          req: ^_upper_susar
          movement: base
          jumps: 1
        - to: Upper Floor Ledge
          req: ^_upper_susar
          movement: base
        - to: Upper Platforms Right
          req: ^_upper_susar
          movement: base
        - to: Middle Ledge
          req: ^_upper_susar
          movement: base
    - name: Upper Susar Mid-jump
      coord: [19.8, 13.6]
      local:
        - to: Upper Susar
      exits:
        - to: Top Past Susar
          req: ^_upper_susar
          movement: base
      actions:
        - name: Hack
          req: not ^_upper_susar and $allegiance1
          price: 100
          do: ^_upper_susar = true
          time: 0.5
    - name: Upper Susar Jump from East
      coord: [19.95, 13.5]
      local:
        - to: Upper Susar
      actions:
        - name: Hack
          req: not ^_upper_susar and $allegiance1
          price: 100
          do: ^_upper_susar = true
          tags: [hack]
        - name: Caught
          req: not ^_upper_susar
          do: ^_upper_susar = true
          tags: [susar]
      exits:
        - to: Middle Ledge
          req: ^_upper_susar
          movement: base
        - to: Midwest Ledge
          req: ^_upper_susar
          movement: base
    - name: Top Past Susar
      coord: [20.1, 13.65]
      local:
        - to: Upper Susar
        - to: Top Ledge
        - to: Upper Susar Jump from East
          jumps: 1
    - name: Top Ledge
      coord: [20.6, 13.65]
      local:
        - to: Top Past Susar
        - to: Upper Passage East
        - to: East Shaft

    - name: Upper Passage West
      coord: [20.0, 13.9]
      local:
        - to: Middle Ledge
        - to: Mid Susar
      exits:
        - to: Upper Passage East
          req: ^mode == 'drone'
          movement: base
    - name: Upper Passage East
      coord: [20.6, 13.9]
      local:
        - to: East Shaft
      exits:
        - to: Top Ledge
          req: $grab and $climb
          movement: base
          jumps: 3
        - to: Top Ledge
          req: $hook
          time: 1  # ?
        - to: Upper Passage West
          req: ^mode == 'drone'
          movement: base
    - name: East Shaft
      coord: [20.8, 14.3]
      local:
        - to: Upper Passage East
          jumps: 2
        - to: East Side
    - name: East Side
      coord: [20.7, 14.7]
      local:
        - to: Carving
        - to: East Shaft
          jumps: 3
      exits:
        - to: East Shaft
          req: $hook
          time: 2  # ?
        - to: Middle Rock
          req: $hook
          time: 1.5  # ?
    - name: Carving
      coord: [20.55, 15.0]
      local:
        - to: Arc Passage
      exits:
        - to: Middle Rock
          req: $grab and $climb
          movement: base
          jumps: 3
        - to: Middle Rock
          req: $hook
          time: 1  # ?
        - to: East Side
          req: $grab
          movement: base
          jumps: 2
        - to: East Side
          req: $hook
          movement: base
          jumps: 1

    - name: Middle Ledge
      coord: [19.85, 14.25]
      local:
        - to: Mid Susar
        - to: Midwest Ledge
      exits:
        - to: Upper Passage West
          req: $hook
          time: 0.5  # ?
        - to: Upper Floor Ledge
          req: $hook
          time: 1  # ?
        - to: Upper Floor Ledge
          req: $grab
          movement: base
          jumps: 2
    - name: Mid Susar
      coord: [20.1, 14.4]
      exits:
        - to: Middle Ledge
          req: $grab and ^_mid_susar
          movement: base
          jumps: 2
        - to: Middle Ledge
          req: $hook and ^_mid_susar
          movement: base
          jumps: 1
        - to: Middle Rock
          req: ^_mid_susar
          movement: base
      actions:
        - name: Hack
          req: not ^_mid_susar and $allegiance1
          price: 100
          do: ^_mid_susar = true
          tags: [hack]
        - name: Caught
          req: not ^_mid_susar
          do: ^_mid_susar = true
          tags: [susar]
    - name: Middle Rock
      coord: [20.35, 14.6]
      local:
        - to: Mid Susar
          jumps: 1
        - to: Carving
        - to: Arc Passage
      exits:
        - to: Hidden Passage East
          req: ^mode == 'drone' and ^_combo_entered
          movement: base

    - name: Hidden Passage East
      coord: [20.35, 15.05]
      local:
        - to: Carving
          jumps: 1
        - to: Arc Passage
      exits:
        - to: Hidden Passage Center
          req: ^mode == 'drone'
          movement: base
    - name: Hidden Passage Center
      coord: [20.0, 15.05]
      local:
        - to: Hidden Passage West
        - to: Hidden Passage East
      locations:
        - name: Hidden Flask
          item: Flask
          tags: [flask]
    - name: Hidden Passage West
      coord: [19.75, 15.05]
      local:
        - to: Midwest Ledge
        - to: Arc Ledge
      exits:
        - to: Hidden Passage Center
          req: ^mode == 'drone'
          movement: base
        - to: Statues Ledge
          req: $hover
          movement: base
        - to: Statues Ledge
          req: $hook
          time: 1  # ?
    - name: Midwest Ledge
      coord: [19.65, 14.9]
      local:
        - to: Lower Ledge
        - to: Arc Ledge
        - to: Statues Ledge
        - to: Middle Ledge
          thru: [19.6, 20.3]
          jumps: [4, 1]
      exits:
        - to: Middle Ledge
          req: $grab
          movement: base
          jumps: 6
        - to: Hidden Passage East
          req: $hover and $hook and ^_combo_entered
          time: 1.75  # ?
        - to: Hidden Passage East
          req: ^mode == 'drone' and Mist_Upgrade and ^_combo_entered
          price: 20
          time: 1.5  # ?

    - name: Statues Ledge
      coord: [19.5, 15.5]
      local:
        - to: Switch
        - to: Lower Ledge
      exits:
        - to: Midwest Ledge
          req: $grab
          movement: base
          jumps: 4
        - to: Midwest Ledge
          req: $hook
          time: 1.5  # ?
        - to: Hidden Passage West
          req: $hover and $hook and ^_combo_entered
          movement: base
          jumps: 1
        - to: Hidden Passage West
          req: ^mode == 'drone' and Mist_Upgrade and ^_combo_entered
          price: 20
          time: 1.2  # ?
      actions:
        - name: Open Door
          req: not ^_door_opened and $unlock2 and $range1
          do: ^_door_opened = true
          tags: [hack]

    - name: Switch
      coord: [19.3, 15.5]
      local:
        - to: Statues Ledge
      exits:
        - to: Door
          req: ^_door_opened
          movement: base
      actions:
        - name: Open Door
          req: not ^_door_opened and $unlock2
          do: ^_door_opened = true
          tags: [hack]
    - name: Door
      coord: [19.125, 15.5]
      local:
        - to: Switch
        - to: West 16
          jumps: 1
    - name: West 16
      coord: [19.05, 15.45]
      exits:
        - to: Door
          req: ^_door_opened
          movement: base
        - to: Antechamber > East 16
          tags: [xshift]
      actions:
        - name: Open Door
          req: not ^_door_opened and $open and $range2
          do: ^_door_opened = true
          tags: [hack]

    - name: Arc Ledge
      coord: [19.8, 15.7]
      local:
        - to: Lower Ledge
        - to: Arc Passage
          jumps: 3
      exits:
        - to: Statues Ledge
          req: $hook
          time: 1  # ?
        - to: Hidden Passage West
          req: ^mode == 'drone' and Mist_Upgrade and ^_combo_entered
          movement: mist2
          price: 30
    - name: Arc Passage
      coord: [20.4, 15.6]
      local:
        - to: Arc Ledge
          jumps: 3
        - to: Carving
          jumps: 3
      exits:
        - to: Hidden Passage West
          req: ^mode == 'drone' and ^_combo_entered
          movement: base
          jumps: 3
        - to: Hidden Passage West
          req: $hook and ^_combo_entered
          time: 1.2  # ?
    - name: Lower Ledge
      coord: [19.55, 16.25]
      local:
        - to: West 17
        - to: West Grass
        - to: Under Lower Ledge
          thru: [19.5, 16.5]
      exits:
        - to: Arc Ledge
          req: $grab
          movement: base
          jumps: 4
        - to: Arc Ledge
          req: $hook
          time: 1.2  # ?

    - name: West 17
      coord: [19.05, 16.85]
      local:
        - to: West Grass
          jumps: 1
      exits:
        - to: Dual Path > East 17
          tags: [xshift]
    - name: West Grass
      coord: [19.4, 16.8]
      local:
        - to: West 17
        - to: Under Lower Ledge
      exits:
        - to: Lower Ledge
          req: $hook and $hover
          time: 2  # ?
    - name: Under Lower Ledge
      coord: [19.6, 16.8]
      local:
        - to: West Grass
        - to: East Grass
          jumps: 2
    - name: East Grass
      coord: [20.45, 16.7]
      local:
        - to: Under Lower Ledge
      exits:
        - to: East 17
          req: $hook
          time: 1.5  # ?
    - name: East 17
      coord: [20.95, 16.3]
      local:
        - to: East Grass
      exits:
        - to: Vertical Interchange > West 17

- name: Gateway
  on_entry: $reset_old_area(^newpos)
  reset:
    _door_opened: false
  spots:
    - name: West 18
      coord: [19.05, 17.65]
      local:
        - to: Passage Entry
      exits:
        - to: Dual Path > East 18
    - name: Passage Entry
      coord: [19.3, 17.8]
      local:
        - to: West 18
          jumps: 1
      exits:
        - to: Passage Exit
          req: ^mode == 'drone'
          movement: base
        - to: Door
          req: ^_door_opened
          movement: base
          jumps: 2
    - name: Passage Exit
      coord: [19.75, 18.1]
      local:
        - to: Block Left
      exits:
        - to: Passage Entry
          req: ^mode == 'drone'
          movement: base
          jumps: 3
        - to: Left Platform
          req: $hook
          time: 1  # ?
    - name: Door
      coord: [19.6, 17.35]
      exits:
        - to: Passage Entry
          req: ^_door_opened
          movement: base
        - to: Block Left
          req: ^_door_opened
          movement: base
        - to: Left Platform
          req: ^_door_opened
          movement: base
    - name: Left Platform
      coord: [20.0, 17.7]
      local:
        - to: Passage Exit
          thru: [19.9, 17.7]
        - to: Block Left
          thru: [19.9, 17.7]
        - to: Block Right
        - to: Right Platform
          jumps: 1
        - to: Refill Station
      exits:
        - to: Block Lowered
          req: Giguna_Gateway_Block
          movement: base
        # TODO: slingshot+hover to the flask
    - name: Right Platform
      coord: [20.2, 17.65]
      local:
        - to: Left Platform
        - to: Block Right
        - to: Refill Station
      exits:
        - to: Far Ledge
          req: $hover or $hook
          movement: base
    - name: Block Left
      coord: [19.9, 18.2]
      local:
        - to: Passage Exit
          jumps: 1
        - to: Block Right
      locations:
        - name: Shockwave
          item: Giguna_Gateway_Block
          canon: Giguna_Gateway_Block
          req: $shockwave
          price: 100
          tags: [shockwave]
      exits:
        - to: Block Lowered
          req: Giguna_Gateway_Block
          movement: base
    - name: Block Right
      coord: [20.1, 18.2]
      local:
        - to: Block Left
        - to: Refill Station
      locations:
        - name: Shockwave
          item: Giguna_Gateway_Block
          canon: Giguna_Gateway_Block
          req: $shockwave
          price: 100
          tags: [shockwave]
      exits:
        - to: Block Lowered
          req: Giguna_Gateway_Block
          movement: base
    - name: Refill Station
      coord: [20.4, 18.2]
      local:
        - to: Block Right
      exits:
        - to: Far Ledge
          req: $hook
          time: 1  # ?
    - name: Far Ledge
      coord: [20.6, 17.85]
      local:
        - to: Refill Station
        - to: Block Right
        - to: One Jump
          jumps: 1
      exits:
        - to: Flask Ledge
          req: $hook
          time: 1  # ?
        - to: Flask Ledge
          req: $grab and $climb
          movement: base
          jumps: 3
        - to: Right Platform
          req: $hook
          time: 1.2  # ?
    - name: One Jump
      coord: [20.65, 17.7]
      local:
        - to: Far Ledge
      actions:
        - name: Open Door
          req: $open and $range2
          do: ^_door_opened = true
          tags: [hack]
    - name: Flask Ledge
      coord: [20.7, 17.45]
      local:
        - to: Far Ledge
        - to: Refill Station
        - to: Block Right
      locations:
        - name: Item
          item: Flask
          tags: [flask]
        # TODO: with boomerang?
      actions:
        - name: Open Door
          req: $open
          do: ^_door_opened = true
          tags: [hack]
    - name: Block Lowered
      coord: [20.0, 18.5]
      local:
        - to: West 19
        - to: Button
      exits:
        - to: Block Left
          req: $grab and Giguna_Gateway_Block
          movement: base
          jumps: 2
        - to: Block Right
          req: $grab and Giguna_Gateway_Block
          movement: base
          jumps: 2
        - to: Block Left
          req: $hook and Giguna_Gateway_Block
          time: 0.5  # ?
        - to: Block Right
          req: $hook and Giguna_Gateway_Block
          time: 0.5  # ?
    - name: West 19
      coord: [19.05, 18.8]
      local:
        - to: Block Lowered
          jumps: 2
      exits:
        - to: Labyrinth East > East 19
          tags: [xshift]
    - name: Button
      coord: [20.55, 18.65]
      local:
        - to: Block Lowered
          jumps: 2
      locations:
        - name: Hit Switch
          item: Giguna_Gateway_Gate
          req: $can_damage
          time: 0  # while moving to next spot
      exits:
        - to: East 19
          req: Giguna_Gateway_Gate
          movement: base
    - name: East 19
      coord: [20.95, 18.8]
      exits:
        - to: Button
          req: Giguna_Gateway_Gate
          movement: base
          jumps: 2
        - to: Vertical Interchange > West 19
          tags: [xshift]

- name: Labyrinth East
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East 19
      coord: [18.95, 18.8]

- name: Vertical Interchange
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West 17
      coord: [21.05, 16.3]
    - name: West 19
      coord: [21.05, 18.8]
    - name: North
      coord: [21.5, 16.2]
    - name: Top Left Ledge
      coord: [21.25, 16.45]
    - name: Top Right Ledge
      coord: [21.45, 16.45]
    - name: Top Rocky Ledge
      coord: [21.3, 17.6]
    - name: Top Rocky Outcrop
      coord: [21.4, 18.0]
    - name: Top Passage Bottom
      coord: [21.35, 18.25]
    - name: Ledge 19
      coord: [21.65, 18.7]
    - name: East 20
      coord: [21.9, 19.8]

    - name: Middle Below Top
      coord: [21.4, 19.1]
    - name: Middle Plateau
      coord: [21.75, 19.6]
    - name: Gate
      coord: [21.55, 19.85]
    - name: Dead-end
      coord: [21.2, 19.5]
    - name: Dead-end Ledge
      coord: [21.3, 19.65]
    - name: Middle Ledge Below Gate
      coord: [21.45, 20.3]

    - name: Middle Hill By Switch
      coord: [21.65, 20.7]
    - name: Switch
      coord: [21.8, 20.8]

- name: Antechamber
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East 16
      coord: [18.95, 15.45]
      local:
        - to: Statues Ledge
      exits:
        - to: East Caverns > West 16
          tags: [xshift]
    - name: Statues Ledge
      coord: [18.75, 15.5]
      local:
        - to: East 16
          jumps: 1
        - to: Bottom
      exits:
        - to: Small Bricks
          req: $hook
          time: 0.6
    - name: Bottom
      coord: [18.5, 15.85]
      local:
        - to: Left Wall Lower
          jumps: 2
      exits:
        - to: Left Wall Lower
          req: $hook
          time: 1.1  # ?
    - name: Small Bricks
      coord: [18.55, 15.2]
      local:
        - to: Statues Ledge
        - to: Bottom
      exits:
        - to: Statue Head
          req: $hook
          time: 0.8
        - to: Middle Bricks Right
          req: $hook
          time: 0.6  # ?
    - name: Statue Head
      coord: [18.8, 14.8]
      local:
        - to: Small Bricks
        - to: Statues Ledge
      locations:
        - name: Tablet
          item: Dangerous_Ideas
          tags: [standing]
      exits:
        - to: Middle Bricks Right
          req: $hover
          movement: base
        - to: Middle Bricks Right
          req: $hook
          time: 1  # ?
    - name: Middle Bricks Right
      coord: [18.45, 14.8]
      local:
        - to: Middle Bricks Left
          jumps: 1
        - to: Small Bricks
        - to: Statues Ledge
      exits:
        - to: Statue Head
          req: $hover
          movement: base
        - to: Statue Head
          req: $hook
          time: 1  # ?
      # TODO: Throw Drone and mist
    - name: Middle Bricks Left
      coord: [18.3, 14.65]
      local:
        - to: Middle Bricks Right
        - to: West 15
          jumps: 1
      exits:
        - to: West 15
          req: $hook
          time: .75  # ?
    - name: Left Wall Lower
      coord: [18.15, 15.5]
      local:
        - to: Bottom
      exits:
        - to: Left Wall Mid
          req: $grab and $climb
          movement: base
          jumps: 3
        - to: Left Wall Mid
          req: $hook
          time: 0.75  # ?
    - name: Left Wall Mid
      coord: [18.15, 15.2]
      local:
        - to: Bottom
      exits:
        - to: West 15
          req: $grab and $climb
          movement: base
          jumps: 4
        - to: West 15
          req: $hook
          time: 1  # ?
    - name: West 15
      coord: [18.05, 14.65]
      local:
        - to: Middle Bricks Left
        - to: Bottom
      exits:
        - to: Small Bricks
          req: $hook
          time: 1.5  # ?
        - to: Gubi Lair > East 15
          tags: [xshift]

- name: Gubi Lair
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East 15
      coord: [17.95, 14.65]
      local:
        - to: East Tree
      exits:
        - to: Antechamber > West 15
          tags: [xshift]
        - to: Center Platform
          req: $hover
          movement: base
    - name: East Tree
      coord: [17.75, 14.95]
      local:
        - to: Rightmost Platform
      exits:
        - to: East 15
          req: $grab
          movement: base
          jumps: 2
        - to: East 15
          req: $hook
          time: .7  # ?
        - to: Center Platform
          req: $hover
          movement: base
          jumps: 1
    - name: Rightmost Platform
      coord: [17.5, 15.1]
      local:
        - to: East Tree
          jumps: 1
        - to: Lower Platform
      exits:
        - to: Center Platform
          req: $hover
          movement: base
          jumps: 1
    - name: Lower Platform
      coord: [17.25, 15.3]
      local:
        - to: Center-East Sapling
        - to: Center-West Sapling
        - to: Rightmost Platform
          jumps: 1
    - name: Center-East Sapling
      coord: [17.05, 15.5]
      local:
        - to: Lower Platform
          jumps: 1
        - to: Center-West Sapling
          jumps: 2
    - name: Center-West Sapling
      coord: [16.7, 15.45]
      local:
        - to: Center-East Sapling
        - to: Leftmost Platform
          jumps: 1
        - to: Grass by Wall
        - to: West Brickwork
    - name: Center Platform
      coord: [17.0, 14.9]
      local:
        - to: Leftmost Platform
        - to: Lower Platform
      locations:
        - name: Hack Gubi
          item: Giguna_Gubi
          canon: Giguna_Gubi
          req: $overheat
          price: 200
          time: 9
        - name: Fight Gubi
          item: Giguna_Gubi
          canon: Giguna_Gubi
          time: 20  # ?
        - name: Boss Reward
          item: Big_Flask
          req: Giguna_Gubi
          tags: [flask]
    - name: Leftmost Platform
      coord: [16.55, 15.25]
      local:
        - to: Center-West Sapling
        - to: West Brickwork
        - to: Center Platform
          jumps: 2
    - name: Grass by Wall
      coord: [16.45, 15.85]
      local:
        - to: West Brickwork
          jumps: 1
      exits:
        - to: Center-West Sapling
          req: $grab and $climb
          movement: base
          jumps: 3
        - to: Center-West Sapling
    - name: West Brickwork
      coord: [15.75, 15.8]
      local:
        - to: Grass by Wall
        - to: Shaft Bottom
          jumps: 2
    - name: Shaft Bottom
      coord: [15.25, 15.7]
      local:
        - to: West Brickwork
      exits:
        - to: Pedestal
          req: $hover and $hook
          time: 2.75
        - to: Pedestal
          req: $hook
          time: 4  # ?
        - to: Pedestal
          req: $grab and $climb
          movement: base
          jumps: 11
    - name: Pedestal
      coord: [15.4, 14.4]
      local:
        - to: Shaft Bottom
          thru: [15.25, 14.7]
      locations:
        - name: Axe
          item: Double_Axe
          tags: [standing]
