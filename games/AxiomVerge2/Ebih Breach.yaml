name: Ebih Breach
graph_offset: [0, 30]
data:
  realm: breach

areas:
- name: Portals 101  # MARK: Portals 101
  on_entry: $reset_old_area(^newpos)
  data:
    save_point: Save Point
    portal_start: Portal Stand
  map:
    save: [24, 5, 25, 6]
  datamap:
    map_spot:
      save: Menu > Breach Map > MEB Drone
  spots:
    - name: Save Point
      coord: [24.525, 5.6]
      data:
        flipside: Ebih > Drone Room > Portal
      local:
        - to: East 6
          jumps: 1
      exits:
        - to: West Lower Ledge
          req: Slingshot_Hook
          movement: base
          jumps: 2
      actions:
        - name: Save
          do: $save
          tags: [save]
    - name: East 6
      coord: [24.9, 5.6]
      local:
        - to: Save Point
          jumps: 1
      exits:
        - to: Drone Tutorial > West 6
          tags: [xdoor]

    - name: West Lower Ledge
      coord: [24.2, 5.4]
      data:
        flipside: Ebih > Drone Room > Pit Left
      local:
        - to: Save Point
      exits:
        - to: West Nook
          req: Slingshot_Hook
          movement: base
          jumps: 2
    - name: West Nook
      coord: [24.1, 5.0]
      local:
        - to: Save Point
        - to: West Lower Ledge
      exits:
        - to: Middle Gap West
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 3
        - to: Middle Gap East
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 3

    - name: East 4
      coord: [24.9, 3.75]
      local:
        - to: Portal Stand
      exits:
        - to: Drone Tutorial > West 4
          tags: [xdoor]
        - to: West 4
          req: Drone_Hover
          movement: base
    - name: Portal Stand
      coord: [24.525, 4.4]
      data:
        flipside: Ebih > Drone Room > Portal Exit
      local:
        - to: Middle Gap East
        - to: Middle Gap West
      exits:
        - to: West Slope
          req: Drone_Hover
          movement: base
          jumps: 1
    - name: Middle Gap East
      coord: [24.4, 4.55]
      local:
        - to: Save Point
        - to: Middle Gap West
        - to: Portal Stand
          jumps: 1
    - name: Middle Gap West
      coord: [24.25, 4.55]
      local:
        - to: Middle Gap East
        - to: Save Point
        - to: West Slope
          jumps: 2
    - name: West Slope
      coord: [24.1, 4.2]
      local:
        - to: Middle Gap West
      exits:
        - to: West 4
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 2
    - name: West 4
      coord: [24.1, 3.75]
      local:
        - to: Middle Gap East
        - to: Save Point
      exits:
        - to: Snowy Rocks > East 4
          tags: [xdoor]
        - to: East 4
          req: Drone_Hover

- name: Drone Tutorial  # MARK: Drone Tutorial
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West 6
      coord: [25.1, 5.6]
      local:
        - to: Bottom
      exits:
        - to: Portals 101 > East 6
          tags: [xdoor]
    - name: Bottom
      coord: [25.2, 5.7]
      data:
        flipside: Ebih > Drone Pit > Bush Left
      local:
        - to: West 6
          jumps: 1
      exits:
        - to: First Rocks
          movement: base
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              jumps: 1
    - name: First Rocks
      coord: [25.45, 5.2]
      data:
        flipside: Ebih > Drone Pit > First Rocks
      local:
        - to: West 6
        - to: Bottom
        - to: Second Rocks
          jumps: 3
    - name: Second Rocks
      coord: [25.6, 5.0]
      data:
        flipside: Ebih > Drone Pit > Second Rocks
      local:
        - to: First Rocks
          thru: [25.5, 5.0]
        - to: Above Rocks
          jumps: 3
    - name: Above Rocks
      coord: [25.5, 4.8]
      data:
        flipside: Ebih > Drone Pit > Above Rocks
      local:
        - to: Second Rocks
          thru: [25.6, 4.8]
      exits:
        - to: Upper Mid-way
          movement: base
          jumps: 1.25
          penalties:
            - when: not Slingshot_Hook
              jumps: 0.75
    - name: Upper Mid-way
      coord: [25.4, 4.425]
      data:
        flipside: Ebih > Drone Pit > Upper Mid-way
      local:
        - to: Above Rocks
      exits:
        - to: Top
          movement: base
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              jumps: 2
    - name: Top
      coord: [25.3, 3.75]
      data:
        flipside: Ebih > Drone Pit > Top
      local:
        - to: Upper Mid-way
        - to: West 4
    - name: West 4
      coord: [25.1, 3.75]
      local:
        - to: Top
      exits:
        - to: Portals 101 > East 4
          tags: [xdoor]

- name: Snowy Rocks  # MARK: Snowy Rocks
  on_entry: $reset_old_area(^newpos)
  map:
    flask: [23, 5, 24, 6]
  datamap:
    map_spot:
      flask: Menu > Breach Map > MEB Snowy Rocks Flask
  spots:
    - name: East 4
      coord: [23.9, 3.75]
      local:
        - to: Upper East Ledge
      exits:
        - to: Portals 101 > West 4
          tags: [xdoor]
    - name: Upper East Ledge
      coord: [23.6, 3.75]
      local:
        - to: Large Floating Rock West
        - to: Large Floating Rock East
      exits:
        - to: Column East
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
              jumps: 2
        - to: NW Floating Rock East
          req: Slingshot_Hook
          movement: fast_hover
          jumps: 2
          penalties:
            - when: not Drone_Hover
              movement: base
        - to: North Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 3
    - name: Large Floating Rock East
      coord: [23.625, 4.35]
      local:
        - to: Lower East Ledge
        - to: Cache
          thru: [23.625, 4.6]
      exits:
        - to: Upper East Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 3
        - to: Large Floating Rock West
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
        - to: Column East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 2
        - to: Upper East Ledge
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: Large Floating Rock West
      coord: [23.2, 4.3]
      local:
        - to: Large Floating Rock East
        - to: Waterfall Ledge
        - to: Cache
          thru: [23.15, 5.0]
      exits:
        - to: Column East
          movement: fast_hover
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: Upper East Ledge
          req: Slingshot_Hook
          movement: base
          jumps: 2
    - name: Lower East Ledge
      coord: [23.6, 5.0]
      local:
        - to: Cache
      exits:
        - to: Large Floating Rock East
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 3
        - to: Large Floating Rock East
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: Cache
      coord: [23.25, 5.5]
      local:
        - to: Waterfall Ledge
          jumps: 2
      locations:
        - name: Flask
          canon: Ebih_Breach_Snowy_Rocks_Flask
          item: Flask
          tags: [flask]
        - name: Flask Collection Skip
          canon: Ebih_Breach_Snowy_Rocks_Flask
          item: Flask
          to: Menu > Warp Only > Breach
          tags: [cskip]
        - name: Flask Fast Travel
          canon: Ebih_Breach_Snowy_Rocks_Flask
          item: Flask
          req: Fast_Travel
          to: ^map_spot
          tags: [cskip]
      exits:
        - to: Lower East Ledge
          req: Slingshot_Hook
          movement: fast_hover
          jumps: 2
        - to: Column East
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: Waterfall Ledge
      coord: [23.05, 5.1]
      local:
        - to: Cache
        - to: Large Floating Rock West
          thru: [22.9, 4.3]
          jumps: [4, 2]
      exits:
        - to: Column East
          movement: base
          jumps: 3
          penalties:
            - when: not Slingshot_Hook
              jumps: 3
        - to: Large Floating Rock West
          req: Slingshot_Hook
          movement: base
          jumps: 3

    - name: North
      coord: [22.5, 3.2]
      local:
        - to: North Ledge
        - to: South
        - to: Column West
        - to: Column East
          thru: [22.65, 3.7]
        - to: NW Floating Rock East
      exits:
        - to: Peak > South
          tags: [ydoor]
    - name: North Ledge
      coord: [22.5, 3.35]
      local:
        - to: North
          jumps: 1
        - to: Column West
        - to: NW Floating Rock East
        - to: South
    - name: NW Floating Rock East
      coord: [22.8, 3.55]
      local:
        - to: Column East
        - to: Upper East Ledge
          jumps: 2
        - to: Large Floating Rock West
      exits:
        - to: East 4
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
        - to: North Ledge
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: Column East
      coord: [22.85, 3.95]
      local:
        - to: Column West
        - to: Large Floating Rock West
        - to: Cache
      exits:
        - to: Upper East Ledge
          req: Drone_Hover
          movement: base
          jumps: 2
        - to: NW Floating Rock East
          req: Slingshot_Hook
          movement: base
          jumps: 1
        - to: NW Floating Rock East
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: Column West
      coord: [22.7, 3.95]
      local:
        - to: Column East
        - to: South
      exits:
        - to: North Ledge
          movement: base
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              jumps: 1
    - name: West
      coord: [22.1, 5.65]
      local:
        - to: South
      exits:
        - to: Vertical Room > East 6
          tags: [xdoor]
    - name: South
      coord: [22.55, 5.8]
      local:
        - to: West
          jumps: 1
      exits:
        - to: Column West
          movement: base
          jumps: 5
          penalties:
            - when: not Slingshot_Hook
              jumps: 4
        - to: Column West
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
        - to: North Ledge
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1

- name: In 'n Out  # MARK: In 'n Out
  on_entry: $reset_old_area(^newpos)
  data:
    save_point: Save Point
    portal_start: Portal Stand
  map:
    save: [25, 12, 26, 13]
    matrix: [25, 11, 26, 12]
  datamap:
    map_spot:
      save: Menu > Breach Map > MEB Southeast
      matrix: Menu > Breach Map > MEB In 'n Out Matrix
  spots:
    - name: Save Point
      coord: [25.325, 12.6]
      data:
        flipside: Ebih > Truck Gate > Portal Stand
      local:
        - to: Southwest
        - to: Southwest Plains
      actions:
        - name: Save
          do: $save
          tags: [save]
    - name: Southwest
      coord: [25.5, 12.8]
      local:
        - to: Save Point
          jumps: 1
        - to: Southwest Plains
          jumps: 1
      exits:
        - to: Lake Gate > North
          tags: [ydoor]
    - name: Southwest Plains
      coord: [25.7, 12.75]
      data:
        flipside: Ebih > Truck Gate > Switch
      local:
        - to: Southwest
        - to: Save Point
          jumps: 1
        - to: Mesa West
          jumps: 1
    - name: Mesa West
      coord: [26.1, 12.5]
      local:
        - to: Southwest Plains
        - to: Mesa East
      exits:
        - to: Center Rock West
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 2
        - to: Northwest Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 3
    - name: Mesa East
      coord: [26.25, 12.5]
      local:
        - to: Mesa West
        - to: South Plains
      exits:
        - to: Northwest Ledge
          req: Slingshot_Hook
          movement: base
          jumps: 2
        - to: Center Rock West
          req: Slingshot_Hook
          movement: base
          jumps: 1
        - to: Southwest
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
        - to: Save Point
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
    - name: South Plains
      coord: [26.6, 12.8]
      local:
        - to: Southeast Plains
      exits:
        - to: Mesa West
          movement: base
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              jumps: 1
    - name: Southeast Plains
      coord: [27.15, 12.8]
      data:
        flipside: Ebih > By Garage > Garage Entry
      local:
        - to: South Plains
      exits:
        - to: Southeast Ledge
          movement: base
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              jumps: 2
    - name: Southeast Ledge
      coord: [27.5, 12.4]
      local:
        - to: Southeast Plains
        - to: Platform 1
          jumps: 1
      exits:
        - to: Center Rock East
          req: Slingshot_Hook
          movement: base
          jumps: 2
    - name: Platform 1
      coord: [27.75, 12.2]
      local:
        - to: Platform 2
          jumps: 1
        - to: Southeast Ledge
      exits:
        - to: Center Rock East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
        - to: Portal Stand
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 2
        - to: Gate East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 2
    - name: Platform 2
      coord: [27.65, 12.0]
      local:
        - to: Platform 1
        - to: Southeast Plains
      exits:
        - to: Center Rock East
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
        - to: Portal Stand
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 2
        - to: Gate East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 2
    - name: Center Rock East
      coord: [27.4, 11.9]
      data:
        flipside: Ebih > By Garage > Crawlspace Opening
      local:
        - to: Southeast Ledge
        - to: Southeast Plains
          thru: [27.45, 12.1]
        - to: Center Rock Peak
          jumps: 2
      exits:
        - to: Center Rock East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 2
        - to: Portal Stand
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 3
        - to: Gate East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 3
    - name: Center Rock Peak
      coord: [27.15, 11.55]
      local:
        - to: Center Rock East
        - to: Platform 2
        - to: Center Rock Center
        - to: Portal Stand
    - name: Center Rock Center
      coord: [26.9, 11.95]
      local:
        - to: Center Rock Peak
          jumps: 3
      exits:
        - to: Portal Stand
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: Gate East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
    - name: Portal Stand
      coord: [26.7, 11.8]
      local:
        - to: Center Rock Center
        - to: Center Rock West
      exits:
        - to: Northwest Ledge
          req: Drone_Hover
          movement: base
    - name: Center Rock West
      coord: [26.5, 12.05]
      local:
        - to: Mesa East
        - to: South Plains
      exits:
        - to: Portal Stand
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
              jumps: 1
        - to: Northwest Ledge
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: Gate East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
    - name: Northwest Ledge
      coord: [26.35, 11.95]
      data:
        flipside: Ebih > By Garage > West Bush
      local:
        - to: Center Rock West
        - to: Portal Stand
          jumps: 2
        - to: Mesa East
        - to: South Plains
      exits:
        - to: Gate East
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
              jumps: 1
        - to: Gate West
          req: Slingshot_Hook and Drone_Hover and Ebih_Breach_In_n_Out_Gate
          movement: fast_hover
          jumps: 1
    - name: Gate East
      coord: [25.95, 11.7]
      data:
        flipside: Ebih > Grid 25,10-12 > East 12
      local:
        - to: Northwest Ledge
      locations:
        - name: Item
          item: Power_Matrix
          tags: [standing]
      exits:
        - to: Gate West
          req: Ebih_Breach_In_n_Out_Gate
          movement: base
          jumps: 1
    - name: Gate West
      coord: [25.7, 11.55]
      local:
        - to: Northwest
          jumps: 2
      exits:
        - to: Gate East
          req: Ebih_Breach_In_n_Out_Gate
          movement: base
        - to: Northwest Ledge
          req: Ebih_Breach_In_n_Out_Gate
          movement: base
        - to: Button
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
              jumps: 1
    - name: Button
      coord: [25.45, 11.3]
      local:
        - to: Northwest
          jumps: 1
        - to: Gate West
      locations:
        - name: Hit Button
          item: Ebih_Breach_In_n_Out_Gate
          tags: [button]
    - name: Northwest
      coord: [25.5, 11.2]
      local:
        - to: Button
        - to: Gate West
      exits:
        - to: Corridor > South
          tags: [ydoor]

- name: Corridor  # MARK: Corridor
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West
      coord: [25.1, 10.7]
      local:
        - to: South
      exits:
        - to: Rocky Cages > East
          tags: [xdoor]
    - name: South
      coord: [25.5, 10.8]
      local:
        - to: West
          jumps: 1
        - to: East Tree
          jumps: 3
      exits:
        - to: In 'n Out > Northwest
          tags: [ydoor]
    - name: East Tree
      coord: [26.5, 10.6]
      local:
        - to: South
        - to: Northeast Ledge
          jumps: 2
      exits:
        - to: Northeast
          req: Slingshot_Hook
          movement: base
          jumps: 2
    - name: Northeast Ledge
      coord: [26.55, 10.3]
      local:
        - to: Northeast
          jumps: 1
        - to: East Tree
    - name: Northeast
      coord: [26.5, 10.2]
      local:
        - to: Northeast Ledge
      exits:
        - to: Corner > South
          tags: [ydoor]

- name: Lake Gate  # MARK: Lake Gate
  on_entry: $reset_old_area(^newpos)
  data:
    map_spot: Menu > Breach Map > MEB Lake Gate
  spots:
    - name: North
      coord: [25.5, 13.2]
      local:
        - to: Outside West
        - to: Outside Top
        - to: Outside Corner
      exits:
        - to: In 'n Out > Southwest
          tags: [ydoor]
    - name: Outside West
      coord: [25.325, 13.7]
      data:
        flipside: Ebih > Party Central > Portal Stand
      local:
        - to: North
          jumps: 3
        - to: Outside Top
          jumps: 2
    - name: Outside Top
      coord: [25.5, 13.35]
      data:
        flipside: Ebih > Party Central > Mid-air Between Waterfalls
      local:
        - to: North
          jumps: 1
        - to: Outside West
        - to: Outside Corner
    - name: Outside Corner
      coord: [25.75, 13.35]
      data:
        flipside: Ebih > Party Central > Mid-air East of Waterfall
      local:
        - to: North
          jumps: 1
        - to: Outside Top
        - to: Gate East
    - name: Gate East
      coord: [25.8, 13.75]
      local:
        - to: Outside Corner
          jumps: 2
      exits:
        - to: Button
          req: Ebih_Breach_Lake_Gate
          movement: base
    - name: Button
      coord: [25.6, 13.75]
      data:
        flipside: Ebih > Party Central > Below Waterfall
      local:
        - to: Interior
        - to: South
      locations:
        - name: Hit Button
          canon: Ebih_Breach_Lake_Gate
          item: Ebih_Breach_Lake_Gate
          tags: [button]
      exits:
        - to: Gate East
          req: Ebih_Breach_Lake_Gate
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: Interior
      coord: [25.5, 13.75]
      data:
        flipside: Ebih > Party Central > Below Between Waterfalls
      local:
        - to: South
        - to: Button
      locations:
        - name: Hit Button From Afar
          canon: Ebih_Breach_Lake_Gate
          item: Ebih_Breach_Lake_Gate
          tags: [button]
      exits:
        - to: Gate East
          req: Ebih_Breach_Lake_Gate
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: South
      coord: [25.5, 13.8]
      local:
        - to: Interior
          jumps: 1
        - to: Button
          jumps: 1
      exits:
        - to: Amagi Breach > West Entrance > North
          tags: [ydoor]

- name: Bubble Bobble  # MARK: Bubble Bobble
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East 11
      coord: [27.9, 10.55]
      exits:
        - to: Tree
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              jumps: 3
        - to: Glacier Breach > Spidery Connector > West
          tags: [xdoor]
    - name: Tree
      coord: [27.6, 9.8]
      local:
        - to: East 11
      exits:
        - to: Lower Row Right
          movement: fast_hover
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: West 10
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
              jumps: 1
            - when: not Drone_Hover
              movement: base
    - name: West 10
      coord: [27.1, 9.75]
      local:
        - to: Tree
          jumps: 1
      exits:
        - to: Corner > East
          tags: [xdoor]
    - name: Lower Row Right
      coord: [27.85, 9.45]
      local:
        - to: Tree
        - to: Lower Row Left
          jumps: 2
    - name: Lower Row Left
      coord: [27.4, 9.025]
      local:
        - to: West 10
        - to: Tree
          thru: [27.4, 9.3]
        - to: Lower Row Right
        - to: Upper Ledge
          thru: [[27.35, 8.85], [27.675, 8.45], [27.325, 8.05], [27.675, 7.65], [27.325, 7.25], [27.45, 7.05]]
          jumps: [1, 2, 2, 2, 2, 1, 1]
    - name: Upper Ledge
      coord: [27.35, 6.8]
      local:
        - to: West 7
          jumps: 1
        - to: Lower Row Left
      exits:
        - to: Spider Guards > East Spider
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xdoor, -fast_hover.1]
    - name: West 7
      coord: [27.1, 6.75]
      local:
        - to: Upper Ledge
      exits:
        - to: Spider Guards > East
          tags: [xdoor]

- name: Corner  # MARK: Corner
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East
      coord: [26.9, 9.75]
      local:
        - to: South
      exits:
        - to: Bubble Bobble > West 10
          tags: [xdoor]
    - name: South
      coord: [26.5, 9.8]
      local:
        - to: East
          jumps: 1
      exits:
        - to: Corridor > Northeast
          tags: [ydoor]

- name: Spider Guards  # MARK: Spider Guards
  on_entry: $reset_old_area(^newpos)
  map:
    flask: [25, 6, 26, 7]
    button: [23, 6, 24, 7]
  datamap:
    map_spot:
      flask: Menu > Breach Map > MEB Spider Guards Flask
      button: Menu > Breach Map > MEB Spider Guards Button
  spots:
    - name: East
      coord: [26.9, 6.75]
      local:
        - to: East Spider
      exits:
        - to: Bubble Bobble > West 7
          tags: [xdoor]
    - name: East Spider
      coord: [26.5, 6.75]
      local:
        - to: East
        - to: East Sand Pit East
    - name: East Sand Pit East
      coord: [25.8, 6.75]
      local:
        - to: East Spider
      exits:
        - to: East Sand Pit
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: East Sand Pit Mid-air
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
    - name: East Sand Pit
      coord: [25.525, 6.75]
      local:
        - to: East Sand Pit East
        - to: East Sand Pit Mid-air
          jumps: 1
        - to: East Sand Pit West Platform
          jumps: 2
      locations:
        - name: Flask
          canon: Ebih_Breach_Spider_Guards_Flask
          item: Flask
          tags: [flask]
        - name: Flask Collection Skip
          canon: Ebih_Breach_Spider_Guards_Flask
          item: Flask
          to: Menu > Warp Only > Breach
          tags: [cskip]
        - name: Flask Fast Travel
          canon: Ebih_Breach_Spider_Guards_Flask
          item: Flask
          req: Fast_Travel
          to: ^map_spot
          tags: [cskip]
    - name: East Sand Pit Mid-air
      coord: [25.45, 6.6]
      local:
        - to: East Sand Pit
      exits:
        - to: Center Hover End
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
    - name: East Sand Pit West Platform
      coord: [25.2, 6.5]
      local:
        - to: East Sand Pit
      exits:
        - to: Center Hover End
          req: Drone_Hover and Nanite_Mist
          movement: base
          price: 20  # restart
          jumps: 1
          penalties:
            - add: 0.5
    - name: Center Hover End
      coord: [24.2, 6.35]
      exits:
        - to: Center Re-hover Start
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: Center Re-hover Start
      coord: [24.15, 6.3]
      exits:
        - to: Center Above Door
          req: Drone_Hover
          movement: base
          jumps: 1
        - to: South
          req: Drone_Hover
          movement: base
          penalties:
            - add: 2  # evading or damage-boosting through a spider
    - name: Center Above Door
      coord: [23.55, 6.25]
      local:
        - to: South
      exits:
        - to: Button
          req: Drone_Hover
          movement: base
    - name: South
      coord: [23.5, 6.8]
      local:
        - to: Button
          jumps: 1
      exits:
        - to: Double Gate > North
          tags: [ydoor]
    - name: Button
      coord: [23.025, 6.7]
      local:
        - to: South
      locations:
        - name: Open Gate
          item: Ebih_Breach_Spider_Guards_Gate
          tags: [button]
      exits:
        - to: Northwest
          req: Ebih_Breach_Spider_Guards_Gate
          movement: fast_hover
          jumps: 3
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
    - name: Northwest
      coord: [22.55, 6.2]
      exits:
        - to: Button
          req: Ebih_Breach_Spider_Guards_Gate
          movement: base
        - to: Snowy Rocks > South
          tags: [ydoor]

- name: Double Gate  # MARK: Double Gate
  on_entry: $reset_old_area(^newpos)
  data:
    portal_start: Portal Stand
  spots:
    - name: North
      coord: [23.5, 7.2]
      local:
        - to: Portal Stand
        - to: Grate East
          thru: [23.5, 7.5]
        - to: Upper Right Corner
      exits:
        - to: Spider Guards > South
          tags: [ydoor]
    - name: Portal Stand
      coord: [23.5, 7.75]
      local:
        - to: Grate East
        - to: Button Left
      exits:
        - to: North
          movement: base
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              jumps: 1
        - to: Upper Right Corner
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
              jumps: 1
    - name: Grate East
      coord: [23.325, 7.8]
      local:
        - to: Portal Stand
          jumps: 1
      exits:
        - to: Grate West
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: Grate West
      coord: [23.225, 7.8]
      local:
        - to: West
          jumps: 1
      exits:
        - to: The Vault > Pipe Gap East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          penalty_tags: [xdoor, -fast_hover.2]
        - to: The Vault > Northwest Mid-air
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xdoor, -fast_hover.2]
        - to: Grate East
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: West
      coord: [23.1, 7.75]
      local:
        - to: Grate West
      exits:
        - to: The Vault > East
          tags: [xdoor]

    - name: Upper Right Corner
      coord: [23.8, 7.4]
      local:
        - to: Portal Stand
        - to: Button Right
        - to: North
          jumps: 2
      exits:
        - to: Below Gate
          req: Ebih_Breach_Double_Gate_Gate
          movement: base
    - name: Button Left
      coord: [23.625, 7.9]
      local:
        - to: Portal Stand
          jumps: 1
        - to: Button Right
      locations:
        - name: Open Gate
          canon: Ebih_Breach_Double_Gate_Gate
          item: Ebih_Breach_Double_Gate_Gate
          tags: [button]
    - name: Button Right
      coord: [23.75, 7.9]
      local:
        - to: Button Left
      locations:
        - name: Open Gate
          canon: Ebih_Breach_Double_Gate_Gate
          item: Ebih_Breach_Double_Gate_Gate
          tags: [button]
      exits:
        - to: Below Gate
          req: Ebih_Breach_Double_Gate_Gate
          movement: base
    - name: Below Gate
      coord: [23.9, 8.3]
      local:
        - to: South
          thru: [23.7, 8.4]
      exits:
        - to: Button Right
          req: Ebih_Breach_Double_Gate_Gate and Slingshot_Hook
          movement: base
          jumps: 2
    - name: South
      coord: [23.5, 8.8]
      local:
        - to: Below Gate
          thru: [23.7, 8.4]
          jumps: [2, 1]
      exits:
        - to: Below Gate
          req: Slingshot_Hook
          movement: base
          jumps: 2
        - to: Rocky Cages > Northeast
          tags: [ydoor]

- name: The Vault  # MARK: The Vault
  on_entry: $reset_old_area(^newpos)
  map:
    urn: [21, 8, 22, 9]
  datamap:
    map_spot:
      urn: Menu > Breach Map > Slingshot Weapon
  spots:
    - name: East
      coord: [22.9, 7.75]
      data:
        flipside: Ebih > Waterfall > Center Main Path
      local:
        - to: Pipe Gap East
      exits:
        - to: Center Hill
          req: Drone_Hover
          movement: base
          jumps: 1
        - to: Double Gate > West
          tags: [xdoor]
    - name: Pipe Gap East
      coord: [22.6, 7.95]
      local:
        - to: Pipe Gap West
        - to: East
          jumps: 1
        - to: South
          thru: [22.45, 8.4]
    - name: Pipe Gap West
      coord: [22.525, 7.95]
      local:
        - to: Center Hill
          jumps: 1
        - to: Pipe Gap East
        - to: South
          thru: [22.45, 8.4]
    - name: Center Hill
      coord: [22.35, 7.7]
      local:
        - to: West Hill Hook Point  # TODO: The enemy makes this difficult
        - to: Pipe Gap West
    - name: Northwest Mid-air
      coord: [21.8, 7.65]
      local:
        - to: West Hill Hook Point
    - name: West Hill Hook Point
      coord: [21.75, 7.9]
      local:
        - to: Dais East
      exits:
        - to: Pipe Gap West
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
    - name: Dais East
      coord: [21.65, 8.7]
      local:
        - to: Dais Center
      exits:
        - to: West Hill Hook Point
          req: Slingshot_Hook
          movement: base
          jumps: 3
    - name: Dais Center
      coord: [21.45, 8.7]
      data:
        flipside: Ebih > Waterfall > West Mid-air Between Trees
      local:
        - to: Southwest Corner
        - to: Dais East
      locations:
        - name: Urn
          canon: Slingshot_Weapon
          item: Slingshot_Weapon
          tags: [urn]
        - name: Urn Collection Skip
          canon: Slingshot_Weapon
          item: Slingshot_Weapon
          to: Menu > Warp Only > Breach
          tags: [cskip]
        - name: Urn Fast Travel
          canon: Slingshot_Weapon
          item: Slingshot_Weapon
          req: Fast_Travel
          to: ^map_spot
          tags: [cskip]
    - name: Southwest Corner
      coord: [21.2, 8.8]
      data:
        flipside: Ebih > Waterfall > West Grassy Plains
      exits:
        - to: Dais Center
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base

    - name: South
      coord: [22.5, 8.8]
      exits:
        - to: Pipe Gap East
          req: Slingshot_Hook
          movement: base
          jumps: 2
        - to: Pipe Gap West
          req: Slingshot_Hook
          movement: base
          jumps: 2
        - to: Rocky Cages > Cage North
          tags: [ydoor]

- name: Rocky Cages  # MARK: Rocky Cages
  on_entry: $reset_old_area(^newpos)
  map:
    flask: [22, 9, 23, 10]
  datamap:
    map_spot:
      flask: Menu > Breach Map > MEB Rocky Cages Flask
  spots:
    - name: East
      coord: [24.9, 10.7]
      local:
        - to: Hill East
          jumps: 3
      exits:
        - to: Corridor > West
          tags: [xdoor]
    - name: Hill East
      coord: [24.3, 10.25]
      local:
        - to: East
        - to: Middle Floating Rock
          jumps: 4
        - to: Platform 2
          jumps: 3
    - name: Platform 2
      coord: [24.1, 9.75]
      local:
        - to: East
        - to: Hill East
        - to: Lower Cage East
          jumps: 3
      exits:
        - to: Northeast
          req: Drone_Hover
          jumps: 4
        - to: Middle Floating Rock
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
    - name: Northeast
      coord: [23.5, 9.2]
      local:
        - to: Upper Slope
        - to: Middle Floating Rock
        - to: Platform 2
      exits:
        - to: Double Gate > South
          tags: [ydoor]
    - name: Upper Slope
      coord: [23.425, 9.75]
      local:
        - to: Middle Floating Rock
      exits:
        - to: Northeast
          req: Drone_Hover
          movement: base
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              jumps: 2
    - name: Middle Floating Rock
      coord: [23.5, 10.15]
      local:
        - to: Center East
        - to: Platform 2
          jumps: 2
        - to: Hill East
          jumps: 2
        - to: Lower Floating Rock
        - to: Lower Cage East
      exits:
        - to: East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
    - name: Lower Floating Rock
      coord: [23.45, 10.45]
      local:
        - to: Center East
          jumps: 1
      exits:
        - to: Center West
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
        - to: Middle Floating Rock
          req: Slingshot_Hook
          movement: base
          jumps: 1
    - name: Lower Cage East
      coord: [23.35, 10.75]
      data:
        flipside: Ebih > Waterfall > Alcove Right
      local:
        - to: Hill East
          jumps: 6
      exits:
        - to: Center West
          req: Slingshot_Hook
          movement: base
          jumps: 1
        - to: Middle Floating Rock
          req: Slingshot_Hook
          movement: base
          jumps: 2
    - name: Center East
      coord: [23.3, 10.3]
      local:
        - to: Center West
        - to: Lower Cage East
      exits:
        - to: Middle Floating Rock
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: Center West
      coord: [22.5, 10.45]
      local:
        - to: Center East
          jumps: 3
      exits:
        - to: West Ledge
          req: Slingshot_Hook
          movement: base
          jumps: 3
        - to: West Rock
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
              jumps: 1
        - to: West Ledge
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: West Ledge
      coord: [22.1, 9.95]
      local:
        - to: West Rock
        - to: Center West
        - to: West 10
          jumps: 3
    - name: West 10
      coord: [21.1, 9.7]
      local:
        - to: West Ledge
      exits:
        - to: Switchback > East
          tags: [xdoor]
    - name: West Rock
      coord: [22.05, 10.35]
      local:
        - to: Center West
      exits:
        - to: Button
          req: Slingshot_Hook
          movement: fast_hover
          jumps: 2
        - to: Button
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
        - to: West Ledge
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
        - to: Center East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 2
    - name: Button
      coord: [21.55, 10.1]
      local:
        - to: Gate East
      locations:
        - name: Hit Button
          item: Ebih_Breach_Rocky_Cages_Gate
          tags: [button]
      exits:
        - to: West Rock
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook
              movement: base
              jumps: 3
    - name: Gate East
      coord: [21.35, 10.7]
      exits:
        - to: Button
          req: Slingshot_Hook
          movement: base
          jumps: 3
        - to: West 11
          req: Ebih_Breach_Rocky_Cages_Gate
          movement: base
    - name: West 11
      coord: [21.1, 10.75]
      exits:
        - to: Rock Block > East 11
          tags: [xdoor]
        - to: Gate East
          req: Ebih_Breach_Rocky_Cages_Gate
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base

    - name: Cage North
      coord: [22.5, 9.2]
      local:
        - to: Cage Bottom
      exits:
        - to: The Vault > South
          tags: [ydoor]
    - name: Cage Bottom
      coord: [22.425, 9.75]
      data:
        flipside: Ebih > Waterfall > West Waterfall Mid-air Tier 2
      locations:
        - name: Flask
          canon: Ebih_Breach_Rocky_Cages_Flask
          item: Flask
          tags: [flask]
        - name: Flask Collection Skip
          canon: Ebih_Breach_Rocky_Cages_Flask
          item: Flask
          to: Menu > Warp Only > Breach
          tags: [cskip]
        - name: Flask Fast Travel
          canon: Ebih_Breach_Rocky_Cages_Flask
          item: Flask
          req: Fast_Travel
          to: ^map_spot
      exits:
        - to: Cage North
          req: Slingshot_Hook
          jumps: 2


- name: Connector  # MARK: Connector
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West
      coord: [19.1, 8.75]
      exits:
        - to: Giguna Breach > Gate and Wall > East 9
          tags: [xdoor]
        - to: Column
          movement: base
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              jumps: 1
    - name: Column
      coord: [19.3, 8.4]
      data:
        flipside: Ebih > Ebih West > Giguna Pillar
      local:
        - to: West
        - to: East
    - name: East
      coord: [19.9, 8.75]
      exits:
        - to: Column
          req: Slingshot_Hook
          movement: base
          jumps: 2
        - to: Switchback > West
          tags: [xdoor]

- name: Switchback  # MARK: Switchback
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West
      coord: [20.1, 8.75]
      local:
        - to: East Turn
      exits:
        - to: Connector > East
          tags: [xdoor]
    - name: East Turn
      coord: [20.9, 8.9]
      local:
        - to: West Turn
      exits:
        - to: West
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
    - name: West Turn
      coord: [20.25, 9.3]
      local:
        - to: East
          jumps: 1
      exits:
        - to: East Turn
          movement: fast_hover
          jumps: 2
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
              jumps: 1
    - name: East
      coord: [20.9, 9.7]
      exits:
        - to: West Turn
          req: Slingshot_Hook
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Drone_Hover
              movement: base
              jumps: 1
        - to: Rocky Cages > West 10
          tags: [xdoor]

- name: Giguna Corner  # MARK: Giguna Corner
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: South
      coord: [19.5, 9.8]
      exits:
        - to: Giguna Breach > Gate and Wall > Walled Off
          movement: base
          jumps: 1
          penalty_tags: [xdoor, -base.1]
        - to: Rock Block > North
          tags: [ydoor]

- name: Rock Block  # MARK: Rock Block
  on_entry: $reset_old_area(^newpos)
  data:
    save_point: Save Point
  map:
    save: [19, 12, 20, 13]
    flask: [20, 12, 21, 13]
  datamap:
    map_spot:
      save: Menu > Breach Map > MEB Southwest
      flask: Menu > Breach Map > MEB Rock Block Flask
  spots:
    - name: North
      coord: [19.5, 10.2]
      local:
        - to: Northwest Ledge
      exits:
        - to: Giguna Corner > South
          tags: [ydoor]
    - name: Northwest Ledge
      coord: [19.4, 10.35]
      local:
        - to: North
          jumps: 1
        - to: West Shaft West Ledge
    - name: West Shaft West Ledge
      coord: [19.6, 10.8]
      local:
        - to: Rock Top
        - to: West Shaft Upper Hill
      exits:
        - to: West Shaft East Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 1
        - to: Northwest Ledge
          req: Slingshot_Hook
          movement: base
          jumps: 2
    - name: West Shaft East Ledge
      coord: [20.1, 10.75]
      local:
        - to: West Shaft Upper Hill
        - to: East Shaft Top
    - name: West Shaft Midway
      coord: [19.7, 11.55]
      local:
        - to: Rock Top
        - to: West Shaft Upper Hill
          jumps: 2
    - name: West Shaft Upper Hill
      coord: [20.0, 11.1]
      local:
        - to: West Shaft Midway
      exits:
        - to: West Shaft West Ledge
          req: Slingshot_Hook or Drone_Hover
          movement: base
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              jumps: 2
        - to: West Shaft East Ledge
          req: Slingshot_Hook or Drone_Hover
          movement: base
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              jumps: 3
    - name: Rock Top
      coord: [19.625, 12.15]
      locations:
        - name: Mist Down
          canon: Ebih_Breach_Rock_Block_Rock
          item: Ebih_Breach_Rock_Block_Rock
          req: Nanite_Mist
          to: Rock Southwest
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
          tags: [event]
        - name: Spin and Down
          canon: Ebih_Breach_Rock_Block_Rock
          item: Ebih_Breach_Rock_Block_Rock
          req: Slingshot_Hook and (Slingshot_Weapon or Slingshot_Charge)
          to: Rock Southwest
          movement: base
          penalties:
            - add: 2.0  # airtime
            - when: not Slingshot_Weapon
              tags: [charge_time, charge_time]  # May take multiple attempts to clear it all
          tags: [event]
      exits:
        - to: West Shaft Midway
          movement: base
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              jumps: 2
        - to: Rock Southwest
          req: Ebih_Breach_Rock_Block_Rock
          movement: base
        - to: Rock East
          req: Ebih_Breach_Rock_Block_Rock
          movement: base
    - name: Rock Southwest
      coord: [19.6, 12.35]
      local:
        - to: Save Point
        - to: West 13
      locations:
        - name: Mist Up
          canon: Ebih_Breach_Rock_Block_Rock
          item: Ebih_Breach_Rock_Block_Rock
          req: Nanite_Mist
          to: Rock Top
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
          tags: [event]
      exits:
        - to: Rock East
          req: Ebih_Breach_Rock_Block_Rock
          movement: base
        - to: Rock Top
          req: Slingshot_Hook and Ebih_Breach_Rock_Block_Rock
          movement: base
          jumps: 1
    - name: Rock East
      coord: [19.75, 12.35]
      local:
        - to: Bottom Middle
        - to: East Tunnel
      locations:
        - name: Mist Up
          canon: Ebih_Breach_Rock_Block_Rock
          item: Ebih_Breach_Rock_Block_Rock
          req: Nanite_Mist
          to: Rock Top
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
          tags: [event]
        - name: Spin and Break All
          canon: Ebih_Breach_Rock_Block_Rock
          item: Ebih_Breach_Rock_Block_Rock
          req: Slingshot_Hook and (Slingshot_Weapon or Slingshot_Charge)
          to: Rock Southwest
          movement: base
          penalties:
            - add: 0.5  # airtime
            - when: not Slingshot_Weapon
              tags: [charge_time]
      exits:
        - to: Rock Southwest
          req: Ebih_Breach_Rock_Block_Rock
          movement: base
        - to: Save Point
          req: Slingshot_Hook and Ebih_Breach_Rock_Block_Rock
          movement: fast_hover
        - to: West 13
          req: Slingshot_Hook and Drone_Hover and Ebih_Breach_Rock_Block_Rock
          movement: fast_hover
        - to: Rock Top
          req: Ebih_Breach_Rock_Block_Rock
          movement: base
          jumps: 1

    - name: Bottom Middle
      coord: [20.0, 12.75]
      local:
        - to: Save Point
          jumps: 1
        - to: East Tunnel
          jumps: 1
      exits:
        - to: Rock East
          movement: base
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              jumps: 1
    - name: Save Point
      coord: [19.5, 12.6]
      local:
        - to: West 13
        - to: Bottom Middle
        - to: Rock Southwest
          jumps: 1
      exits:
        - to: East Tunnel
          req: Slingshot_Hook and Drone_Hover and Ebih_Breach_Rock_Block_Rock
          movement: fast_hover
          jumps: 1
      actions:
        - name: Save
          do: $save
          tags: [save]
    - name: West 13
      coord: [19.1, 12.7]
      local:
        - to: Save Point
          jumps: 1
      exits:
        - to: Giguna Breach > Fork > East 13
          tags: [xdoor]

    - name: East Tunnel
      coord: [20.5, 12.55]
      local:
        - to: Bottom Middle
        - to: Rock East
          jumps: 2
        - to: East Shaft Bottom
          jumps: 0.5
      locations:
        - name: Flask
          canon: Ebih_Breach_Rock_Block_Flask
          item: Flask
          tags: [flask]
        - name: Flask Collection Skip
          canon: Ebih_Breach_Rock_Block_Flask
          item: Flask
          to: Menu > Warp Only > Breach
          tags: [cskip]
        - name: Flask Fast Travel
          canon: Ebih_Breach_Rock_Block_Flask
          item: Flask
          req: Fast_Travel
          to: ^map_spot
          tags: [cskip]
    - name: East Shaft Bottom
      coord: [20.65, 12.5]
      local:
        - to: East Tunnel
      exits:
        - to: East Shaft Top
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: East Shaft Top
      coord: [20.65, 10.8]
      local:
        - to: West Shaft East Ledge
          jumps: 1
        - to: East Shaft Bottom
        - to: East 11
          jumps: 1
    - name: East 11
      coord: [20.9, 10.75]
      local:
        - to: East Shaft Top
      exits:
        - to: Rocky Cages > West 11
          tags: [xdoor]

- name: Peak  # MARK: Peak
  on_entry: $reset_old_area(^newpos)
  data:
    save_point: Save Point
  map:
    save: [24, 2, 25, 3]
  datamap:
    map_spot:
      save: Menu > Breach Map > MEB Peak
  spots:
    - name: Save Point
      coord: [24.525, 2.6]
      data:
        flipside: Ebih > Peak > Portal Stand
      local:
        - to: Column
          jumps: 4
      actions:
        - name: Save
          do: $save
          tags: [save]
    - name: Column
      coord: [24.0, 2.15]
      local:
        - to: Ground Near Column
      exits:
        - to: Save Point
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
    - name: Ground Near Column
      coord: [23.7, 2.55]
      local:
        - to: Ground Near Door
      exits:
        - to: Column
          req: Slingshot_Hook
          movement: base
          jumps: 2
    - name: Ground Near Door
      coord: [22.6, 2.55]
      data:
        flipside: Ebih > Peak > Between West Door and Tree
      local:
        - to: South
      exits:
        - to: West Upper Ledge
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
        - to: West Lower Step
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
              jumps: 1
    - name: South
      coord: [22.5, 2.8]
      local:
        - to: Ground Near Door
          jumps: 1
        - to: West Lower Step
          jumps: 2
      exits:
        - to: Snowy Rocks > North
          tags: [ydoor]
    - name: West Lower Step
      coord: [22.25, 2.35]
      local:
        - to: South
        - to: Ground Near Door
      exits:
        - to: West Upper Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 3
        - to: West Upper Ledge
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: West Upper Ledge
      coord: [22.2, 1.75]
      local:
        - to: West
        - to: West Lower Step
        - to: South
        - to: Ground Near Door
      exits:
        - to: Ground Near Column
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
              jumps: 1
    - name: West
      coord: [22.1, 1.75]
      local:
        - to: West Upper Ledge
      exits:
        - to: Vertical Room > East 2
          tags: [xdoor]

- name: Vertical Room  # MARK: Vertical Room
  on_entry: $reset_old_area(^newpos)
  data:
    portal_start: Portal Stand
  map:
    flask: [21, 1, 22, 2]
    portal: [21, 2, 22, 3]
    bottom: [21, 5, 22, 6]
  datamap:
    map_spot:
      flask: Menu > Breach Map > MEB Vertical Room Flask
      portal: Menu > Breach Map > MEB Vertical Room Portal
      bottom: Menu > Breach Map > MEB Vertical Room Bottom
  spots:
    - name: East 2
      coord: [21.9, 1.75]
      local:
        - to: Portal Stand
      exits:
        - to: Highest Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 2
        - to: Highest Ledge
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
        - to: Upper Passage Ledge
          req: Slingshot_Hook or Drone_Hover
          movement: base
          jumps: 1
        - to: Upper Passage Ledge
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
        - to: Peak > West
          tags: [xdoor]
    - name: Highest Ledge
      coord: [21.6, 1.2]
      local:
        - to: Cache
        - to: East 2
        - to: Portal Stand
        - to: Upper Passage Ledge
    - name: Cache
      coord: [21.175, 1.2]
      local:
        - to: Highest Ledge
      locations:
        - name: Flask
          canon: Ebih_Breach_Vertical_Room_Flask
          item: Big_Flask
          tags: [flask]
        - name: Flask Collection Skip
          canon: Ebih_Breach_Vertical_Room_Flask
          item: Big_Flask
          to: Menu > Warp Only > Breach
          tags: [cskip]
        - name: Flask Fast Travel
          canon: Ebih_Breach_Vertical_Room_Flask
          item: Big_Flask
          req: Fast_Travel
          to: ^map_spot
          tags: [cskip]
    - name: Upper Passage Ledge
      coord: [21.55, 1.7]
      local:
        - to: Passage Exit
        - to: Portal Stand
        - to: Portal Ledge
        - to: East 2
      exits:
        - to: Highest Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 2
        - to: Highest Ledge
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: Passage Exit
      coord: [21.15, 1.7]
      local:
        - to: Upper Passage Ledge
        - to: Passage High
    - name: Passage High
      coord: [21.25, 2.55]
      local:
        - to: Passage Middle
      exits:
        - to: Passage Exit
          req: Slingshot_Hook
          movement: base
          jumps: 3
        - to: Passage Exit
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: Passage Middle
      coord: [21.125, 4.2]
      local:
        - to: Passage Low
      exits:
        - to: Passage High
          req: Slingshot_Hook
          movement: base
          jumps: 7
        - to: Passage High
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: Passage Low
      coord: [21.1, 5.6]
      local:
        - to: Passage Bottom
      exits:
        - to: Passage Middle
          req: Slingshot_Hook
          movement: base
          jumps: 4
        - to: Passage Middle
          req: Nanite_Mist
          movement: mist2
          penalties:
            - add: 0.5  # twisty
            - when: not Mist_Upgrade
              movement: mist1
    - name: Passage Bottom
      coord: [21.475, 5.7]
      data:
        flipside: Ebih > Hidden Portal > Portal Stand
      local:
        - to: Passage Low
          jumps: 1

    - name: Portal Stand
      coord: [21.5, 2.7]
      data:
        flipside: Ebih > Hidden Portal > Save Point
      local:
        - to: Portal Ledge
      exits:
        - to: Upper Passage Ledge
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
        - to: Highest Ledge
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
        - to: East 2
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: Portal Ledge
      coord: [21.3, 2.8]
      local:
        - to: Middle Building Ledge
      exits:
        - to: Portal Stand
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: Middle Building Ledge
      coord: [21.4, 4.4]
      local:
        - to: East 6
      exits:
        - to: Portal Ledge
          movement: base
          jumps: 6
          penalties:
            - when: not Slingshot_Hook
              jumps: 3
        - to: Portal Ledge
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: East 6
      coord: [21.9, 5.65]
      exits:
        - to: Middle Building Ledge
          movement: base
          jumps: 5
          penalties:
            - when: not Slingshot_Hook
              jumps: 3
        - to: Snowy Rocks > West
          tags: [xdoor]
