//! AUTOGENERATED FOR Axiom Verge 2 - MODIFICATIONS WILL BE LOST

use analyzer::access::*;
use analyzer::cli::*;
use clap::Parser;
use libaxiom_verge2::*;
use log4rs;
use std::path::PathBuf;

fn main() -> Result<(), std::io::Error> {
    let args = Cli::parse();
    log4rs::init_file(
        args.logconfig()
            .unwrap_or(&PathBuf::from("settings/log4rs.yml")),
        Default::default(),
    )
    .unwrap();
    let (world, context, routes) = settings::load_settings(args.settings_file());
    if let Err(items) = can_win_just_items(world.as_ref(), &context) {
        panic!(
            "Available items not enough to complete objective {}: missing {:?}",
            world.objective, items
        );
    }
    if let Err(items) = can_win_just_locations(world.as_ref(), &context) {
        panic!(
            "Unable to complete objective {} with only location checks: missing {:?}",
            world.objective, items
        );
    }
    run(world.as_ref(), context, routes, &args)
}
