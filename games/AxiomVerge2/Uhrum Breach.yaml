name: Uhrum Breach
graph_offset: [0, 30]
data:
  realm: breach

areas:
- name: Rock and Gate  # MARK: Rock and Gate
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West
      coord: [19.1, 26.75]
      local:
        - to: Button
      exits:
        - to: Irikar Breach > Uhrum Connector > East
          tags: [xdoor]
    - name: Button
      coord: [19.3, 26.8]
      local:
        - to: West
          jumps: 1
        - to: Gate West
      locations:
        - name: Hit Button
          canon: Uhrum_Breach_Rock_and_Gate_Gate
          item: Uhrum_Breach_Rock_and_Gate_Gate
          tags: [button]
      exits:
        - to: Irikar Breach > Uhrum Connector > Sand Swarm
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          penalty_tags: [xdoor, -fast_hover.2]
    - name: Gate West
      coord: [19.45, 26.8]
      data:
        flipside: Uhrum > West Entrance > South Platform
      local:
        - to: Button
      locations:
        - name: Hit Button
          canon: Uhrum_Breach_Rock_and_Gate_Gate
          item: Uhrum_Breach_Rock_and_Gate_Gate
          tags: [button]
      exits:
        - to: Gate East
          req: Uhrum_Breach_Rock_and_Gate_Gate
          movement: base
        - to: Center Area West
          req: Uhrum_Breach_Rock_and_Gate_Gate and Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
    - name: Gate East
      coord: [19.8, 26.8]
      local:
        - to: Center Area West
          jumps: 2
      exits:
        - to: Button
          req: Uhrum_Breach_Rock_and_Gate_Gate and Slingshot_Hook and Drone_Hover
          movement: fast_hover
    - name: Center Area West
      coord: [20.2, 26.6]
      local:
        - to: Gate East
        - to: South
      locations:
        - name: Charge Through Rock
          canon: Uhrum_Breach_Rock_and_Gate_Rock
          item: Uhrum_Breach_Rock_and_Gate_Rock
          req: $charge
          to: Rock East
          movement: fling
          penalty_tags: [charge_time]
      exits:
        - to: North
          movement: base
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              jumps: 1
        - to: Rock West
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: North
      coord: [20.5, 26.2]
      local:
        - to: Center Area West
        - to: South
        - to: Rock West
      exits:
        - to: Save and Go > South
          tags: [ydoor]
    - name: South
      coord: [20.5, 26.8]
      locations:
        - name: Spin Through Rock
          canon: Uhrum_Breach_Rock_and_Gate_Rock
          item: Uhrum_Breach_Rock_and_Gate_Rock
          req: Slingshot_Hook and (Slingshot_Weapon or Slingshot_Charge)
          to: Rock East
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Weapon
              movement: fling
              tags: [charge_time]
        - name: Spin Through Rock and Hover
          canon: Uhrum_Breach_Rock_and_Gate_Rock
          item: Uhrum_Breach_Rock_and_Gate_Rock
          req: Slingshot_Hook and Slingshot_Weapon and Drone_Hover
          to: East
          movement: fast_hover
          jumps: 1
      exits:
        - to: Center Area West
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
              jumps: 1
        - to: Rock West
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: West Glitch > North
          tags: [ydoor]
    - name: Rock West
      coord: [20.6, 26.6]
      local:
        - to: South
      locations:
        - name: Mist Through Rock
          canon: Uhrum_Breach_Rock_and_Gate_Rock
          item: Uhrum_Breach_Rock_and_Gate_Rock
          req: Nanite_Mist
          to: Rock East
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
      exits:
        - to: North
          req: Slingshot_Hook
          movement: base
          jumps: 2
        - to: North
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
        - to: Center Area West
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
        - to: Rock East
          req: Uhrum_Breach_Rock_and_Gate_Rock
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: Rock East
      coord: [20.8, 26.6]
      local:
        - to: Rock East Ledge
        - to: East
      locations:
        - name: Mist Through Rock
          canon: Uhrum_Breach_Rock_and_Gate_Rock
          item: Uhrum_Breach_Rock_and_Gate_Rock
          req: Nanite_Mist
          to: Rock West
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
      exits:
        - to: Rock West
          req: Uhrum_Breach_Rock_and_Gate_Rock
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: Rock East Ledge
      coord: [20.95, 26.8]
      locations:
        - name: Spin Through Rock
          canon: Uhrum_Breach_Rock_and_Gate_Rock
          item: Uhrum_Breach_Rock_and_Gate_Rock
          req: Slingshot_Hook and (Slingshot_Weapon or Slingshot_Charge)
          to: Rock East
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Weapon
              movement: fling
              tags: [charge_time]
      exits:
        - to: Rock East
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: East Ledge
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
    - name: East Ledge
      coord: [21.65, 26.75]
      local:
        - to: East
          jumps: 1
      exits:
        - to: Rock East Ledge
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
              jumps: 1
        - to: East Glitch > Save Point
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          penalty_tags: [xdoor, -fast_hover.2]
        - to: East Glitch > West Flower
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          penalty_tags: [xdoor, -fast_hover.2]
        - to: East Glitch > Above West Flower
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          penalty_tags: [xdoor, -fast_hover.2]
    - name: East
      coord: [21.9, 26.75]
      local:
        - to: East Ledge
      exits:
        - to: East Glitch > West
          tags: [xdoor]

- name: Save and Go  # MARK: Save and Go
  on_entry: $reset_old_area(^newpos)
  data:
    save_point: Save Point
    portal_start: Portal Stand
  map:
    save: [19, 25, 20, 26]
    portal: [20, 24, 21, 25]
  datamap:
    map_spot:
      save: Menu > Breach Map > UVB West
      portal: Menu > Breach Map > UVB Save and Go Portal
  spots:
    - name: South
      coord: [20.5, 25.8]
      local:
        - to: Save Point
          jumps: 1
      exits:
        - to: Lower East Ledge
          req: Slingshot_Hook
          movement: base
          jumps: 1
        - to: Rock and Gate > North
          tags: [ydoor]
    - name: Lower East Ledge
      coord: [20.5, 25.5]
      local:
        - to: South
      exits:
        - to: Mild Slope
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: Mild Slope
      coord: [20.3, 25.2]
      data:
        flipside: Uhrum > West Entrance > Upper Wall West
      local:
        - to: Lower East Ledge
        - to: Stone Mouth
          jumps: 3
        - to: Portal Stand
          thru: [20.275, 24.95]
          jumps: [1, 3]
    - name: Portal Stand
      coord: [20.525, 24.6]
      data:
        flipside: Uhrum > West Entrance > Portal Exit
      local:
        - to: Stone Mouth
        - to: Lower East Ledge
          thru: [20.375, 25.0]
    - name: Stone Mouth
      coord: [19.95, 24.8]
      data:
        flipside: Uhrum > West Entrance > Inner Dais
      local:
        - to: Portal Stand
          jumps: 3
        - to: Mild Slope
    - name: Save Point
      coord: [19.525, 25.5]
      data:
        flipside: Uhrum > West Entrance > Portal Stand
      local:
        - to: South
      exits:
        - to: West Stone Ledge
          req: Slingshot_Hook
          movement: base
          jumps: 1
        - to: West Rock Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 4
    - name: West Stone Ledge
      coord: [19.6, 25.1]
      data:
        flipside: Uhrum > West Entrance > Gate West Ledge
      local:
        - to: Save Point
      exits:
        - to: West Rock Ledge
          req: Drone_Hover
          movement: base
          jumps: 1
        - to: West Platform
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 2
    - name: West Stone Wall
      coord: [19.75, 24.9]
      data:
        flipside: Uhrum > West Entrance > Gate West
      local:
        - to: West Stone Ledge
      exits:
        - to: West Platform
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 2
        - to: North
          req: Slingshot_Hook
          movement: base
          jumps: 3
    - name: West Rock Ledge
      coord: [19.2, 24.9]
      data:
        flipside: Uhrum > West Entrance > Top West Ledge
      local:
        - to: Save Point
      exits:
        - to: West Platform
          req: Slingshot_Hook
          movement: base
          jumps: 2
    - name: West Platform
      coord: [19.3, 24.6]
      local:
        - to: Save Point
      exits:
        - to: North
          req: Slingshot_Hook
          movement: base
          jumps: 2
    - name: North
      coord: [19.5, 24.2]
      local:
        - to: Save Point
      exits:
        - to: Giguna Breach > South > South
          tags: [ydoor]

- name: West Glitch  # MARK: West Glitch
  on_entry: $reset_old_area(^newpos)
  map:
    glitch: [21, 27, 22, 28]
  datamap:
    map_spot:
      glitch: Menu > Breach Map > UVB West Glitches
  spots:
    - name: North
      coord: [20.5, 27.2]
      local:
        - to: Pillar West
      exits:
        - to: Rock and Gate > South
          tags: [ydoor]
    - name: Pillar West
      coord: [20.55, 27.3]
      data:
        flipside: Uhrum > West Entrance > Lower Path Tree Ledge
      local:
        - to: North
          jumps: 1
        - to: Pillar East
    - name: Pillar East
      coord: [20.8, 27.35]
      local:
        - to: Pillar West
          jumps: 1
        - to: Middle
      exits:
        - to: Narrow Glitch
          req: Drone_Hover
          movement: base
    - name: Middle
      coord: [21.0, 27.65]
      exits:
        - to: Pillar East
          req: Slingshot_Hook
          movement: base
          jumps: 1
        - to: Narrow Glitch
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
    - name: Narrow Glitch
      coord: [21.45, 27.55]
      data:
        flipside: Uhrum > Glitchy Corridor > West Glitch West
      local:
        - to: Middle
      locations:
        - name: Break Through Glitch
          canon: Uhrum_West_Glitch
          item: Uhrum_West_Glitch
          to: Past Glitch
          movement: base
      exits:
        - to: Pillar East
          req: Drone_Hover
          movement: base
          jumps: 1
        - to: Past Glitch
          req: Uhrum_West_Glitch
          movement: base
    - name: Past Glitch
      coord: [21.8, 27.75]
      data:
        flipside: Uhrum > Glitchy Corridor > Behind West Glitch
      locations:
        - name: Break Through Glitch
          canon: Uhrum_West_Glitch
          item: Uhrum_West_Glitch
          to: Narrow Glitch
          movement: base
          jumps: 2
      exits:
        - to: Narrow Glitch
          req: Uhrum_West_Glitch
          movement: base
          jumps: 2

- name: East Glitch  # MARK: East Glitch
  on_entry: $reset_old_area(^newpos)
  data:
    save_point: Save Point
  map:
    save: [22, 27, 23, 28]
    glitch: [24, 27, 25, 28]
    health: [24, 26, 25, 27]
  datamap:
    map_spot:
      save: Menu > Breach Map > UVB Center
      glitch: Menu > Breach Map > UVB East Glitches
      health: Menu > Breach Map > UVB East Glitch Health
  spots:
    - name: West
      coord: [22.1, 26.75]
      local:
        - to: Save Point
      exits:
        - to: Rock and Gate > East
          tags: [xdoor]
    - name: Save Point
      coord: [22.475, 27.2]
      data:
        flipside: Uhrum > Glitchy Corridor > Portal Stand
      local:
        - to: West Flower
      exits:
        - to: West
          req: Slingshot_Hook or Drone_Hover
          movement: base
          jumps: 2
      actions:
        - name: Save
          do: $save
          tags: [save]
    - name: West Flower
      coord: [22.8, 27.3]
      local:
        - to: Save Point
          jumps: 1
        - to: Middle Lower
      exits:
        - to: Middle Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
    - name: Above West Flower
      coord: [23.1, 26.9]
      data:
        flipside: Uhrum > Glitchy Corridor > Center Platform West
      exits:
        - to: East Flower West
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
        - to: Wall West Platform
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
    - name: Middle Platform East
      coord: [23.6, 26.9]
      data:
        flipside: Uhrum > Glitchy Corridor > Center Platform East
      exits:
        - to: West
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
        - to: Save Point
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
    - name: Middle Ledge
      coord: [23.6, 27.2]
      exits:
        - to: East Flower West
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
        - to: Wall West Platform
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 2
    - name: Middle Lower
      coord: [23.6, 27.4]
      data:
        flipside: Uhrum > Glitchy Corridor > Middle Lower
      local:
        - to: Save Point
          jumps: 2
        - to: East Flower West
          thru: [23.75, 27.1]
          jumps: [2, 1]
        - to: Glitch West
          thru: [23.75, 27.1]
          jumps: [2, 0]
    - name: East Flower West
      coord: [24.1, 27.1]
      local:
        - to: Middle Lower
          thru: [23.75, 27.1]
          jumps: [2, 0]
        - to: East Flower East
      exits:
        - to: Middle Platform East
          req: Drone_Hover
          movement: base
          jumps: 1
        - to: Wall West Platform
          req: Slingshot_Hook
          movement: base
          jumps: 2
    - name: East Flower East
      coord: [24.3, 27.1]
      local:
        - to: East Flower West
        - to: Glitch West
      exits:
        - to: Wall West Platform
          req: Slingshot_Hook
          movement: base
          jumps: 2
        - to: Middle Platform East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
    - name: Glitch West
      coord: [24.4, 27.4]
      data:
        flipside: Uhrum > Glitchy Corridor > East Glitch West
      locations:
        - name: Break Through Glitch
          canon: Uhrum_East_Glitch
          item: Uhrum_East_Glitch
          to: Glitch East
          movement: base
          tags: [event]
      exits:
        - to: Glitch East
          req: Uhrum_East_Glitch
          movement: base
        - to: East Flower East
          movement: base
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              jumps: 1  # if you don't clear all the glitch
    - name: Glitch East
      coord: [24.7, 27.7]
      data:
        flipside: Uhrum > Glitchy Corridor > East Glitch East
      local:
        - to: East 28
      locations:
        - name: Break Through Glitch
          canon: Uhrum_East_Glitch
          item: Uhrum_East_Glitch
          to: Glitch West
          movement: base
          jumps: 1
          tags: [event]
      exits:
        - to: Glitch West
          req: Uhrum_East_Glitch
          movement: base
          jumps: 1
    - name: East 28
      coord: [24.9, 27.75]
      local:
        - to: Glitch East
          jumps: 1
      exits:
        - to: South Slime > West
          tags: [xdoor]

    - name: Wall West Platform
      coord: [24.3, 26.6]
      data:
        flipside: Uhrum > Glitchy Corridor > Wall West Platform
      local:
        - to: Wall West Air
          jumps: 1
        - to: East Flower East
        - to: East Flower West
        - to: Middle Lower
          thru: [23.75, 27.1]
      exits:
        - to: Middle Platform East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
    - name: Wall West Air
      coord: [24.4, 26.5]
      data:
        flipside: Uhrum > Glitchy Corridor > Wall West
      local:
        - to: Wall West Platform
    - name: Northeast Flower
      coord: [24.675, 26.35]
      local:
        - to: East 27
        - to: East Hookable
        - to: Wall East Platform
          thru: [24.65, 26.35]
      locations:
        - name: Health
          item: Health_Fragment
          tags: [standing]
    - name: Wall East Platform
      coord: [24.675, 26.6]
      data:
        flipside: Uhrum > Glitchy Corridor > Wall East Platform
      local:
        - to: East Hookable
        - to: East 27
      exits:
        - to: Northeast Flower
          req: Slingshot_Hook or Drone_Hover
          movement: base
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              jumps: 1
    - name: East Hookable
      coord: [24.775, 26.8]
      data:
        flipside: Uhrum > Glitchy Corridor > East Hookable
      local:
        - to: East 27
          jumps: 1
        - to: Wall East Platform
          jumps: 1
      exits:
        - to: Northeast Flower
          req: Slingshot_Hook
          movement: base
          jumps: 2
        - to: North Slime > East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xdoor, -fast_hover.2]
    - name: East 27
      coord: [24.9, 26.75]
      local:
        - to: Wall East Platform
          jumps: 1
        - to: East Hookable
      exits:
        - to: Northeast Flower
          req: Slingshot_Hook
          movement: base
          jumps: 1
        - to: North Slime > West
          tags: [xdoor]

- name: North Slime  # MARK: North Slime
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West
      coord: [25.1, 26.75]
      local:
        - to: Center
      exits:
        - to: East Glitch > East 27
          tags: [xdoor]
    - name: Center
      coord: [25.5, 26.75]
      data:
        flipside: Uhrum > Save Room > Save Point
      local:
        - to: West
        - to: East
    - name: East
      coord: [25.9, 26.75]
      local:
        - to: Center
      exits:
        - to: West Copse > West 27
          tags: [xdoor]

- name: South Slime  # MARK: South Slime
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West
      coord: [25.1, 27.75]
      local:
        - to: Center
      exits:
        - to: East Glitch > East 28
          tags: [xdoor]
    - name: Center
      coord: [25.5, 27.9]
      data:
        flipside: Uhrum > Spring > Center
      local:
        - to: West
          jumps: 1
        - to: East
          jumps: 1
      exits:
        - to: East Glitch > Glitch East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xdoor, -fast_hover.2]
    - name: East
      coord: [25.9, 27.75]
      local:
        - to: Center
      exits:
        - to: West Copse > West 28
          movement: base
          penalty_tags: [xdoor, -base.2]

- name: Blob  # MARK: Blob
  on_entry: $reset_old_area(^newpos)
  data:
    map_spot: Menu > Breach Map > UVB Blob
  spots:
    - name: West Side
      coord: [22.3, 20.8]
      data:
        flipside: Uhrum > Seclusion > Portal West
      exits:
        - to: Giguna Breach > Secret Tunnel > East
          movement: base
          penalty_tags: [xdoor, -base.2]
        - to: Plinth
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: Plinth
      coord: [22.525, 20.7]
      data:
        flipside: Uhrum > Seclusion > Portal Stand
      local:
        - to: West Side
        - to: East Side
    - name: East Side
      coord: [22.7, 20.8]
      data:
        flipside: Uhrum > Seclusion > Portal East
      exits:
        - to: Plinth
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: Giguna Breach > Secret Tunnel > Narrow Point
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xdoor, -fast_hover.2]
        - to: Giguna Breach > Secret Tunnel > Button Obverse
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          penalty_tags: [xdoor, -fast_hover.2]

- name: West Copse  # MARK: West Copse
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West 27
      coord: [26.1, 26.75]
      local:
        - to: West Slope
      exits:
        - to: North Slime > East
          tags: [xdoor]
        - to: Center West
          req: Drone_Hover
          movement: base
    - name: West Slope
      coord: [26.35, 26.9]
      local:
        - to: West 27
          jumps: 1
        - to: Lower West Ledge
      exits:
        - to: Center West
          req: Slingshot_Hook
          movement: base
          jumps: 1
    - name: Lower West Ledge
      coord: [26.65, 27.4]
      data:
        flipside: Uhrum > Waterfalls > West Water Ledge
      local:
        - to: West Slope
          jumps: 3
        - to: Small Flower
        - to: Bottom West
      exits:
        - to: Center West
          req: Slingshot_Hook
          movement: base
          jumps: 3
    - name: Small Flower
      coord: [26.8, 27.55]
      local:
        - to: Lower West Ledge
          jumps: 1
        - to: Bottom West
      exits:
        - to: Center Pillar
          movement: base
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              jumps: 1
    - name: Bottom West
      coord: [26.65, 27.8]
      local:
        - to: West 28
          jumps: 1
        - to: Small Flower
          jumps: 1
      exits:
        - to: Lower West Ledge
          req: Slingshot_Hook
          movement: base
          jumps: 2
    - name: West 28
      coord: [26.15, 27.75]  # Shifted over to match a flipside
      data:
        flipside: Uhrum > Waterfalls > West Water Nook
      local:
        - to: Bottom West
      exits:
        - to: South Slime > East
          movement: base
          penalty_tags: [xdoor, -base.2]

    - name: Center West
      coord: [26.7, 26.9]
      data:
        flipside: Uhrum > Waterfalls > Center Island West
      local:
        - to: Lower West Ledge
        - to: West Slope
          jumps: 2
        - to: Center East
      exits:
        - to: West 27
          req: Drone_Hover
          movement: base
          jumps: 1
        - to: East Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
    - name: Center East
      coord: [27.0, 26.9]
      data:
        flipside: Uhrum > Waterfalls > Center Island East
      local:
        - to: Center West
        - to: Center Pillar
        - to: Small Flower
          thru: [27.0, 27.2]
      exits:
        - to: West 27
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
    - name: Center Pillar
      coord: [27.1, 27.15]
      data:
        flipside: Uhrum > Waterfalls > Water Pillar
      local:
        - to: Small Flower
      exits:
        - to: Center East
          req: Slingshot_Hook or Drone_Hover
          movement: base
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              jumps: 1
        - to: East Ledge
          req: Slingshot_Hook or Drone_Hover
          movement: base
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              jumps: 1
    - name: East Ledge
      coord: [27.45, 26.9]
      data:
        flipside: Uhrum > Waterfalls > East Water's Edge
      local:
        - to: Center Pillar
        - to: East
          jumps: 1
      exits:
        - to: East Copse > Center West
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xdoor, -fast_hover.2]
        - to: East Copse > Lower West Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xdoor, -fast_hover.2]
    - name: East
      coord: [27.9, 26.75]
      local:
        - to: East Ledge
      exits:
        - to: East Copse > West
          tags: [xdoor]

- name: East Copse  # MARK: East Copse
  on_entry: $reset_old_area(^newpos)
  map:
    flask: [28, 26, 29, 27]
  datamap:
    map_spot:
      flask: Menu > Breach Map > UVB East Copse Flask
  spots:
    - name: West
      coord: [28.1, 26.75]
      local:
        - to: Lower West Ledge
      exits:
        - to: West Copse > East
          tags: [xdoor]
        - to: Center West
          req: Drone_Hover
          movement: base
    - name: Lower West Ledge
      coord: [28.45, 27.2]
      data:
        flipside: Uhrum > East Lake > West Underwater Ledge
      exits:
        - to: West
          req: Slingshot_Hook
          movement: base
          jumps: 2
        - to: Center West
          req: Slingshot_Hook and (Slingshot_Weapon or Drone_Hover)
          movement: base
          jumps: 2
          penalties:
            - when: not Slingshot_Weapon  # Avoid the spiders
              add: 0.5
    - name: Center West
      coord: [28.6, 26.8]
      local:
        - to: Lower West Ledge
      exits:
        - to: West
          req: Drone_Hover
          movement: base
          jumps: 1
        - to: Center East
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
              jumps: 1
        - to: Platform East
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
    - name: Center East
      coord: [29.0, 26.7]
      data:
        flipside: Uhrum > East Lake > East Block
      local:
        - to: Center West
        - to: Platform East
      exits:
        - to: Hidden Passage
          req: Slingshot_Hook
          movement: base
          jumps: 2
        - to: Hidden Passage
          req: Nanite_Mist
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
    - name: Hidden Passage
      coord: [29.0, 26.25]
      local:
        - to: Hidden Cache
        - to: Center East
        - to: Center West
        - to: Platform East
    - name: Hidden Cache
      coord: [28.8, 26.25]
      local:
        - to: Hidden Passage
      locations:
        - name: Flask
          canon: Uhrum_Breach_East_Copse_Flask
          item: Flask
          tags: [flask]
        - name: Flask Collection Skip
          canon: Uhrum_Breach_East_Copse_Flask
          item: Flask
          to: Menu > Warp Only > Breach
          tags: [cskip]
        - name: Flask Fast Travel
          canon: Uhrum_Breach_East_Copse_Flask
          item: Flask
          req: Fast_Travel
          to: ^map_spot
          tags: [cskip]
    - name: Platform West
      coord: [29.25, 26.9]
      data:
        flipside: Uhrum > East Lake > Island West
      local:
        - to: Platform East
      exits:
        - to: Center East
          req: Slingshot_Hook
          movement: base
          jumps: 1
        - to: Center West
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
    - name: Platform East
      coord: [29.55, 26.9]
      data:
        flipside: Uhrum > East Lake > Island East
      local:
        - to: East
          jumps: 3
        - to: Platform West
      exits:
        - to: Annuna Gate > Building Roof Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          penalty_tags: [xdoor, -fast_hover.1]
        - to: Annuna Gate > Building Corner Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          penalty_tags: [xdoor, -fast_hover.1]
    - name: East
      coord: [29.9, 26.75]
      local:
        - to: Platform East
      exits:
        - to: Annuna Gate > West
          tags: [xdoor]

- name: Annuna Gate  # MARK: Annuna Gate
  on_entry: $reset_old_area(^newpos)
  data:
    save_point: Save Point
  map:
    save: [31, 26, 23, 27]
  datamap:
    map_spot:
      save: Menu > Breach Map > UVB East
  spots:
    - name: West
      coord: [30.1, 26.75]
      local:
        - to: Building Corner Ledge
      exits:
        - to: East Copse > East
          tags: [xdoor]
        - to: Building Roof Ledge
          req: Drone_Hover
          movement: base
    - name: Building Roof Ledge
      coord: [30.55, 26.9]
      local:
        - to: Building Corner Ledge
        - to: West
          jumps: 3
      exits:
        - to: Structure
          req: Uhrum_Breach_Annuna_Gate_Gate
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
        - to: Upper Ledge
          req: Slingshot_Hook
          movement: base
          jumps: 2
    - name: Building Corner Ledge
      coord: [30.5, 27.0]
      local:
        - to: Building Roof Ledge
          jumps: 1
        - to: West
          jumps: 3
      exits:
        - to: Upper Ledge
          req: Slingshot_Hook and Drone_Hover
          movement: base
          jumps: 2
    - name: Upper Ledge
      coord: [30.55, 26.4]
      local:
        - to: North
          jumps: 1
        - to: Building Roof Ledge
        - to: Building Corner Ledge
      exits:
        - to: Structure
          req: Uhrum_Breach_Annuna_Gate_Gate
          movement: base
    - name: North
      coord: [30.5, 26.2]
      local:
        - to: Upper Ledge
      exits:
        - to: Locked Down > South
          tags: [ydoor]

    # East of Gate
    - name: Structure West
      coord: [31.15, 26.8]
      data:
        flipside: Uhrum > Cavern > Wall Left
      local:
        - to: Structure
      exits:
        - to: Save Point
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
        - to: Building Roof Ledge
          req: Uhrum_Breach_Annuna_Gate_Gate
          movement: base
        - to: Upper Ledge
          req: Uhrum_Breach_Annuna_Gate_Gate and Slingshot_Hook
          movement: base
          jumps: 2
        - to: Button
          req: Slingshot_Hook and Slingshot_Weapon
          movement: fast_hover
        - to: Annuna Breach > Smiley > Upper Portal Exit
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 2
    - name: Structure
      coord: [31.2, 26.8]
      local:
        - to: Button
        - to: Structure West
      exits:
        - to: Building Roof Ledge
          req: Uhrum_Breach_Annuna_Gate_Gate
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook or not Drone_Hover
              movement: base
        - to: Upper Ledge
          req: Uhrum_Breach_Annuna_Gate_Gate and Slingshot_Hook
          movement: fast_hover
          jumps: 2
          penalties:
            - when: not Drone_Hover
              movement: base
        - to: Save Point
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook and Drone_Hover
              movement: base
        - to: Annuna Breach > Smiley > Upper Portal Exit
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 2
    - name: Button
      coord: [31.35, 26.95]
      locations:
        - name: Hit Button
          item: Uhrum_Breach_Annuna_Gate_Gate
          tags: [button]
      exits:
        - to: Structure
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: Save Point
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: Annuna Breach > Smiley > Upper Portal Exit
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 2
    - name: Save Point
      coord: [31.5, 26.75]
      data:
        flipside: Uhrum > Cavern > Pedestal
      local:
        - to: Structure
        - to: Button
        - to: East
      actions:
        - name: Save
          do: $save
          tags: [save]
    - name: East
      coord: [31.9, 26.75]
      local:
        - to: Save Point
      exits:
        - to: Structure
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
        - to: Button
          req: Slingshot_Hook
          movement: fast_hover
        - to: Annuna Breach > Smiley > West
          tags: [xdoor]

- name: Locked Down  # MARK: Locked Down
  on_entry: $reset_old_area(^newpos)
  data:
    save_point: Save Point
  map:
    save: [31, 25, 32, 26]
  datamap:
    map_spot:
      save: Menu > Breach Map > UVB Dead-end
  spots:
    - name: South
      coord: [30.5, 25.8]
      local:
        - to: West Path
          jumps: 2
      exits:
        - to: Center Right Pillar
          req: Slingshot_Hook or Drone_Hover
          movement: base
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              jumps: 2
        - to: Annuna Gate > North
          tags: [ydoor]
    - name: Center Right Pillar
      coord: [30.65, 25.5]
      local:
        - to: West Path
        - to: South
        - to: East Enemy
    - name: East Enemy
      coord: [30.85, 25.75]
      data:
        flipside: Uhrum > Annuna Corridor > Between Two Flowers
      exits:
        - to: Center Right Pillar
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
              jumps: 1
        - to: Gate Left
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: Gate Left
      coord: [31.05, 25.55]
      local:
        - to: East Enemy
      exits:
        - to: Item Behind Gate
          req: Uhrum_Breach_Locked_Down_Gate
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: Save Point
          req: Fast_Travel
          tags: [ft_room]
    - name: Item Behind Gate
      coord: [31.25, 25.5]
      data:
        flipside: Uhrum > Annuna Corridor > Wall Remnant
      local:
        - to: Save Point
      locations:
        - name: Flask
          canon: Uhrum_Breach_Locked_Down_Flask
          item: Flask
          tags: [flask]
        - name: Flask Collection Skip
          canon: Uhrum_Breach_Locked_Down_Flask
          item: Flask
          to: Menu > Warp Only > Breach
          tags: [cskip]
        - name: Flask Fast Travel
          canon: Uhrum_Breach_Locked_Down_Flask
          item: Flask
          to: ^map_spot
          tags: [cskip]
      exits:
        - to: East Stone
          req: Drone_Hover
          movement: base
        - to: Gate Left
          req: Uhrum_Breach_Locked_Down_Gate
          movement: base
    - name: Save Point
      coord: [31.475, 25.7]
      exits:
        - to: Item Behind Gate
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: East Stone
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: East Stone
      coord: [31.6, 25.5]
      local:
        - to: Button
        - to: Save Point
      exits:
        - to: Item Behind Gate
          req: Drone_Hover
          movement: base
    - name: Button
      coord: [31.8, 25.75]
      locations:
        - name: Hit Button
          item: Uhrum_Breach_Locked_Down_Gate
          tags: [button]
      exits:
        - to: East Stone
          req: Slingshot_Hook
          movement: base
          jumps: 1
        - to: Save Point
          req: Fast_Travel
          tags: [ft_room]

    - name: West Path
      coord: [30.1, 25.6]
      data:
        flipside: Uhrum > Annuna Corridor > Open Pillar
      local:
        - to: West Stone East
      exits:
        - to: East Enemy
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          jumps: 1
        - to: South
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: West Stone East
      coord: [29.4, 25.6]
      local:
        - to: West Path
          jumps: 2
      exits:
        - to: West
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook
              movement: base
              jumps: 1
        - to: Overgrown Ruins > East Corner
          req: Slingshot_Hook and Drone_Hover
          movement: fast_hover
          penalty_tags: [xdoor, -fast_hover.2]
    - name: West
      coord: [29.1, 25.6]
      data:
        flipside: Uhrum > Annuna Corridor > Block East
      exits:
        - to: West Stone East
          movement: fast_hover
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: Overgrown Ruins > East
          tags: [xdoor]

- name: Overgrown Ruins  # MARK: Overgrown Ruins
  on_entry: $reset_old_area(^newpos)
  data:
    portal_start: Portal Stand
  map:
    portal: [28, 25, 29, 26]
    flask: [26, 25, 27, 26]
  datamap:
    map_spot:
      portal: Menu > Breach Map > UVB Overgrown Ruins Portal
      flask: Menu > Breach Map > UVB Overgrown Ruins Flask
  spots:
    - name: East
      coord: [28.9, 25.6]
      data:
        flipside: Uhrum > Annuna Corridor > Block West
      local:
        - to: East Corner
      exits:
        - to: Locked Down > West
          tags: [xdoor]
    - name: East Corner
      coord: [28.7, 25.9]
      local:
        - to: East
          jumps: 1
      exits:
        - to: Portal Stand
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: Portal Stand
      coord: [28.5, 25.7]
      data:
        flipside: Uhrum > Annuna Corridor > Save Point
      local:
        - to: Branches
          jumps: 2
        - to: East Corner
    - name: Branches
      coord: [28.15, 25.6]
      local:
        - to: Portal Stand
          jumps: 1
        - to: Two Guards
    - name: Two Guards
      coord: [27.65, 25.8]
      data:
        flipside: Uhrum > Waterfalls > Above Block
      exits:
        - to: Wall East
          movement: fast_hover
          jumps: 1
          penalties:
            - when: not Slingshot_Hook
              movement: base
        - to: Branches
          movement: fast_hover
          jumps: 2
          penalties:
            - when: not Slingshot_Hook
              movement: base
    - name: Wall East
      coord: [27.35, 25.6]
      local:
        - to: Two Guards
      locations:
        - name: Break Through Wall
          canon: Uhrum_Breach_Overgrown_Ruins_Wall
          item: Uhrum_Breach_Overgrown_Ruins_Wall
          to: Wall West
          movement: base
          tags: [event]
          penalties:
            - when: not Drone_Melee_Damage_3
              movement: drone_blocks_1
        - name: Mist Through Wall
          canon: Uhrum_Breach_Overgrown_Ruins_Wall
          item: Uhrum_Breach_Overgrown_Ruins_Wall
          req: Nanite_Mist
          to: Wall West
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
          tags: [event]
      exits:
        - to: Wall West
          req: Uhrum_Breach_Overgrown_Ruins_Wall
          movement: base
    - name: Wall West
      coord: [26.8, 25.6]
      local:
        - to: West Floor
      locations:
        - name: Smash Through Wall
          canon: Uhrum_Breach_Overgrown_Ruins_Wall
          item: Uhrum_Breach_Overgrown_Ruins_Wall
          req: Drone_Melee_Damage_3
          to: Wall East
          movement: base
          tags: [event]
        - name: Mist Through Wall
          canon: Uhrum_Breach_Overgrown_Ruins_Wall
          item: Uhrum_Breach_Overgrown_Ruins_Wall
          req: Nanite_Mist
          to: Wall East
          movement: mist2
          penalties:
            - when: not Mist_Upgrade
              movement: mist1
          tags: [event]
      exits:
        - to: Wall East
          req: Uhrum_Breach_Overgrown_Ruins_Wall
          movement: base
        - to: Cache
          req: Drone_Hover
          movement: base
          jumps: 1
    - name: West Floor
      coord: [26.6, 25.8]
      local:
        - to: Wall West
          jumps: 1
      exits:
        - to: Cache
          req: Slingshot_Hook
          movement: fast_hover
          jumps: 1
    - name: Cache
      coord: [26.4, 25.5]
      data:
        flipside: Uhrum > Waterfalls > Sloped Rock
      local:
        - to: West Floor
      locations:
        - name: Flask
          canon: Uhrum_Breach_Overgrown_Ruins_Flask
          item: Flask
          tags: [flask]
        - name: Flask Collection Skip
          canon: Uhrum_Breach_Overgrown_Ruins_Flask
          item: Flask
          to: Menu > Warp Only > Breach
          tags: [cskip]
        - name: Flask Fast Travel
          canon: Uhrum_Breach_Overgrown_Ruins_Flask
          item: Flask
          req: Fast_Travel
          to: ^map_spot
          tags: [cskip]
      exits:
        - to: Wall West
          req: Drone_Hover
          movement: base
