name: EbihTests
all:
  with:
    - Ice_Axe
    - Amashilama
    - Boomerang
    - Ledge_Grab
  context:
    save: Ebih > Base Camp > Save Point
  start: Ebih > Base Camp > Save Point

tests:
  - can_reach: Ebih > Ebih East > Corner

  - can_obtain: Infect

  - context:
      flasks: 1
    can_obtain: Melee_Damage

  - start: Ebih > Ebih East > East Ledge
    can_obtain: Remote_Drone

  - start: Ebih > Drone Room > East 4
    context:
      mode: drone
      indra: Ebih > Drone Room > Tree
    can_reach: Ebih > Grid 25,2-6 > Pit

  - start: Ebih > Drone Room > West 6
    with:
      - Infect
      - Remote_Drone
    can_activate: Ebih > Drone Room > Moving Platform > Throw Drone

  - start: Ebih > Ebih East > Corner
    with:
      - Infect
    can_activate: Ebih > Ebih East > Lower Moving Platform > Activate Lift

  - start: Ebih > Ebih East > West 8
    with:
      - Infect
    can_activate: Ebih > Ebih East > Moving Platform > Activate Ride

  - start: Ebih > Ebih East > West 8
    with:
      - Infect
    eventually_reaches: Ebih > Ebih East > Middle Platform

  - start: Ebih > Ebih East > Middle Platform
    can_reach: Ebih > Ebih East > East Ledge

  - start: Ebih > Drone Room > Portal
    with:
      - Infect
    requires:
      context:
        # The other save point requires actions to get through
        save: Ebih > Ebih West > Upper Save
      to_reach: Ebih > Drone Room > Moving Platform

  - start: Glacier > Vertical Room > Peak
    can_access: Glacier > Vertical Room > Peak > Flask

  - start: Menu > Upgrade Menu > Physiology
    context:
      last: Ebih > Ebih East > West 8
    visited:
      - Glacier > Vertical Room > Peak > Flask
    can_reach: Ebih > Ebih East > Corner

  - start: Glacier > Vertical Room > Peak
    with:
      - Flask
    context:
      flasks: 1
    visited:
      - Glacier > Vertical Room > Peak > Flask
    can_access: Menu > Upgrade Menu > Physiology > Health Upgrade 1

  - start: Ebih > Ebih East > Middle Platform
    with:
      - Infect
      - Remote_Drone
    can_access: Ebih > Grid 25,10-12 > Hidden Bush > Behind Bush

  - start: Ebih > Grid 25,10-12 > East 12
    with:
      - Infect
      - Remote_Drone
    context:
      ebih__grid_25_10_12__ctx__door_open: true
    path:
      - Ebih > Grid 25,10-12 > Bush
      - Ebih > Grid 25,10-12 > Mid-Ledge
      - Ebih > Grid 25,10-12 > Door Left
      - Ebih > Grid 25,10-12 > Door
      - Ebih > Grid 25,10-12 > East 11
      - Ebih > Grid 26,10-11 > West 11
      - Ebih > Grid 26,10-11 > Middle Bottom
      - Ebih > Grid 26,10-11 > Under Ledge
      - Ebih > Grid 26,10-11 > Ledge
      - Ebih > Grid 26,10-11 > Middle Platform
      - Ebih > Grid 26,10-11 > West 10
      - Ebih > Grid 25,10-12 > East 10
      - Ebih > Grid 25,10-12 > Hidden Bush
