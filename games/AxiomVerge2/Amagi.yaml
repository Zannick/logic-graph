name: Lake Amagi
short: Amagi
data:
  water: true

# TODO: Needs to be routed without Underwater_Movement to determine accessibility
areas:
- name: Main Area  # MARK: Main Area
  on_entry: $reset_old_area(^newpos)
  load:
    _combo: false
  map:
    save: [29, 18, 30, 19]
    cave: [27, 14, 28, 15]
    upper_flask: [30, 13, 31, 14]
    lower_flask: [30, 15, 31, 16]
  data:
    save_point: Save Point
  datamap:
    map_spot:
      save: Menu > Kiengir Map > Amagi Main Area
      cave: Menu > Kiengir Map > Amagi Main Area Cave Entrance
      upper_flask: Menu > Kiengir Map > Amagi Main Area Cave Flask
      lower_flask: Menu > Kiengir Map > Amagi Main Area Water Flask
  spots:
    - name: East 15
      coord: [30.95, 14.85]
      local:
        - to: Water's Edge
      data:
        water: false
      exits:
        - to: Glacier > Lake Main Entrance > Lake Access
          tags: [xshift]
    - name: Water's Edge
      coord: [29.8, 14.85]
      local:
        - to: East 15
        - to: Shallow End
      data:
        water: false
    - name: Shallow End
      coord: [29.6, 15.15]
      local:
        - to: Water's Edge
          jumps: 1
          jump_movement: water
        - to: Cliff
      exits:
        - to: Water's Edge
          req: $grab or Underwater_Movement
    - name: Cliff
      coord: [28.45, 15.4]
      local:
        - to: Shallow End
          jumps: 2
        - to: Upper Platform
    - name: Upper Platform
      coord: [28.25, 15.6]
      local:
        - to: Cliff
          jumps: 1
          jump_mvmt: water
        - to: West Shelf
        - to: Platform 2
        - to: East Ledge
          jumps_down: 1
    - name: West Shelf
      coord: [27.9, 15.9]
      local:
        - to: West Side
          jumps: 1
        - to: Platform 2
        - to: Upper Platform
          jumps: 2
    - name: West Side
      coord: [27.5, 15.75]
      local:
        - to: West Shelf
      exits:
        - to: Carving
          req: Underwater_Movement and ($grab or $climb)
          time: 2.4
        - to: Carving
          req: Underwater_Movement and $hook
          time: 2.3
      keep: true
    - name: Platform 2
      coord: [28.05, 16.15]
      local:
        - to: West Shelf
          jumps: 1
          jump_movement: water
        - to: Upper Platform
          jumps: 1
          jump_movement: water
        - to: East Ledge
        - to: Platform 3
          jumps_down: 1
        - to: Catwalk Center
      exits:
        - to: West Shelf
          req: $grab or $climb or $hook
      keep: true
    - name: East Ledge
      coord: [28.25, 16.3]
      local:
        - to: Platform 2
          jumps: 1
        - to: Platform 3
        - to: Catwalk Center
      keep: true

    - name: Carving
      coord: [27.15, 14.6]
      data:
        water: false
      local:
        - to: West 15
        - to: West Side
      actions:
        - name: Key Combo
          req: not ^_combo
          do: ^_combo = true
          tags: [combo]
      exits:
        - to: Secret Outcropping
          req: ^_combo and ($grab or $climb)
          time: 1.75
        - to: Secret Outcropping
          req: ^_combo and $hook
          time: 1.6
    - name: West 15
      coord: [27.05, 14.85]
      data:
        water: false
      local:
        - to: Carving
          jumps: 1
      exits:
        - to: West Lake > East 15
          tags: [xshift]
    - name: Secret Outcropping
      coord: [27.55, 14.15]
      data:
        water: false
      local:
        - to: Carving
        - to: West Shelf
        - to: Upper Platform
        - to: Shallow End
      exits:
        - to: Interior > Cave Behind Waterfall > Bottom
          tags: [interior]

    - name: Platform 3
      coord: [28.0, 16.7]
      local:
        - to: Platform 2
          jumps: 1.5
          jump_movement: water
        - to: East Ledge
          jumps: 1
          jump_movement: water
        - to: Catwalk Center
        - to: West 18
        - to: Flat Ruin
      exits:
        - to: West 18 Hook Point
          req: Underwater_Movement and $hover
          movement: water
        - to: West 18 Hook Point
          req: $hover
          movement: base
      actions:
        - name: Throw Drone West
          do: $deploy_drone
          to: West 18 Hook Point
          req: $can_deploy and Drone_Hover
          movement: fast_hover
        - name: Throw Drone East
          do: $deploy_drone
          to: Grid 31,19 > Center
          req: $can_deploy and Drone_Hover
          movement: fast_hover
          penalty_tags: [xshift, -fast_hover.1]
    - name: Catwalk Center
      coord: [28.3, 17.1]
      local:
        - to: Platform 3
          jumps: 3
        - to: Platform 3
          jumps: 1
          jump_mvmt: water
        - to: Catwalk Broken Part
        - to: Broken Wall
        - to: Wall Stuck Spot
      exits:
        - to: East Ledge
          req: Underwater_Movement and ($grab or $climb)
          movement: water
          jumps: 2
        - to: West 18 Hook Point
          req: Underwater_Movement and $hover
          movement: water
        - to: West 18 Hook Point
          req: $hover
          movement: base
      actions:
        - name: Throw Drone West
          do: $deploy_drone
          to: West 18 Hook Point
          req: $can_deploy and Drone_Hover
          movement: fast_hover
        - name: Throw Drone East
          do: $deploy_drone
          to: Grid 31,19 > Center
          req: $can_deploy and Drone_Hover
          movement: fast_hover
          penalty_tags: [xshift, -fast_hover.1]
      keep: true
    - name: Catwalk Broken Part
      coord: [29.05, 17.1]
      local:
        - to: Catwalk Center
        - to: Save Point
        - to: Catwalk East Edge
    - name: Catwalk East Edge
      coord: [29.5, 17.1]
      local:
        - to: Catwalk Broken Part
        - to: Save Point
        - to: Enemy Side
      exits:
        - to: Broken Catwalk Far Side
          req: Underwater_Movement and $hover
          movement: water
        - to: Southeast Ledge
          req: Underwater_Movement and $hover
          movement: water
        - to: East 19
          req: Underwater_Movement and $hover
          movement: water
    - name: Save Point
      coord: [29.525, 18.6]
      local:
        - to: Broken Wall
          jumps: 4
          jump_movement: water
        - to: Enemy Side
      actions:
        - name: Save
          do: $save
          time: 1.2
    - name: Enemy Side
      coord: [29.8, 18.6]
      local:
        - to: Save Point
        - to: Small Cliff
          jumps: 1
    - name: Small Cliff
      coord: [30.4, 18.55]
      local:
        - to: Enemy Side
        - to: East 19
    - name: East 19
      coord: [30.95, 18.7]
      local:
        - to: Small Cliff
          jumps: 1
      exits:
        - to: Grid 31,19 > West
          tags: [xshift]

    - name: Broken Catwalk Far Side
      coord: [30.15, 17.1]
      local:
        - to: Save Point
        - to: Catwalk Far East
      exits:
        - to: Catwalk East Edge
          req: Underwater_Movement and $hover
          movement: water
    - name: Catwalk Far East
      coord: [30.5, 17.1]
      local:
        - to: East 18
        - to: Broken Catwalk Far Side
      exits:
        - to: Gated Community > Platform 2 West
          req: Underwater_Movement and $hover
          movement: water
          jumps: 2
          penalty_tags: [xshift, -base.1]
        - to: Cache Ledge
          req: Underwater_Movement and $mist2
          movement: mist2
        - to: Cache Ledge
          req: Underwater_Movement and Nanite_Mist
          movement: mist1
    - name: Southeast Ledge
      coord: [30.8, 17.8]
      local:
        - to: Small Cliff
        - to: East 18
        - to: East 19
          thru: [30.75, 18.2]
      exits:
        - to: Cache Ledge
          req: Underwater_Movement and $mist2
          movement: mist2
        - to: Cache Ledge
          req: Underwater_Movement and Nanite_Mist
          movement: mist1
    - name: East 18
      coord: [30.95, 17.8]
      local:
        - to: Southeast Ledge
      exits:
        - to: Gated Community > West 18
          tags: [xshift]
        - to: Cache Ledge
          req: Underwater_Movement and $mist2
          movement: mist2
        - to: Cache Ledge
          req: Underwater_Movement and Nanite_Mist
          movement: mist1

    - name: Northeast Ledge
      coord: [30.8, 16.0]
      local:
        - to: East 16
        - to: Broken Catwalk Far Side
        - to: Catwalk Far East
        - to: East 18
          thru: [30.75, 16.3]
        - to: East 19
          thru: [[30.75, 16.3], [30.75, 18.2]]
        - to: Cache Ledge
          jumps: 1
      exits:
        - to: Cache Ledge
          req: $hook
          movement: base
          jumps: 1
        - to: Cache Ledge
          req: $grab
          movement: base
          jumps: 1
    - name: East 16
      coord: [30.95, 16.0]
      exits:
        - to: Gated Community > West 16
          tags: [xshift]
      exits:
        - to: Cache Ledge
          req: Underwater_Movement and $hook
          movement: water
          jumps: 1
        - to: Cache Ledge
          req: $hook
          movement: base
          jumps: 1
    - name: Cache Ledge
      coord: [30.7, 15.7]
      local:
        - to: Cache Jump
          jumps: 1
        - to: Cache
        - to: East 18
          thru: [30.75, 16.3]
        - to: East 19
          thru: [[30.75, 16.3], [30.75, 18.2]]
        - to: Catwalk Far East
          thru: [30.75, 16.0]
    - name: Cache Jump
      coord: [30.5, 15.55]
      local:
        - to: Cache
        - to: Cache Ledge
      locations:
        - name: Nearby Flask
          canon: Amagi_Main_Area_Water_Flask
          item: Flask
          req: $boomerang
          tags: [nearby_flask]
    - name: Cache
      coord: [30.3, 15.8]
      local:
        - to: Cache Ledge
          jumps: 1
      locations:
        - name: Item
          canon: Amagi_Main_Area_Water_Flask
          item: Flask
          tags: [flask]
      hybrid:
        - name: Item Collection Skip
          canon: Amagi_Main_Area_Water_Flask
          item: Flask
          to: Menu > Warp Only > Kiengir
          req: $melee_cskip
          tags: [cskip]
        - name: Item Fast Travel
          canon: Amagi_Main_Area_Water_Flask
          item: Flask
          to: ^map_spot
          req: Fast_Travel and $melee_cskip
          tags: [cskip]

    - name: Broken Wall
      coord: [28.425, 17.35]
      local:
        - to: Catwalk Center
          jumps: 1
        - to: Wall Stuck Spot
        - to: Save Point
      actions:
        - name: Throw Drone West
          do: $deploy_drone
          to: West 18 Hook Point
          req: $can_deploy and Drone_Hover and Slingshot_Hook
          movement: fast_hover
    - name: Wall Stuck Spot
      coord: [28.4, 17.8]
      local:
        - to: Broken Wall
          jumps: 1
      actions:
        - name: Throw Drone West
          do: $deploy_drone
          to: West 18 Hook Point
          req: $can_deploy and Drone_Hover and Slingshot_Hook
          movement: fast_hover
          jumps: 1
    - name: Half Pillar
      coord: [28, 18.15]
      local:
        - to: Broken Wall
          jumps: 2
        - to: Flat Ruin
        - to: West Mini-Hill
    - name: Flat Ruin
      coord: [27.5, 18.15]
      local:
        - to: West 18
          jumps: 2
          jump_movement: water
        - to: West 19
        - to: Half Pillar
        - to: West Mini-Hill
      exits:
        - to: West 18 Hook Point
          req: Underwater_Movement and $hook
          movement: water
          jumps: 1
    - name: West Mini-Hill
      coord: [27.8, 18.5]
      local:
        - to: West 19
        - to: Flat Ruin
          jumps: 1
        - to: Half Pillar
          jumps: 1
    - name: West 18
      coord: [27.05, 17.35]
      local:
        - to: Flat Ruin
      exits:
        - to: West Lake > East 18
          tags: [xshift]
    - name: West 18 Hook Point
      coord: [27.2, 17.45]
      local:
        - to: West 18
          jumps: 1
        - to: Flat Ruin
      exits:
        - to: West Lake > West Platform
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
          penalty_tags: [xshift, -fast_hover.1]
        - to: West Lake > Some Rock
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
          penalty_tags: [xshift, -fast_hover.1]
        - to: West Lake > Tentacle Gap
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
          penalty_tags: [xshift, -fast_hover.1]
    - name: West 19
      coord: [27.05, 18.7]
      local:
        - to: West Mini-Hill
          jumps: 1
      exits:
        - to: West Lake > East 19
          tags: [xshift]

    - name: Secret Waterfall
      coord: [27.4, 13.35]
      data:
        water: false
      local:
        - to: Way Off To The Side
          jumps: 1
      exits:
        - to: Interior > Cave Behind Waterfall > Top
          tags: [interior]
    - name: Way Off To The Side
      coord: [30.4, 13.3]
      data:
        water: false
      local:
        - to: Secret Waterfall
      locations:
        - name: Item
          item: Flask
          tags: [flask]

- name: Grid 31,19  # MARK: Grid 31,19
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West
      coord: [31.05, 18.7]
      local:
        - to: East
      exits:
        - to: Main Area > East 19
          tags: [xshift]
    - name: Center
      coord: [31.45, 18.75]
      local:
        - to: East
          jumps: 1
        - to: West
          jumps: 1
    - name: East
      coord: [31.95, 18.7]
      local:
        - to: West
      exits:
        - to: Liru Room > West 19
          tags: [xshift]

- name: Liru Room  # MARK: Liru Room
  on_entry: $reset_old_area(^newpos)
  map:
    urn: [33, 20, 34, 21]
  datamap:
    map_spot:
      urn: Menu > Kiengir Map > Water Movement
  spots:
    - name: West 19
      coord: [32.05, 18.7]
      local:
        - to: Hidden Enemies
      exits:
        - to: Grid 31,19 > East
          tags: [xshift]
    - name: Hidden Enemies
      coord: [32.4, 18.7]
      local:
        - to: West 19
        - to: Platform 1 Left
        - to: Platform 1 Right
        - to: West 20
    - name: Platform 1 Left
      coord: [32.4, 19.2]
      local:
        - to: Hidden Enemies
          jumps: 1.2
          jump_movement: water
        - to: West 20
        - to: Platform 1 Right
        - to: Platform 2 Left
          jumps_down: 1
    - name: Platform 1 Right
      coord: [32.65, 19.2]
      local:
        - to: Platform 1 Left
        - to: Platform 2 Left
          jumps_down: 1
        - to: Platform 2 Right
    - name: Platform 2 Left
      coord: [32.4, 19.6]
      local:
        - to: Platform 1 Left
          jumps: 1
          jump_movement: water
        - to: West 20
        - to: Platform 2 Right
        - to: Platform 3 Left
          jumps_down: 1
        - to: Platform 3 Right
          jumps_down: 1
    - name: Platform 2 Right
      coord: [32.8, 19.6]
      local:
        - to: Platform 1 Right
          jumps: 1
          jump_movement: water
        - to: Platform 2 Left
        - to: East Passage
        - to: Platform 3 Right
          jumps_down: 1
        - to: Bottom
          jumps_down: 1
    - name: Platform 3 Left
      coord: [32.4, 20.0]
      local:
        - to: Platform 2 Left
          jumps: 1
          jump_movement: water
        - to: West 20
        - to: Platform 3 Right
    - name: Platform 3 Right
      coord: [32.7, 20.0]
      local:
        - to: Platform 2 Left
          jumps: 1
          jump_movement: water
        - to: Platform 2 Right
          jumps: 1
          jump_movement: water
        - to: East Passage
          jumps: 1
          jump_movement: water
        - to: Platform 3 Left
        - to: Platform 4 Right
        - to: Bottom
    - name: Platform 4 Left
      coord: [32.5, 20.4]
      local:
        - to: Platform 3 Left
          jumps: 1
          jump_movement: water
        - to: Platform 4 Right
      exits:
        - to: West 20
          req: $hook and $hover and Underwater_Movement
    - name: Platform 4 Right
      coord: [32.75, 20.4]
      local:
        - to: Platform 3 Right
          jumps: 1
          jump_movement: water
        - to: Platform 4 Left
        - to: Bottom
      exits:
        - to: East Passage
          req: $hook and Underwater_Movement
    - name: Bottom
      coord: [33, 20.8]
      local:
        - to: Platform 4 Right
          jumps: 1
          jump_movement: water
        - to: Shrine
          jumps: 1
    - name: Shrine
      coord: [33.5, 20.4]
      local:
        - to: Bottom
      locations:
        - name: Item
          item: Underwater_Movement
          tags: [urn]
    - name: West 20
      coord: [32.05, 20.0]
      local:
        - to: Platform 2 Left
          jumps: 2
        - to: Platform 3 Left
        - to: Bottom
      exits:
        - to: Platform 4 Right
          req: $hook
        - to: Platform 4 Left
          req: $hover
        - to: Shrine
          req: $hook and $hover
          time: 3.5

    - name: East Passage
      coord: [33, 19.8]
      local:
        - to: Platform 2 Right
          jumps: 1
        - to: Platform 3 Right
          jumps_down: 1
        - to: Bottom
          jumps_down: 1
        - to: East Platform 1 Left
          jumps: 1
          jump_mvmt: water
      exits:
        - to: East Platform 1 Left
          req: $hook and Underwater_Movement
          movement: water
          jumps: 1

    - name: East Platform 1 Left
      coord: [33.4, 19.35]
      local:
        - to: East Platform 1 Right
        - to: East Passage
      exits:
        - to: Hidden Exit
          req: $hook and Underwater_Movement
          movement: water
          jumps: 1
        - to: Hidden Exit
          req: ($grab or $climb) and Underwater_Movement
          movement: water
          jumps: 2
        - to: East Platform 2 Right
          req: $grab and Underwater_Movement
          movement: water
          jumps: 2
        - to: East Platform 2 Right
          req: $hook and Underwater_Movement
          movement: water
          jumps: 1.5
        - to: East Platform 3 Left
          req: $hook and Underwater_Movement
          movement: water
          jumps: 2
    - name: East Platform 1 Right
      coord: [33.8, 19.35]
      local:
        - to: East Platform 1 Left
      exits:
        - to: Hidden Exit
          req: ($grab or $climb or $hook) and Underwater_Movement
          movement: water
          jumps: 2
        - to: East Platform 2 Right
          req: $hook and Underwater_Movement
          movement: water
          jumps: 1
    - name: East Platform 2 Left
      coord: [33.15, 18.8]
      local:
        - to: East Platform 2 Right
        - to: East Passage
          thru: [33.1, 19.3]
    - name: East Platform 2 Right
      coord: [33.35, 18.8]
      local:
        - to: East Platform 2 Left
        - to: East Platform 1 Left
        - to: East Platform 1 Right
        - to: East Platform 3 Left
          jumps: 1
          jump_mvmt: water
      exits:
        - to: Hidden Exit
          req: $hover
          movement: base
        - to: Hidden Exit
          req: $hover and Underwater_Movement
          movement: water
      
    - name: East Platform 3 Left
      coord: [33.45, 18.5]
      local:
        - to: East Platform 3 Right
        - to: East Platform 2 Right
        - to: East Platform 2 Left
        - to: East Platform 1 Left
      exits:
        - to: Hidden Exit
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
    - name: East Platform 3 Right
      coord: [33.65, 18.5]
      local:
        - to: East Platform 3 Left
        - to: East Platform 1 Right
        - to: East Platform 1 Left
          thru: [33.65, 18.7]
        - to: Hidden Exit
    - name: Hidden Exit
      coord: [33.95, 18.8]
      local:
        - to: East Platform 3 Right
          jumps: 1
          jump_mvmt: water
        - to: East Platform 1 Left
        - to: East Platform 1 Right
      exits:
        - to: Secret Chamber > West
          tags: [xshift]

- name: Secret Chamber  # MARK: Secret Chamber
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West
      coord: [34.05, 18.8]

- name: West Lake  # MARK: West Lake
  on_entry: $reset_old_area(^newpos)
  map:
    urn: [23, 19, 24, 20]
    refills: [23, 16, 24, 17]
    flask: [24, 16, 25, 17]
    mus: [22, 15, 23, 16]
  datamap:
    map_spot:
      urn: Menu > Kiengir Map > Shockwave
      refills: Menu > Kiengir Map > Amagi West Lake Refill Station
      flask: Menu > Kiengir Map > Amagi Dragon Eye Flask
      mus: Menu > Kiengir Map > MUS A M20 Flask
  spots:
    - name: East 15
      coord: [26.95, 14.85]
      data:
        water: false
      local:
        - to: East Shore
      exits:
        - to: Main Area > West 15
          tags: [xshift]
    - name: East Shore
      coord: [26.8, 14.85]
      data:
        water: false
      local:
        - to: East Shore
        - to: East Bank
    - name: East Bank
      coord: [26.45, 15.6]
      local:
        - to: East Shore
          jumps: 3
    - name: Northeast Platform
      coord: [26.1, 16]
      local:
        - to: East Bank
          jumps: 1
          jump_movement: water
        - to: West Cliff
          jumps: 2
          jump_movement: water
        - to: Northwest Platform
        - to: Upper Center Platform
          jumps_down: 1
        - to: Pillar
        - to: East Platform
    - name: Northwest Platform
      coord: [25.8, 16.15]
      local:
        - to: West Cliff
          jumps: 1
          jump_movement: water
        - to: Northeast Platform
          jumps: 1
          jump_movement: water
        - to: Upper Center Platform
        - to: Somewhat Central Platform
        - to: West Platform
      exits:
        - to: West Cliff
          req: $grab
          time: 3
    - name: Upper Center Platform
      coord: [26, 17.1]
      local:
        - to: Northwest Platform
          jumps: 3
          jump_movement: water
        - to: Northeast Platform
          jumps: 3
          jump_movement: water
        - to: East Platform
        - to: Tentacle Gap
    - name: East Platform
      coord: [26.5, 17.1]
      local:
        - to: Upper Center Platform
        - to: East 18
        - to: Northeast Platform
          jumps: 4
          jump_movement: water
    - name: East 18
      coord: [26.95, 17.35]
      local:
        - to: East Platform
          jumps: 1
          jump_movement: water
        - to: Pillar
      exits:
        - to: Main Area > West 18
          tags: [xshift]
    - name: Pillar
      coord: [26.6, 17.9]
      local:
        - to: East 18
          jumps: 1
          jump_movement: water
        - to: Pillar Platform
        - to: Tentacle Gap
        - to: Somewhat Central Platform
    - name: Pillar Platform
      coord: [26.75, 18.3]
      local:
        - to: Pillar
          jumps: 1
          jump_movement: water
        - to: East 19
          jumps_down: 1
    - name: East 19
      coord: [26.95, 18.7]
      local:
        - to: Pillar Platform
          jumps: 1
          jump_movement: water
      # this could probably be done with wall climb... if it mattered
      exits:
        - to: Main Area > West 19
          tags: [xshift]

    - name: Somewhat Central Platform
      coord: [25.35, 17.9]
      local:
        - to: West Platform
          jumps: 1
          jump_movement: water
        - to: Pillar
          jumps: 2
          jump_movement: water
        - to: Some Rock
    - name: West Platform
      coord: [25.05, 17.7]
      local:
        - to: Somewhat Central Platform
        - to: Cavern Front Teeth
          jumps: 1
          jump_movement: water
        - to: Cavern Chin
    - name: Cavern Front Teeth
      coord: [24.7, 17.5]
      local:
        - to: West Platform
        - to: Cavern Back Teeth
          jumps: 1
          jump_movement: water
    - name: Cavern Back Teeth
      coord: [24.1, 17.3]
      local:
        - to: Cavern Front Teeth
        - to: Cavern Jaw
          jumps: 1
          jump_movement: water
    - name: Cavern Jaw
      coord: [23.7, 17.15]
      local:
        - to: Cavern Neck
        - to: Cavern Back Teeth
          jumps: 1
          jump_movement: water
        - to: Cavern Chin
        - to: Cavern Front Pillar
          jumps: 3
          jump_movement: water
        - to: Cavern Refill Station
          jumps: 3
          jump_movement: water
    - name: Cavern Neck
      coord: [23.5, 18.2]
      local:
        - to: Cavern Chin
          jumps: 1
          jump_movement: water
        - to: Cavern Middle Pillar
          jumps: 5
          jump_movement: water
    - name: Cavern Chin
      coord: [24.5, 18.3]
      local:
        - to: Cavern Neck
          jumps: 1
          jump_movement: water
        - to: Somewhat Central Platform
          jumps: 3
          jump_movement: water
        - to: Some Rock
        - to: Stronghold Front Door

    - name: Cavern Refill Station
      coord: [23.6, 16.15]
      local:
        - to: Cavern Jaw
        - to: Cavern Front Pillar
      locations:
        - name: Break Wall
          item: Amagi_Dragon_Eye_Passage
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      hybrid:
        - name: Defeat MUS A M20
          to: Cavern Rear Pillar
          item: Defeat_MUS_A_M20
          req: $shockwave and not Defeat_MUS_A_M20
          # A lie, because it isn't worth adding refill actions here
          # when the time is subsumed by boss movement
          price: 300
          time: 56
          tags: [shockwave, event]
      exits:
        - to: Cavern Tear Duct
          req: Amagi_Dragon_Eye_Passage
          time: 2.8
    - name: Cavern Tear Duct
      coord: [24.4, 16.2]
      local:
        - to: Cavern Eye
      locations:
        - name: Remote Flask
          item: Flask
          canon: Amagi Dragon Eye Flask
          req: $boomerang
          tags: [nearby_flask]
      exits:
        - to: Cavern Refill Station
          req: Amagi_Dragon_Eye_Passage
          time: 2.8
    - name: Cavern Eye
      coord: [24.6, 16.35]
      local:
        - to: Cavern Tear Duct
          jumps: 1
      locations:
        - name: Item
          item: Flask
          canon: Amagi Dragon Eye Flask
          tags: [flask]

    - name: Cavern Front Pillar
      coord: [23.3, 16.2]
      local:
        - to: Cavern Refill Station
          jumps: 1
        - to: Cavern Middle Pillar
        - to: Cavern Jaw
      exits:
        - to: Cavern Rear Pillar
          req: Underwater_Movement and $hover
          movement: water
          jumps: 2
    - name: Cavern Middle Pillar
      coord: [23.05, 16.5]
      local:
        - to: Cavern Lower Trachea
          thru: [22.5, 17.5]
        - to: Cavern Front Pillar
          jumps: 1
          jump_movement: water
      exits:
        - to: Cavern Rear Pillar
          req: Underwater_Movement and $climb
          movement: water
          jumps: 2
    - name: Cavern Rear Pillar
      coord: [22.7, 15.9]
      local:
        - to: Cavern Middle Pillar
        - to: Cavern Lower Trachea
          thru: [22.225, 17.0]
      locations:
        - name: Boss Reward
          item: Flask
          req: Defeat_MUS_A_M20
          tags: [flask]

    - name: Cavern Lower Trachea
      coord: [22.4, 18.2]
      local:
        - to: Cavern Middle Pillar
          thru: [22.5, 17.5]
          jumps: [2, 3]
          jump_movement: water
        - to: Stronghold Top

    - name: Stronghold Top
      coord: [23.25, 19.1]
      local:
        - to: Cavern Lower Trachea
          jumps: 3
          jump_movement: water
        - to: Stronghold Item
      hybrid:
        - name: Remote Urn
          to: Stronghold Item
          item: Shockwave
          canon: Shockwave
          req: $boomerang
          time: 1
          item_tags: [urn]
    - name: Stronghold Item
      coord: [23.4, 19.75]
      local:
        - to: Stronghold Rear Wall
          jumps: 1
      locations:
        - name: Item
          item: Shockwave
          canon: Shockwave
          tags: [urn]
        - name: Break Wall
          item: Amagi_Stronghold_Wall_And_Boulder_1
          canon: Amagi_Stronghold_Wall_1
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Stronghold Middle Column
          req: Amagi_Stronghold_Wall_1
    - name: Stronghold Rear Wall
      coord: [23.1, 19.6]
      local:
        - to: Stronghold Item
      locations:
        - name: Break Left Wall
          item: Amagi_Stronghold_Left_Wall
          canon: Amagi Stronghold Left Wall
          req: $shockwave
          price: 100
          tags: [shockwave, event]
    - name: Stronghold Middle Column
      coord: [23.7, 19.7]
      locations:
        - name: Break Wall
          item: Amagi_Stronghold_Wall_1
          canon: Amagi_Stronghold_Wall_1
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Stronghold Item
          req: Amagi_Stronghold_Wall_1
        - to: Stronghold Ceiling Left
          req: Amagi_Stronghold_Boulder_1 and Underwater_Movement and ($grab or $climb)
    - name: Stronghold Ceiling Left
      coord: [23.9, 19.1]
      local:
        - to: Stronghold Ceiling Right
      locations:
        - name: Knock Down Left Boulder
          item: Amagi_Stronghold_Boulder_1
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Stronghold Middle Column
          req: Amagi_Stronghold_Boulder_1
          time: .8
    - name: Stronghold Ceiling Right
      coord: [24.1, 19.1]
      local:
        - to: Stronghold Ceiling Left
      locations:
        - name: Knock Down Right Boulder
          item: Amagi_Stronghold_Boulder_2
          canon: Amagi Stronghold Boulder 2
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Stronghold Front Room
          req: Amagi_Stronghold_Boulder_2
    - name: Stronghold Front Room
      coord: [24.4, 19.7]
      locations:
        - name: Break Wall
          item: Amagi_Stronghold_Wall_2
          canon: Amagi Stronghold Wall 2
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Stronghold Ceiling Right
          req: Amagi_Stronghold_Boulder_2 and $grab
        - to: Stronghold Front Door
          req: Amagi_Stronghold_Wall_2
    - name: Stronghold Front Door
      coord: [24.7, 19.8]
      local:
        - to: Some Rock
          jumps: 2
          jump_movement: water
        - to: Small Hill
          jumps: 2
      locations:
        - name: Break Wall
          item: Amagi_Stronghold_Boulder_And_Wall_2
          canon: Amagi Stronghold Wall 2
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Stronghold Front Room
          req: Amagi_Stronghold_Wall_2

    - name: Some Rock
      coord: [25, 18.95]
      local:
        - to: Cavern Chin
          jumps: 2
          jump_movement: water
        - to: Somewhat Central Platform
          jumps: 3
          jump_movement: water
        - to: Stronghold Front Door
        - to: Small Hill
        - to: Tentacle Gap
          jumps: 2
          jump_movement: water
    - name: Small Hill
      coord: [25.3, 19.35]
      local:
        - to: Stronghold Front Door
        - to: Some Rock
          jumps: 2
          jump_movement: water
        - to: Tentacle Gap
          jumps: 3
          jump_movement: water
        - to: Left of Enemy
    - name: Tentacle Gap
      coord: [26.25, 18.7]
      local:
        - to: Some Rock
        - to: Pillar
          jumps: 2
          jump_movement: water
        - to: Left of Enemy
        - to: East 20
    - name: Left of Enemy
      coord: [26.1, 19.8]
      local:
        - to: Small Hill
          jumps: 2
          jump_movement: water
        - to: East 20
          jumps: 1
    - name: East 20
      coord: [26.95, 19.75]
      local:
        - to: Left of Enemy
      # TODO: exits

    - name: West Cliff
      coord: [25.6, 15.8]
      local:
        - to: Northeast Platform
        - to: Northwest Platform
        - to: West Bank
          jumps: 2
    - name: West Bank
      coord: [25.05, 15.35]
      local:
        - to: Water Surface
          jumps: 1
          jump_movement: water
        - to: West Cliff
        - to: West Shore
          jumps: 2
          jump_movement: water
      exits:
        - to: West Shore
          req: $grab or $climb
          time: 3
    - name: Water Surface
      coord: [25.05, 15.0]
      data:
        water: false
      local:
        - to: West Bank
        - to: West Cliff
    - name: West Shore
      coord: [24.55, 14.85]
      data:
        water: false
      local:
        - to: West Bank
        - to: Water Surface
        - to: Surface Wall Right
          jumps: 2
    - name: Surface Wall Right
      coord: [23.05, 14.65]
      data:
        water: false
      local:
        - to: West Shore
      locations:
        - name: Break Wall
          item: Amagi_West_Lake_Surface_Wall
          canon: Amagi_West_Lake_Surface_Wall
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Surface Wall Left
          req: Amagi_West_Lake_Surface_Wall
          movement: base
    - name: Surface Wall Left
      coord: [22.9, 14.65]
      data:
        water: false
      local:
        - to: West 15
      locations:
        - name: Break Wall
          item: Amagi_West_Lake_Surface_Wall
          canon: Amagi_West_Lake_Surface_Wall
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Surface Wall Right
          req: Amagi_West_Lake_Surface_Wall
          movement: base
    - name: West 15
      coord: [22.05, 14.75]
      data:
        water: false
      local:
        - to: Surface Wall Left
          jumps: 2
      exits:
        - to: Ebih > Vertical Interchange > East 15
          tags: [xshift]

# MUS A M20 : 56s
# TODO: try defeating MUS without grabbing the flask in between

- name: East Lake  # MARK: East Lake
  on_entry: $reset_old_area(^newpos)
  map:
    save: [34, 17, 35, 18]
    surface_east: [35, 14, 36, 15]
    surface_center: [34, 14, 35, 15]
    surface_west: [33, 14, 34, 15]
    southeast: [35, 17, 36, 18]
  data:
    save_point: Save Point
    portal_start: Portal Stand
  datamap:
    map_spot:
      save: Menu > Kiengir Map > Amagi East Lake
      southeast: Menu > Kiengir Map > Forbidden Knowledge
    water:
      surface_east: false
      surface_center: false
      surface_west: false
  spots:
    - name: East 15 Flat
      coord: [35.95, 14.55]
      local:
        - to: East Hill
      exits:
        - to: Glacier > Vertical Room > West 15 Flat
          tags: [xshift]
      actions:
        - name: Attract Portal to Arch
          do: ^portal = `Amagi > East Lake > Arch East`
          to: Arch East
          req: $hover and Underwater_Movement and Breach_Attractor and Anuman and ^portal == ^portal_start
          time: 6
    - name: East 15 Lower
      coord: [35.95, 14.7]
      local:
        - to: East Hill
      exits:
        - to: Glacier > Vertical Room > West 15 Lower
          tags: [xshift]
      actions:
        - name: Attract Portal to Arch
          do: ^portal = `Amagi > East Lake > Arch East`
          to: Arch East
          req: $hover and Underwater_Movement and Breach_Attractor and Anuman and ^portal == ^portal_start
          time: 6
    - name: East 15 Upper Hover
      coord: [35.95, 14.5]
      local:
        - to: East Hill
      exits:
        - to: Center East Water Surface Fast
          req: $hook and $hover
          movement: fast_hover
        - to: Center Lower Platform East
          req: $hook and $hover
          movement: fast_hover
        - to: Center Northeast Platform
          req: $hook and $hover
          movement: fast_hover
        - to: West Platform 3
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Southwest Brick
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Portal Ledge
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Arch East
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Arch West
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
      actions:
        - name: Attract Portal to Arch
          do: ^portal = `Amagi > East Lake > Arch West`
          to: Arch West
          req: $hook and $hover and Underwater_Movement and Breach_Attractor and Anuman and ^portal == ^portal_start
          time: 5.5
    - name: East 15 Lower Hover
      coord: [35.95, 14.65]
      local:
        - to: East Hill
      exits:
        - to: Center East Water Surface Fast
          req: $hook and $hover
          movement: fast_hover
        - to: Center Lower Platform East
          req: $hook and $hover
          movement: fast_hover
        - to: West Platform 3
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Southwest Brick
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Portal Ledge
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Arch East
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Arch West
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
      actions:
        - name: Attract Portal to Arch
          do: ^portal = `Amagi > East Lake > Arch West`
          to: Arch West
          req: $hook and $hover and Underwater_Movement and Breach_Attractor and Anuman and ^portal == ^portal_start
          time: 5.5
    - name: East Hill
      coord: [35.7, 14.7]
      local:
        - to: East Water Surface
          jumps_down: 1
        - to: East 15 Lower
        - to: East 15 Flat
          jumps: 1
      exits:
        - to: Center Lower Platform East
          req: $hover
          movement: base
          jumps: 1
        - to: Center Northeast Platform
          req: $hover
          movement: base
          jumps: 1

    - name: Underwater Hill
      coord: [35.7, 15.7]
      local:
        - to: Southeast Column
        - to: Kum Abala
      exits:
        - to: East Hill
          req: Nanite_Mist
          movement: mist1
        - to: East Hill
          req: $mist2
          movement: mist2
        - to: Center Northeast Platform
          req: Nanite_Mist
          movement: mist1
        - to: Center Northeast Platform
          req: $mist2
          movement: mist2
        - to: Center Lower Platform East
          req: Nanite_Mist
          movement: mist1
        - to: Center Lower Platform East
          req: $mist2
          movement: mist2

    - name: East Water Surface
      coord: [35.5, 15.0]
      data:
        water: true
      local:
        - to: Kum Abala
        - to: Foot
          thru: [35.25, 16.9]
        - to: Southeast Column
      exits:
        - to: Arch East
          req: $hover
          movement: base
        - to: Arch West
          req: $hover
          movement: base
        - to: Arch East
          req: $hover and Underwater_Movement
          movement: water
        - to: Arch West
          req: $hover and Underwater_Movement
          movement: water
    - name: Center East Water Surface Fast
      coord: [34.9, 15.0]
      data:
        water: true
      local:
        - to: Arch East
        - to: Arch West
      exits:
        - to: Arch West
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Portal Ledge
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: West Platform 3
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Southwest Brick
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
    - name: Center East Water Surface Slow
      coord: [34.95, 15.0]
      data:
        water: true
      local:
        - to: Kum Abala
        - to: Foot
          thru: [35.25, 16.9]
    - name: Center Lower Platform East
      coord: [34.7, 14.9]
      local:
        - to: Center East Water Surface Slow
        - to: Center Water Below Platform East
          jumps_down: 1
        - to: Center Water Below Platform West
          jumps_down: 1
        - to: Center Northeast Platform
          jumps: 1
        - to: Center Upper Platform
          jumps: 1
        - to: Center West Platform
          jumps: 1
        - to: West Platform 1 East
      exits:
        - to: East Hill
          req: $hover
          movement: base
          jumps: 1
    - name: Center Water Below Platform East
      coord: [34.7, 15.0]
      data:
        water: true
      local:
        - to: Kum Abala
        - to: Southeast Column
        - to: Arch East
        - to: Arch West
        - to: Southwest Column East
        - to: Southwest Column West
        - to: Southwest Brick
      exits:
        - to: West Platform 3
          req: $hover and Underwater_Movement
          movement: water
        - to: Portal Ledge
          req: $hook and $hover and Underwater_Movement
          movement: water
        - to: Southwest Brick
          req: $hook and $hover and Underwater_Movement
          movement: water
    - name: Center Water Below Platform West
      coord: [34.3, 15.0]
      data:
        water: true
      local:
        - to: Kum Abala
        - to: Arch East
        - to: Arch West
        - to: Southwest Column East
        - to: Southwest Column West
          thru: [34.15, 16.3]
        - to: West Platform 3
    - name: Center Northeast Platform
      coord: [34.75, 14.7]
      data:
        flipside: Amagi Breach > Upper Lake > Portal Stand
      local:
        - to: Center Upper Platform
          jumps: 1
        - to: Center Lower Platform East
          jumps_down: 1
        - to: Center Water Below Platform West
          jumps_down: 1
        - to: West Platform 1 East
        - to: Center East Water Surface Slow
      exits:
        - to: East Hill
          req: $hover
          movement: base
    - name: Center Upper Platform
      coord: [34.4, 14.65]
      data:
        flipside: Amagi Breach > Upper Lake > Center of Platform
      local:
        - to: Center West Platform
        - to: Center Water Below Platform West
          jumps_down: 2
        - to: Center Northeast Platform
        - to: Center Lower Platform East
          jumps_down: 1
    - name: Center West Platform
      coord: [34.15, 14.75]
      data:
        flipside: Amagi Breach > Upper Lake > Middle
      local:
        - to: West Platform 1 West
        - to: Center West Water Surface
          jumps_down: 1
        - to: Center Water Below Platform West
          jumps_down: 1
        - to: Center Lower Platform East
        - to: Center Upper Platform
          jumps: 1
      exits:
        - to: Far West Water Surface
          req: $hover
          movement: base
    - name: Center West Water Surface
      coord: [34.1, 15.0]
      data:
        water: true
      local:
        - to: West Platform 3
        - to: Arch West
        - to: Save Point
          thru: [34.35, 17.2]
        - to: Southwest Column West
          thru: [34.15, 16.3]

    - name: Center Above
      coord: [34.475, 14.5]
      data:
        flipside: SpotId::None
      local:
        - to: Center Upper Platform
        - to: Center Northeast Platform
        - to: Center Lower Platform East
          jumps_down: 1
    - name: Far West Above
      coord: [33.5, 14.5]
      data:
        flipside: SpotId::None
      local:
        - to: Far West Water Surface
        - to: West Platform 1 West Hook
      exits:
        - to: West Water Surface
          req: $hover
        - to: Center West Platform
          req: $hover

    - name: West Water Surface
      coord: [33.8, 15.0]
      exits:
        - to: Center West Platform
          req: $hover
          movement: base
          jumps: 1
    - name: Far West Water Surface
      coord: [33.35, 15.0]
      data:
        water: true
      local:
        - to: West Platform 2 West
        - to: West 17
    - name: West Platform 1 West
      coord: [33.75, 15.05]
      local:
        - to: West Water Surface
          jumps: 1
        - to: West Platform 1 East
        - to: West Platform 1 West Hook
        - to: West Platform 2 West
        - to: West Platform 3
    - name: West Platform 1 West Hook
      coord: [33.65, 15.1]
      local:
        - to: West Platform 2 West
        - to: West Platform 2 East
        - to: Arch West
        - to: Arch East
      exits:
        - to: West Platform 1 West
          req: $hook
          movement: fast_hover
          jumps: 0.5
        - to: Kum Abala
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Foot
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Center West Platform
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
          jumps: 1
        - to: Center Upper Platform
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
          jumps: 1
        - to: Center Northeast Platform
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
          jumps: 1
        - to: Center Lower Platform East
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
          jumps: 1
        - to: Underwater Hill
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
    - name: West Platform 1 East
      coord: [34.05, 15.05]
      local:
        - to: West Platform 1 West
        - to: West Platform 3
        - to: Save Point
        - to: Southwest Column East
        - to: Southwest Column West
          thru: [34.15, 16.3]
        - to: Arch West
        - to: Arch East
        - to: Center West Platform
          jumps: 1
          jump_mvmt: water
        - to: Center Lower Platform East
          jumps: 1
          jump_mvmt: water
      exits:
        - to: West Platform 2 West
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
    - name: West Platform 2 West
      coord: [33.3, 15.45]
      local:
        - to: West 17
        - to: Portal Stand
        - to: West Platform 2 East
        - to: West Platform 1 West
          jumps: 1
          jump_mvmt: water
        - to: West Platform 1 West Hook
          jumps: 1
          jump_mvmt: water
      exits:
        - to: West Platform 1 West
          req: $grab
          movement: base
          jumps: 2
        - to: West Platform 1 West
          req: $hook
          movement: base
          jumps: 1
        - to: West Platform 1 West
          req: $hook and Underwater_Movement
          movement: water
          jumps: 1
    - name: West Platform 2 East
      coord: [33.65, 15.45]
      local:
        - to: West Platform 2 West
        - to: West Platform 1 West
          jumps: 1
          jump_mvmt: water
        - to: West Platform 1 West Hook
          jumps: 1
          jump_mvmt: water
        - to: Arch East
        - to: Arch West
        - to: Save Point
          thru: [34.35, 17.2]
        - to: Southwest Column West
          thru: [34.15, 16.3]
        - to: West Platform 3
        - to: Portal Stand
          thru: [33.7, 15.7]
      exits:
        - to: West Platform 1 West
          req: $grab
          movement: base
          jumps: 2
        - to: West Platform 1 West
          req: $hook
          movement: base
          jumps: 1
        - to: West Platform 1 West
          req: $hook and Underwater_Movement
          movement: water
          jumps: 1
    - name: West Platform 3
      coord: [33.7, 15.95]
      local:
        - to: Portal Stand
        - to: Arch East
        - to: Arch West
        - to: Save Point
          thru: [34.15, 16.3]
      exits:
        - to: West Platform 2 East
          req: $hook and Underwater_Movement
          movement: water
          jumps: 1
    - name: West Platform 3 Hook
      coord: [33.6, 16.0]
      exits:
        - to: Kum Abala
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Foot
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Underwater Hill
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
          jumps: 1

    - name: Portal Stand
      coord: [33.45, 16.3]
      data:
        flipside: Amagi Breach > East Ruins > Save Point
      local:
        - to: West 17
        - to: Portal Ledge
        - to: West Platform 3
          jumps: 1
          jump_mvmt: water
        - to: West Platform 3 Hook
          jumps: 1
          jump_mvmt: water
      exits:
        - to: West Platform 3
          req: $hook
          movement: base
          jumps: 1
        - to: West Platform 3
          req: $grab
          movement: base
          jumps: 2
        - to: West Platform 3
          req: $hook and Underwater_Movement
          movement: water
          jumps: 1
        - to: West 17
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Portal Ledge
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Save Point
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Kum Abala
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
    - name: Portal Ledge
      coord: [33.8, 16.45]
      local:
        - to: Portal Stand
          jumps: 1
        - to: Southwest Brick
          thru: [33.75, 16.8]
        - to: Southwest Column Base
        - to: Southwest Column West
        - to: Southwest Column East
      exits:
        - to: Arch West
          req: $hover
          movement: base
        - to: Arch West
          req: $hover and Underwater_Movement
          movement: water
        - to: Portal Stand
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
          jumps: 1
    - name: West 17
      coord: [33.05, 16.6]
      local:
        - to: Portal Stand
          jumps: 2
      exits:
        - to: Gated Community > East 17
          tags: [xshift]

    - name: Save Point
      coord: [34.5, 17.6]
      data:
        flipside: Amagi Breach > East Ruins > Plinth
      exits:
        - to: Southwest Column East
          req: $climb and Underwater_Movement
          movement: water
          jumps: 3
        - to: Southwest Column East
          req: $hook and Underwater_Movement
          movement: water
          jumps: 1
        - to: Southeast Column
          req: $climb and Underwater_Movement
          movement: water
          jumps: 3
        - to: Southeast Column
          req: $hook and Underwater_Movement
          movement: water
          jumps: 1
      actions:
        - name: Save
          do: $save
          tags: [save]
    - name: Southeast Column
      coord: [34.8, 17.1]
      data:
        flipside: Amagi Breach > East Ruins > Southeast Rock Wall
      local:
        - to: Save Point
        - to: Kum Abala
        - to: Arch East
          jumps: 1
      exits:
        - to: Underwater Hill
          req: $hook and $hover and Underwater_Movement
          movement: water
          jumps: 6
        - to: Portal Ledge
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
          jumps: 1
        - to: Southwest Brick
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
          jumps: 1
        - to: Kum Abala
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
        - to: Foot
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
    - name: Arch East
      coord: [34.65, 16.8]
      data:
        flipside: Amagi Breach > East Ruins > Arch East
      local:
        - to: Arch West
        - to: Save Point
          thru: [34.65, 17.2]
        - to: Kum Abala
        - to: Southeast Column
      exits:
        - to: Underwater Hill
          req: $hook and $hover and Underwater_Movement
          movement: water
          jumps: 4
    - name: Arch West
      coord: [34.35, 16.8]
      data:
        flipside: Amagi Breach > East Ruins > Arch West
      local:
        - to: Arch East
        - to: Save Point
          thru: [34.35, 17.2]
        - to: Southwest Column East
        - to: Southwest Column West
      exits:
        - to: Portal Ledge
          req: $hover and Underwater_Movement
          movement: water
          jumps: 1
    - name: Southwest Column East
      coord: [34.15, 17.1]
      data:
        flipside: Amagi Breach > East Ruins > Small Column East
      local:
        - to: Save Point
        - to: Arch West
          jumps: 1
          jump_mvmt: water
        - to: Southwest Column West
      exits:
        - to: Portal Ledge
          req: $hook and Underwater_Movement
          movement: water
          jumps: 2
    - name: Southwest Column West
      coord: [33.9, 17.1]
      data:
        flipside: Amagi Breach > East Ruins > Small Column West
      local:
        - to: Southwest Column East
        - to: Southwest Column Base
        - to: Southwest Brick
      exits:
        - to: Portal Ledge
          req: $hook and Underwater_Movement
          movement: water
          jumps: 2
    - name: Southwest Column Base
      coord: [33.7, 17.75]
      local:
        - to: Southwest Brick
      exits:
        - to: Southwest Column West
          req: $climb and Underwater_Movement
          movement: water
          jumps: 3
        - to: Southwest Column West
          req: $hook and Underwater_Movement
          movement: water
          jumps: 2
    - name: Southwest Brick
      coord: [33.15, 17.75]
      local:
        - to: West 18
          jumps: 1
        - to: Southwest Column Base
    - name: West 18
      coord: [33.05, 17.7]
      local:
        - to: Southwest Brick
      exits:
        - to: Gated Community > East 18
          tags: [xshift]

    - name: Kum Abala
      coord: [35.2, 17.25]
      local:
        - to: Foot
        - to: Southeast Column
          jumps: 1
      exits:
        - to: Underwater Hill
          req: $hook and $hover and Underwater_Movement
          movement: water
          jumps: 6
        - to: Southeast Column
          req: $hook and $hover and Underwater_Movement
          movement: fast_hover
          jumps: 1
    - name: Foot
      coord: [35.8, 17.75]
      local:
        - to: Kum Abala
          jumps: 2
      locations:
        - name: Tablet
          item: Forbidden_Knowledge
          tags: [standing]

- name: Gated Community
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East 17
      coord: [32.95, 16.6]
    - name: East 18
      coord: [32.95, 17.7]

    - name: West 18
      coord: [31.05, 17.75]
    - name: West 16
      coord: [31.05, 16.0]

    - name: Platform 2 West
      coord: [31.1, 16.7]