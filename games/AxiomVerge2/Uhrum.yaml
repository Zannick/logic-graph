name: Uhrum Valley
short: Uhrum

areas:
- name: West Entrance  # MARK: West Entrance
  on_entry: $reset_old_area(^newpos)
  data:
    save_point: Save Point
    portal_start: Portal Stand
    portal_hidden: true
  map:
    save: [19, 27, 20, 28]
    portal: [19, 25, 20, 26]
    dais: [19, 24, 20, 25]
    exit: [20, 24, 21, 25]
  datamap:
    map_spot:
      save: Menu > Kiengir Map > Uhrum West
      portal: Menu > Kiengir Map > Uhrum West Portal Entrance
      dais: Menu > Kiengir Map > Udusan
      exit: Menu > Kiengir Map > Uhrum West Portal Exit
  spots:
    - name: West 27
      coord: [19.05, 26.8]
      local:
        - to: Southwest Tree
      exits:
        - to: Irikar > Lamassu > East 27
          tags: [xshift]
        - to: South Platform
          req: $hover
          movement: base
    - name: West 26
      coord: [19.05, 25.85]
      local:
        - to: Middle West Ledge
      exits:
        - to: Irikar > Lamassu > East 26
          tags: [xshift]
        - to: Hidden Passage Entry
          req: $hook
          movement: base
          jumps: 3
        - to: Portal Stand
          req: $grab and $climb
          movement: base
          jumps: 3
        - to: Portal Stand
          req: $hook
          jumps: 2

    - name: Hidden Passage West
      coord: [19.05, 25.2]
      local:
        - to: Hidden Passage Entry
      exits:
        - to: Irikar > Lamassu > Hidden Passage East
          tags: [xshift]
    - name: Hidden Passage Entry
      coord: [19.2, 25.2]
      local:
        - to: Hidden Passage West
        - to: Portal Stand
        - to: Middle West Ledge
        - to: West 26
          thru: [19.225, 25.6]
    - name: West 25
      coord: [19.05, 24.75]
      local:
        - to: Top West Ledge
      exits:
        - to: Giguna > Separator > East 25
          tags: [xshift]
    - name: Top West Ledge
      coord: [19.2, 24.9]
      data:
        flipside: Uhrum Breach > Save and Go > West Rock Ledge
      local:
        - to: Portal Stand
        - to: Middle West Ledge
        - to: West 25
          jumps: 1
      exits:
        - to: Hidden Passage Entry
          req: ^mode == 'drone'
          movement: base
        - to: Gate West
          req: $hover
          movement: base
        - to: Gate West Ledge
          req: $hover
          movement: base
    - name: Middle West Ledge
      coord: [19.3, 26.5]
      local:
        - to: Southwest Tree
        - to: South Platform
        - to: Save Point
      exits:
        - to: Portal Stand
          req: $grab and $climb
          movement: base
          jumps: 7
        - to: Portal Stand
          req: $hook
          movement: base
          jumps: 4

    - name: Southwest Tree
      coord: [19.2, 27.05]
      local:
        - to: Save Point
        - to: West 27
          jumps: 2
      exits:
        - to: South Platform
          req: $hook
          movement: base
          jumps: 1
    - name: South Platform
      coord: [19.45, 26.8]
      data:
        flipside: Uhrum Breach > Rock and Gate > Gate West
      local:
        - to: Southwest Tree
        - to: Save Point
        - to: Lower Wall West
      exits:
        - to: Middle West Ledge
          req: $hook
          movement: base
          jumps: 2
        - to: West 27
          req: $hover
          movement: base

    - name: Save Point
      coord: [19.5, 27.35]
      local:
        - to: Southwest Tree
          jumps: 2
      exits:
        - to: South Platform
          req: $hook
          movement: base
          jumps: 2
        - to: Lower Wall West
          req: $grab
          movement: base
          jumps: 4
        - to: Lower Wall West
          req: $hook
          movement: base
          jumps: 2
      actions:
        - name: Save
          do: $save
          tags: [save]
    - name: Portal Stand
      coord: [19.525, 25.5]
      data:
        flipside: Uhrum Breach > Save and Go > Save Point
      local:
        - to: West 26
        - to: Middle West Ledge
        - to: Clear Passage
      exits:
        - to: Hidden Passage Entry
          req: $hook
          movement: base
          jumps: 1
        - to: Gate West Ledge
          req: $grab
          movement: base
          jumps: 3
        - to: Gate West Ledge
          req: $hook
          movement: base
          jumps: 2
    - name: Clear Passage
      coord: [19.95, 25.75]
      local:
        - to: Upper Fork
          jumps: 1
        - to: East 26
      exits:
        - to: Portal Stand
          req: $grab and $climb
          movement: base
          jumps: 4
        - to: Portal Stand
          req: $hook
          movement: base
          jumps: 2

    - name: Gate West
      coord: [19.75, 24.9]
      data:
        flipside: Uhrum Breach > Save and Go > West Stone Wall
      local:
        - to: Gate West Ledge
      exits:
        - to: Inner Dais
          req: Uhrum_West_Entrance_Gate
          movement: base
          jumps: 2
        - to: Inner Dais
          req: Uhrum_West_Entrance_Gate and $hook
          movement: fast_hover
          jumps: 1
    - name: Gate West Ledge
      coord: [19.6, 25.1]
      data:
        flipside: Uhrum Breach > Save and Go > West Stone Ledge
      local:
        - to: Portal Stand
        - to: Gate West
          jumps: 1
      exits:
        - to: Top West Ledge
          req: $hover
          movement: base
          jumps: 1
        - to: Top West Ledge
          req: $hook  # possible?
          movement: base
          jumps: 2
        - to: Inner Dais
          req: Uhrum_West_Entrance_Gate
          movement: base
          jumps: 2
    - name: Inner Dais
      coord: [19.95, 24.8]
      data:
        flipside: Uhrum Breach > Save and Go > Stone Mouth
      local:
        - to: Upper Wall West
        - to: Portal Exit
          jumps: 3
      locations:
        - name: Item
          item: Udusan
          tags: [standing]
      exits:
        - to: Gate West
          req: Uhrum_West_Entrance_Gate
          movement: base
        - to: Top West Ledge
          req: Uhrum_West_Entrance_Gate and $hover
          movement: base
    - name: Portal Exit
      coord: [20.525, 24.6]
      data:
        flipside: Uhrum Breach > Save and Go > Portal Stand
      local:
        - to: Inner Dais
        - to: Gate Switch
        - to: Upper Wall West
          thru: [20.3, 24.9]
    - name: Gate Switch
      coord: [20.6, 24.7]
      local:
        - to: Portal Exit
          jumps: 1
      locations:
        - name: Open Gate
          item: Uhrum_West_Entrance_Gate
          req: $can_damage
          tags: [button]

    - name: Upper Wall West
      coord: [20.3, 25.2]
      data:
        flipside: Uhrum Breach > Save and Go > Mild Slope
      local:
        - to: Inner Dais
          jumps: 2
      exits:
        - to: Portal Exit
          req: $grab
          movement: base
          jumps: 2
        - to: Portal Exit
          req: $hook
          movement: base
          jumps: 1
        - to: Upper Wall East
          req: Uhrum_West_Entrance_Upper_Wall
          movement: base
      hybrid:
        - name: Mist through Wall
          item: Uhrum_West_Entrance_Upper_Wall
          canon: Uhrum_West_Entrance_Upper_Wall
          req: Nanite_Mist
          to: Upper Wall East
          movement: mist1
        - name: Upgraded Mist through Wall
          item: Uhrum_West_Entrance_Upper_Wall
          canon: Uhrum_West_Entrance_Upper_Wall
          req: $mist2
          to: Upper Wall East
          movement: mist2
    - name: Upper Wall East
      coord: [20.45, 25.3]
      local:
        - to: Upper Fork
      exits:
        - to: Upper Wall West
          req: Uhrum_West_Entrance_Upper_Wall
          movement: base
          jumps: 1
      hybrid:
        - name: Charge through Wall
          item: Uhrum_West_Entrance_Upper_Wall
          canon: Uhrum_West_Entrance_Upper_Wall
          req: $charge
          to: Upper Wall West
          time: 1  # ?
        - name: Spin through Wall
          item: Uhrum_West_Entrance_Upper_Wall
          canon: Uhrum_West_Entrance_Upper_Wall
          req: $spin
          to: Upper Wall West
          time: 0.3
        - name: Mist through Wall
          item: Uhrum_West_Entrance_Upper_Wall
          canon: Uhrum_West_Entrance_Upper_Wall
          req: Nanite_Mist
          to: Upper Wall West
          movement: mist1
        - name: Upgraded Mist through Wall
          item: Uhrum_West_Entrance_Upper_Wall
          canon: Uhrum_West_Entrance_Upper_Wall
          req: $mist2
          to: Upper Wall West
          movement: mist2
    - name: Upper Fork
      coord: [20.55, 25.6]
      local:
        - to: Clear Passage
        - to: East 26
      exits:
        - to: Upper Wall East
          req: $hook
          movement: base
          jumps: 1
        - to: Upper Wall East
          req: Nanite_Mist
          movement: mist1
        - to: Upper Wall East
          req: $mist2
          movement: mist2
    - name: East 26
      coord: [20.95, 25.8]
      local:
        - to: Upper Fork
          jumps: 1
        - to: Clear Passage
          jumps: 1
      exits:
        - to: Siege Corridor > West 26
          tags: [xshift]

    - name: Lower Wall West
      coord: [19.85, 26.9]
      enter:
        # close enough
        map__uhrum__west_entrance__save: true
      local:
        - to: Save Point
      exits:
        - to: South Platform
          req: $hover
          movement: base
          jumps: 1
        - to: South Platform
          req: $hook
          movement: base
          jumps: 1
        - to: South Platform
          req: $grab
          movement: base
          jumps: 2
        - to: Lower Wall East
          req: Uhrum_West_Entrance_Lower_Wall
          movement: base
          jumps: 1
      hybrid:
        - name: Charge through Wall
          item: Uhrum_West_Entrance_Lower_Wall
          canon: Uhrum_West_Entrance_Lower_Wall
          req: $charge
          to: Lower Wall East
          time: 1.2  # ?
        - name: Spin through Wall
          item: Uhrum_West_Entrance_Lower_Wall
          canon: Uhrum_West_Entrance_Lower_Wall
          req: $spin
          to: Lower Wall East
          time: 0.5  # ?
        - name: Mist through Wall
          item: Uhrum_West_Entrance_Lower_Wall
          canon: Uhrum_West_Entrance_Lower_Wall
          req: Nanite_Mist
          to: Lower Wall East
          movement: mist1
        - name: Upgraded Mist through Wall
          item: Uhrum_West_Entrance_Lower_Wall
          canon: Uhrum_West_Entrance_Lower_Wall
          req: $mist2
          to: Lower Wall East
          movement: mist2
    - name: Lower Wall East
      coord: [20.1, 26.8]
      local:
        - to: Lower Path Rock
        - to: Lower Path Gap
      exits:
        - to: Lower Wall West
          req: Uhrum_West_Entrance_Lower_Wall
          movement: base
      hybrid:
        - name: Charge through Wall
          item: Uhrum_West_Entrance_Lower_Wall
          canon: Uhrum_West_Entrance_Lower_Wall
          req: $charge
          to: Lower Wall West
          time: 1.2  # ?
        - name: Spin through Wall
          item: Uhrum_West_Entrance_Lower_Wall
          canon: Uhrum_West_Entrance_Lower_Wall
          req: $spin
          to: Lower Wall West
          time: 0.5  # ?
        - name: Mist through Wall
          item: Uhrum_West_Entrance_Lower_Wall
          canon: Uhrum_West_Entrance_Lower_Wall
          req: Nanite_Mist
          to: Lower Wall West
          movement: mist1
        - name: Upgraded Mist through Wall
          item: Uhrum_West_Entrance_Lower_Wall
          canon: Uhrum_West_Entrance_Lower_Wall
          req: $mist2
          to: Lower Wall West
          movement: mist2
    - name: Lower Path Rock
      coord: [20.3, 26.9]
      local:
        - to: Lower Path Gap
        - to: Lower Path Tree Ledge
        - to: Lower Wall East
          jumps: 1
      exits:
        - to: Glitchy Corridor > Northwest Platform
          req: $hover
          movement: base
          jumps: 1
          penalty_tags: [xshift, -base.1]
    - name: Lower Path Gap
      coord: [20.2, 27.3]
      local:
        - to: Sand
      exits:
        - to: Lower Wall West
          req: $hook
          movement: base
          jumps: 2
        - to: Lower Path Tree Ledge
          req: $hook
          movement: base
          jumps: 1
    - name: Sand
      coord: [20.0, 27.75]
      locations:
        - name: Refill
          item: Power_Core
          req: $more_refills
          tags: [standing]
      exits:
        - to: Lower Path Gap
          req: $hook
          movement: base
          jumps: 2
        - to: Lower Path Tree Ledge
          req: $hook
          movement: base
          jumps: 2
        - to: Lower Path Tree Ledge
          req: $grab and $climb
          movement: base
          jumps: 3
    - name: Lower Path Tree Ledge
      coord: [20.55, 27.3]
      data:
        flipside: Uhrum Breach > West Glitch > Pillar West
      local:
        - to: Sand
        - to: Lower Path Rock
          jumps: 3
        - to: East 28
      exits:
        - to: Glitchy Corridor > West Glitch West
          movement: base
          penalty_tags: [xshift, -base.1]
        - to: Glitchy Corridor > West Glitch Ledge
          req: $hover
          movement: base
          penalty_tags: [xshift, -base.1]
    - name: East 28
      coord: [20.95, 27.7]
      exits:
        - to: Lower Path Tree Ledge
          req: $grab
          movement: base
          jumps: 3
        - to: Lower Path Tree Ledge
          req: $hook
          movement: base
          jumps: 2
        - to: Glitchy Corridor > West 28
          tags: [xshift]

- name: Siege Corridor  # MARK: Siege Corridor
  on_entry: $reset_old_area(^newpos)
  map:
    health: [23, 25, 24, 26]
    urn: [25, 24, 26, 25]
    tablet: [25, 25, 26, 26]
    core: [21, 24, 22, 25]
  datamap:
    map_spot:
      health: Menu > Kiengir Map > Uhrum Siege Corridor Health
      urn: Menu > Kiengir Map > Uhrum Fast Travel
      tablet: Menu > Kiengir Map > Storm Bomb
      core: Menu > Kiengir Map > Uhrum Siege Corridor Core
  spots:
    - name: West 26
      coord: [21.05, 25.8]
      local:
        - to: West Greenery
          jumps: 4
      exits:
        - to: West Entrance > East 26
          tags: [xshift]
    - name: Western Cache
      coord: [21.1, 24.6]
      local:
        - to: Western Rock
      locations:
        - name: Core
          item: Power_Core
          req: $more_refills
          tags: [standing]
      exits:
        - to: Northwest Platform
          req: $hover
          movement: base
        - to: Northwest Door
          req: Nanite_Mist
          movement: mist1
        - to: Northwest Door
          req: $mist2
          movement: mist2
    - name: Western Rock
      coord: [21.3, 25.0]
      local:
        - to: Western Cache
          jumps: 3
        - to: West 26
          thru: [21.45, 25.5]
        - to: West Greenery
      exits:
        - to: Northwest Platform
          req: $hover
          movement: base
          jumps: 2
    - name: Northwest Door
      coord: [21.5, 24.2]
      local:
        - to: Western Rock
        - to: West 26
          thru: [21.45, 25.5]
        - to: Northwest Platform
          jumps_down: 1
        - to: West Rocky Ledge
      exits:
        - to: Western Cache
          req: $hover
          movement: base
        - to: Giguna > Vertical Interchange > South
          req: $mist2
          movement: mist2
          tags: [ydoor]
    - name: Northwest Platform
      coord: [21.75, 24.7]
      local:
        - to: Western Rock
        - to: West 26
          jumps_down: 1
        - to: West Rocky Ledge
      exits:
        - to: Western Cache
          req: $hover
          movement: base
          jumps: 2
        - to: Northwest Door
          req: Nanite_Mist
          movement: mist1
        - to: Northwest Door
          req: $mist2
          movement: mist2
    - name: West Greenery
      coord: [22.2, 25.35]
      local:
        - to: West 26
        - to: West Loop
      exits:
        - to: West Grassy Ledge
          req: $hook
          movement: base
          jumps: 2
    - name: West Grassy Ledge
      coord: [22.3, 24.95]
      local:
        - to: West 26
        - to: West Rocky Ledge
          jumps: 1
        - to: Center West
          jumps: 4
        - to: West Middle Tree
    - name: West Rocky Ledge
      coord: [22.15, 24.75]
      local:
        - to: West 26
        - to: Northwest Platform
          jumps: 1
        - to: Center West
          jumps: 4
        - to: West Grassy Ledge
        - to: West Middle Tree
    - name: West Loop
      coord: [23.2, 25.4]
      local:
        - to: West Greenery
          jumps: 3
        - to: West Middle Tree
          thru: [23.325, 25.1]
          jumps: [2, 3]
    - name: West Middle Tree
      coord: [22.7, 24.95]
      local:
        - to: West Grassy Ledge
        - to: West Rocky Ledge
          jumps: 2
        - to: Center West
          thru: [22.5, 24.75]
          jumps: [1, 3]

    - name: Center West
      coord: [23.0, 24.4]
      local:
        - to: West Middle Tree
        - to: West Grassy Ledge
        - to: West Rocky Ledge
        - to: Center Platform 1

    - name: Center Platform 1
      coord: [23.9, 24.7]
      local:
        - to: Center West
          jumps: 4
        - to: Center Platform 3
        - to: Center East
    - name: Center Platform 3
      coord: [24.4, 24.7]
      local:
        - to: Mideast Hill
          jumps_down: 1
        - to: Mideast Tree
        - to: Center Platform 1
      exits:
        - to: Upper Rock West
          req: $hover
          movement: base
          jumps: 1
    - name: Center East
      coord: [24.2, 24.95]
      local:
        - to: Center Platform 1
          jumps: 1
        - to: Center Box
          thru: [24.25, 25.15]
        - to: Mideast Hill
          jumps: 1
    - name: Center Box
      coord: [23.7, 25.5]
      local:
        - to: Center Valley
          jumps: 5
      locations:
        - name: Box
          item: Health_Fragment
          req: $can_damage
          time: 1.5
          tags: [standing]
    - name: Center Valley
      coord: [24.35, 25.2]
      local:
        - to: Mideast Hill
          jumps: 2
      exits:
        - to: Center East
          req: $grab
          movement: base
          jumps: 2
        - to: Center East
          req: $hook
          movement: base
          jumps: 1
    - name: Mideast Hill
      coord: [24.5, 24.9]
      local:
        - to: Center Platform 3
          jumps: 1
        - to: Center Valley
        - to: Center East
    - name: Mideast Tree
      coord: [24.75, 24.9]
      local:
        - to: Mideast Hill
        - to: Pond
        - to: Center Platform 3
          jumps: 1
      exits:
        - to: Upper Rock West
          req: $hook
          movement: base
          jumps: 2
        - to: East Hill
          req: $hover
          movement: base
          jumps: 1
    - name: Upper Rock West
      coord: [25.0, 24.4]
      local:
        - to: Mideast Tree
        - to: Mideast Hill
        - to: Center Platform 3
        - to: Pond
      exits:
        - to: Upper Rock Item
          req: ^mode == 'drone'
          movement: base
          jumps: 1
    - name: Upper Rock Item
      coord: [25.4, 24.35]
      local:
        - to: Upper Rock East
      locations:
        - name: Urn
          item: Fast_Travel
          canon: Fast_Travel
          tags: [urn]
      exits:
        - to: Upper Rock West
          req: ^mode == 'drone'
          movement: base
    - name: Upper Rock East
      coord: [25.55, 24.4]
      local:
        - to: Pond
        - to: East Hill
        - to: East 25
        - to: Upper Rock Item
          jumps: 1

    - name: Pond
      coord: [25.4, 25.5]
      local:
        - to: Mideast Tree
          jumps: 5
      locations:
        - name: Item
          item: Storm_Bomb
          tags: [standing]
      exits:
        - to: East Hill
          req: $climb
          movement: base
          jumps: 5
        - to: East Hill
          req: $hover
          movement: base
          jumps: 4
    - name: East Hill
      coord: [25.7, 24.7]
      local:
        - to: East 25
        - to: Pond
      exits:
        - to: Mideast Tree
          req: $hover
          movement: base
        - to: Upper Rock East
          req: $hook
          movement: base
          jumps: 1
        - to: Upper Rock East
          req: Anuman and $grab
          movement: base
          jumps: 1
        - to: Upper Rock East
          req: Nanite_Mist
          movement: mist1
        - to: Upper Rock East
          req: $mist2
          movement: mist2
    - name: East 25
      coord: [25.95, 24.75]
      local:
        - to: Mideast Hill
          jumps: 1
      exits:
        - to: Waterfalls > West 25
          tags: [xshift]

- name: Glitchy Corridor  # MARK: Glitchy Corridor
  on_entry: $reset_old_area(^newpos)
  data:
    portal_start: Portal Stand
  map:
    flask: [21, 27, 22, 28]
    portal: [22, 27, 23, 28]
    rock: [24, 26, 25, 27]
    eglitch: [24, 27, 25, 28]
  datamap:
    map_spot:
      flask: Menu > Kiengir Map > Uhrum Glitchy Corridor Flask
      portal: Menu > Kiengir Map > Uhrum Glitchy Corridor Portal
      rock: Menu > Kiengir Map > Uhrum Glitchy Corridor Rock
      eglitch: Menu > Kiengir Map > Uhrum Glitchy Corridor East Glitch
  spots:
    - name: West 28
      coord: [21.05, 27.7]
      local:
        - to: West Glitch West
          jumps: 1
      exits:
        - to: West Entrance > East 28
          tags: [xshift]
        - to: West Glitch Ledge
          req: $hook or Anuman
          movement: base
          jumps: 2
        - to: West Glitch Ledge
          req: $hover or $grab
          movement: base
          jumps: 3
    - name: West Glitch West
      coord: [21.45, 27.55]
      data:
        flipside: Uhrum Breach > West Glitch > Narrow Glitch
      local:
        - to: West 28
      exits:
        - to: Behind West Glitch
          req: ^mode == 'drone' and Uhrum_West_Glitch
          movement: base
        - to: West Glitch Ledge
          req: $hook or Anuman
          movement: base
          jumps: 2
        - to: West Glitch Ledge
          req: $hover or $grab
          movement: base
          jumps: 3
        - to: West Entrance > Lower Path Tree Ledge
          req: $hover
          movement: base
          jumps: 1
          penalty_tags: [xshift, -base.1]
    - name: Behind West Glitch
      coord: [21.8, 27.75]
      data:
        flipside: Uhrum Breach > West Glitch > Past Glitch
      locations:
        - name: Flask
          canon: Uhrum_Glitchy_Corridor_Flask
          item: Big_Flask
          tags: [flask]
        - name: Shockwave Flask
          canon: Uhrum_Glitchy_Corridor_Flask
          item: Big_Flask
          req: $shockwave
          price: 100
          tags: [shockwave]
        - name: Flask Collection Skip
          canon: Uhrum_Glitchy_Corridor_Flask
          item: Big_Flask
          req: $melee_cskip
          to: Menu > Warp Only > Kiengir
          tags: [cskip]
        - name: Flask Fast Travel
          canon: Uhrum_Glitchy_Corridor_Flask
          item: Big_Flask
          req: $melee_cskip and Fast_Travel
          to: ^map_spot
          tags: [cskip]
      exits:
        - to: West Glitch West
          req: ^mode == 'drone' and Uhrum_West_Glitch
          movement: base
          jumps: 2
    - name: West Glitch Ledge
      coord: [21.45, 27.3]
      local:
        - to: West 28
        - to: West Glitch West
        - to: West Pillar West
          jumps: 3
      exits:
        - to: West Entrance > Lower Path Tree Ledge
          req: $hover
          movement: base
          jumps: 1
          penalty_tags: [xshift, -base.1]
        - to: West Pillar West
          req: $hook
          movement: base
          jumps: 2
    - name: Northwest Platform
      coord: [21.3, 26.7]
      local:
        - to: West 28
          jumps_down: 1
        - to: West Glitch West
          jumps_down: 1
        - to: West Glitch Ledge
          jumps_down: 1
      exits:
        - to: West Entrance > Lower Path Rock
          req: $hover
          movement: base
          penalty_tags: [xshift, -base.1]
        - to: West Entrance > Lower Path Tree Ledge
          movement: base
          penalty_tags: [xshift, -base.1]
        - to: West Pillar West
          req: $hover
          movement: base

    - name: West Pillar West
      coord: [21.8, 26.9]
      local:
        - to: West Glitch Ledge
        - to: West Pillar East
      exits:
        - to: Northwest Platform
          req: $hover
          movement: base
          jumps: 1
        - to: Portal Stand
          req: $hookhover
          movement: fast_hover
        - to: Center Platform West
          req: $hookhover
          movement: fast_hover
    - name: West Pillar East
      coord: [22.1, 27.0]
      local:
        - to: Portal Stand
          jumps: 2
        - to: West Pillar West
          jumps: 1
      exits:
        - to: West Glitch West
          req: $hookhover
          movement: fast_hover
        - to: West Entrance > Lower Path Tree Ledge
          req: $hookhover
          movement: fast_hover
          penalty_tags: [xshift, -fast_hover.1]
        - to: West Entrance > Lower Path Rock
          req: $hookhover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xshift, -fast_hover.1]
    - name: Portal Stand
      coord: [22.475, 27.2]
      data:
        flipside: Uhrum Breach > East Glitch > Save Point
      local:
        - to: Middle Lower
      exits:
        - to: West Pillar East
          req: $hook or $hover
          movement: base
          jumps: 1
        - to: Center Platform West
          req: $hover
          movement: base
          jumps: 3

    - name: Center Platform West
      coord: [23.1, 26.9]
      data:
        flipside: SpotId::None
      exits:
        - to: East Glitch West
          req: $hookhover
          movement: fast_hover
        - to: Wall West Platform
          req: $hookhover
          movement: fast_hover
          jumps: 1
    - name: Center Platform East
      coord: [23.6, 26.9]
      data:
        flipside: SpotId::None
      exits:
        - to: Portal Stand
          req: $hookhover
          movement: fast_hover
        - to: West Pillar East
          req: $hookhover
          movement: fast_hover
    - name: Middle Lower
      coord: [23.6, 27.4]
      data:
        flipside: Uhrum Breach > East Glitch > Middle Lower
      local:
        - to: Portal Stand
          jumps: 3
        - to: East Ledge
          jumps: 2
      exits:
        - to: East Ledge
          req: $hook
          movement: base
          jumps: 1
    - name: East Ledge
      coord: [23.75, 27.1]
      local:
        - to: Portal Stand
        - to: Middle Lower
        - to: Center Platform East
          jumps: 1
        - to: East Glitch West
        - to: East Platform
          jumps: 1
      exits:
        - to: East Platform
          req: $hook
          movement: fast_hover
          jumps: 1
    - name: East Platform
      coord: [24.1, 26.9]
      local:
        - to: East Ledge
        - to: East Glitch West
      locations:
        - name: Charge Through Wall
          canon: Uhrum_Glitchy_Corridor_Rock
          item: Uhrum_Glitchy_Corridor_Rock
          req: $charge
          to: Wall East Platform
          movement: fling
          jumps: 1
          penalty_tags: [charge_time]
          tags: [event]
        - name: Charge Through Wall and Hover
          canon: Uhrum_Glitchy_Corridor_Rock
          item: Uhrum_Glitchy_Corridor_Rock
          req: $chargehover
          to: Save Room > Save Point
          movement: fast_hover
          jumps: 1
          penalty_tags: [xshift, -fast_hover.1]
          tags: [event]
        # It's not as easy to spin through the wall? TODO
      exits:
        - to: Center Platform East
          req: $hover
          movement: base
        - to: Wall West Platform
          req: $hook or Anuman
          movement: base
          jumps: 1
        - to: Wall West Platform
          req: $grab
          movement: base
          jumps: 2
    - name: Wall West Platform
      coord: [24.3, 26.6]
      data:
        flipside: Uhrum Breach > East Glitch > Wall West Platform
      local:
        - to: Wall West
          jumps: 1
        - to: East Platform
        - to: East Glitch West
      exits:
        - to: Wall East Platform
          req: Uhrum_Glitchy_Corridor_Rock and $hook
          movement: fast_hover
        - to: Save Room > Save Point
          req: Uhrum_Glitchy_Corridor_Rock and $hookhover
          movement: fast_hover
          penalty_tags: [xshift, -fast_hover.1]
    - name: Wall West
      coord: [24.4, 26.5]
      data:
        flipside: SpotId::None
      local:
        - to: Wall West Platform
      locations:
        - name: Mist Through Wall
          canon: Uhrum_Glitchy_Corridor_Rock
          item: Uhrum_Glitchy_Corridor_Rock
          req: Nanite_Mist
          to: Wall East
          movement: mist1
          tags: [event]
        - name: Upgraded Mist Through Wall
          canon: Uhrum_Glitchy_Corridor_Rock
          item: Uhrum_Glitchy_Corridor_Rock
          req: $mist2
          to: Wall East
          movement: mist2
          tags: [event]
      exits:
        - to: Wall East
          req: Uhrum_Glitchy_Corridor_Rock
          movement: base
    - name: Wall East
      coord: [24.6, 26.5]
      local:
        - to: Wall East Platform
      locations:
        - name: Mist Through Wall
          canon: Uhrum_Glitchy_Corridor_Rock
          item: Uhrum_Glitchy_Corridor_Rock
          req: Nanite_Mist
          to: Wall West
          movement: mist1
          tags: [event]
        - name: Upgraded Mist Through Wall
          canon: Uhrum_Glitchy_Corridor_Rock
          item: Uhrum_Glitchy_Corridor_Rock
          req: $mist2
          to: Wall West
          movement: mist2
          tags: [event]
      exits:
        - to: Wall West
          req: Uhrum_Glitchy_Corridor_Rock
          movement: base
    - name: Wall East Platform
      coord: [24.675, 26.6]
      data:
        flipside: Uhrum Breach > East Glitch > Wall East Platform
      local:
        - to: Wall East
          jumps: 1
        - to: East Hookable
        - to: East 27
      exits:
        - to: Wall West Platform
          req: Uhrum_Glitchy_Corridor_Rock and $hook
          movement: fast_hover
        - to: Center Platform East
          req: Uhrum_Glitchy_Corridor_Rock and $hookhover
          movement: fast_hover
    - name: East Hookable
      coord: [24.775, 26.8]
      data:
        flipside: Uhrum Breach > East Glitch > East Hookable
      local:
        - to: Wall East Platform
          jumps: 1
        - to: East 27
          jumps: 1
      exits:
        - to: Save Room > Save Point
          req: $hookhover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xshift, -fast_hover.1]
        - to: Save Room > East
          req: $hookhover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xshift, -fast_hover.1]
    - name: East 27
      coord: [24.95, 26.75]
      locations:
        - name: Charge Through Wall
          canon: Uhrum_Glitchy_Corridor_Rock
          item: Uhrum_Glitchy_Corridor_Rock
          req: $charge
          to: Wall West Platform
          movement: fling
          jumps: 1
          penalty_tags: [charge_time]
          tags: [event]
        - name: Charge Through Wall and Hover
          canon: Uhrum_Glitchy_Corridor_Rock
          item: Uhrum_Glitchy_Corridor_Rock
          req: $chargehover
          to: Center Platform East
          movement: fast_hover
          jumps: 1
          tags: [event]
        # It's not as easy to spin through the wall?

    - name: East Glitch West
      coord: [24.4, 27.4]
      data:
        flipside: Uhrum Breach > East Glitch > Glitch West
      local:
        - to: East Ledge
          jumps: 3
      exits:
        - to: East Platform
          req: $hook
          movement: base
          jumps: 2
        - to: Wall East Platform
          req: $hook
          movement: base
          jumps: 3
        - to: East Glitch East
          req: Uhrum_East_Glitch
          movement: base
    - name: East Glitch East
      coord: [24.7, 27.7]
      data:
        flipside: Uhrum Breach > East Glitch > Glitch East
      local:
        - to: East 28
      exits:
        - to: East Glitch West
          req: Uhrum_East_Glitch
          movement: base
          jumps: 2
    - name: East 28
      coord: [24.95, 27.75]
      local:
        - to: East Glitch East
          jumps: 1
      exits:
        - to: Spring > West
          tags: [xshift]

- name: Spring  # MARK: Spring
  on_entry: $reset_old_area(^newpos)
  data:
    map_spot: Menu > Kiengir Map > Uhrum Spring Health
  spots:
    - name: West
      coord: [25.05, 27.75]
      local:
        - to: Center
      exits:
        - to: Glitchy Corridor > East 28
          tags: [xshift]
    - name: Center
      coord: [25.5, 27.9]
      data:
        flipside: Uhrum Breach > South Slime > Center
      local:
        - to: West
          jumps: 1
      locations:
        - name: Health
          item: Health_Node
          tags: [standing]
      exits:
        - to: Glitchy Corridor > East Glitch East
          req: $hookhover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xshift, -fast_hover.1]

- name: Waterfalls  # MARK: Waterfalls
  on_entry: $reset_old_area(^newpos)
  map:
    tablet: [26, 27, 27, 28]
    flask: [26, 23, 27, 24]
    se: [27, 27, 28, 28]
  datamap:
    map_spot:
      tablet: Menu > Kiengir Map > Suspension Bridge
      flask: Menu > Kiengir Map > Uhrum Waterfalls Flask
    water:
      tablet: true
      se: true
  spots:
    - name: West 25
      coord: [26.05, 24.75]
      local:
        - to: East Palm Tree
        - to: Lower East Platform
        - to: West Platform
          jumps_down: 2
        - to: West Wall
          jumps_down: 2
      exits:
        - to: Below Block
          req: $hover
          movement: base
        - to: Siege Corridor > East 25
          tags: [xshift]
    - name: West 24
      coord: [26.05, 23.75]
      local:
        - to: West 25
          thru: [26.15, 24.0]
        - to: West Wall
          jumps_down: 2
        - to: West Platform
          jumps_down: 2
        - to: Lower East Platform
        - to: East Water Surface
        - to: High Platform
      exits:
        - to: Below Block
          req: $hover
          movement: base
        - to: Artillery Practice > East 24
          tags: [xshift]
    - name: West 27
      coord: [26.05, 26.75]
      local:
        - to: West Water's Edge
      exits:
        - to: Large Rock
          req: $hook
          movement: base
          jumps: 1
        - to: Center Island West
          req: $hover
          movement: base
        - to: Save Room > East
          tags: [xshift]

    #region Upper Tiers
    - name: Ledge Above Palm
      coord: [27.5, 24.15]
      local:
        - to: High Platform
          jumps: 2
      exits:
        - to: High Platform
          req: $hover
          movement: base
          jumps: 1
        - to: Northeast Ledge
          req: $hook
          movement: base
          jumps: 2
    - name: High Platform
      coord: [27.1, 23.9]
      local:
        - to: West 24
          jumps: 3
      exits:
        - to: Northeast Ledge
          req: $grab
          movement: base
          jumps: 2
        - to: Northeast Ledge
          req: $hover or $hook
          movement: base
          jumps: 1
    - name: Ceiling Opening
      coord: [27.15, 23.25]
      local:
        - to: High Platform
        - to: Northeast Ledge
        - to: Green Middle Ledge
      exits:
        - to: Ceiling Cache
          req: ^mode == 'drone'
          movement: base
          jumps: 1
        - to: West 24
          req: $hover
          movement: base
        - to: Barrier West
          req: $hover
          movement: base
    - name: Ceiling Cache
      coord: [26.8, 23.15]
      locations:
        - name: Flask
          canon: Uhrum_Waterfalls_Flask
          item: Flask
          req: ^mode == 'drone'
          tags: [flask]
        - name: Flask Collection Skip
          canon: Uhrum_Waterfalls_Flask
          item: Flask
          req: ^mode == 'drone'
          to: Menu > Warp Only > Kiengir
          tags: [cskip]
        - name: Flask Fast Travel
          canon: Uhrum_Waterfalls_Flask
          item: Flask
          req: ^mode == 'drone' and Fast_Travel
          to: ^map_spot
          tags: [cskip]
      exits:
        - to: Ceiling Opening
          req: ^mode == 'drone'
          movement: base
    - name: Northeast Ledge
      coord: [27.4, 23.7]
      local:
        - to: Green Middle Ledge
        - to: High Platform
        - to: Barrier West
          jumps: 2
      exits:
        - to: Ceiling Opening
          req: $hook
          movement: base
          jumps: 2
    - name: Barrier West
      coord: [27.6, 23.4]
      local:
        - to: Northeast Ledge
      exits:
        - to: Ceiling Opening
          req: $hover
          movement: base
          jumps: 1
        - to: Barrier East
          req: Uhrum_Waterfall_Wall
          movement: base
      hybrid:
        - name: Charge through Wall
          item: Uhrum_Waterfall_Wall
          canon: Uhrum_Waterfall_Wall
          req: $charge
          to: Barrier East
          movement: base
          penalty_tags: [charge_time, charge_time]  # will take two or more times
        - name: Spin through Wall
          item: Uhrum_Waterfall_Wall
          canon: Uhrum_Waterfall_Wall
          req: $spin
          to: Barrier East
          time: 1  # ?
        - name: Mist through Wall
          item: Uhrum_Waterfall_Wall
          canon: Uhrum_Waterfall_Wall
          req: Nanite_Mist
          to: Barrier East
          movement: mist1
        - name: Upgraded Mist through Wall
          item: Uhrum_Waterfall_Wall
          canon: Uhrum_Waterfall_Wall
          req: $mist2
          to: Barrier East
          movement: mist2
    - name: Barrier East
      coord: [27.7, 23.4]
      local:
        - to: East 24
      exits:
        - to: Barrier West
          req: Uhrum_Waterfall_Wall
          movement: base
        - to: Tulip Tower > Lower Column
          req: $hover
          movement: base
          penalty_tags: [xshift, -base.1]
      hybrid:
        - name: Charge through Wall
          item: Uhrum_Waterfall_Wall
          canon: Uhrum_Waterfall_Wall
          req: $charge
          to: Barrier West
          movement: base
          penalty_tags: [charge_time, charge_time]
        - name: Spin through Wall
          item: Uhrum_Waterfall_Wall
          canon: Uhrum_Waterfall_Wall
          req: $spin
          to: Barrier West
          time: 1  # ?
        - name: Mist through Wall
          item: Uhrum_Waterfall_Wall
          canon: Uhrum_Waterfall_Wall
          req: Nanite_Mist
          to: Barrier West
          movement: mist1
        - name: Upgraded Mist through Wall
          item: Uhrum_Waterfall_Wall
          canon: Uhrum_Waterfall_Wall
          req: $mist2
          to: Barrier West
          movement: mist2
    - name: East 24
      coord: [27.95, 23.8]
      local:
        - to: Barrier East
          jumps: 3
      exits:
        - to: Tulip Tower > West 24
          tags: [xshift]
    #endregion

    #region Middle Tiers
    - name: West Wall
      coord: [26.25, 25.9]
      local:
        - to: West Platform
          jumps: 1
        - to: West 27
          jumps_down: 1
        - to: Large Rock
        - to: Island Water West
      exits:
        - to: West 25
          req: $grab and $climb
          movement: base
          jumps: 7
        - to: West 25
          req: $hook
          movement: base
          jumps: 5
    - name: West Platform
      coord: [26.5, 25.8]
      local:
        - to: West Wall
        - to: Large Rock
        - to: Medium Rock
        - to: Center Island East
      exits:
        - to: Green Middle Ledge
          req: $grab
          movement: base
          jumps: 5
        - to: Green Middle Ledge
          req: $hook
          movement: base
          jumps: 4
        - to: Sloped Rock
          req: $hook
          movement: base
          jumps: 1
    - name: Sloped Rock
      coord: [26.4, 25.5]
      data:
        flipside: Uhrum Breach > Overgrown Ruins > Cache
      local:
        - to: West Platform
        - to: West 25
          jumps: 5
        - to: East Palm Tree
          thru: [26.5, 25.0]
          jumps: [3, 3]
      exits:
        - to: West 25
          req: $hook
          movement: base
          jumps: 3
        - to: Green Middle Ledge
          req: $hook
          movement: base
          jumps: 3
        - to: Green Middle Ledge
          req: $hookhover
          movement: base
          jumps: 2
    - name: Large Rock
      coord: [26.55, 26.4]
      local:
        - to: West 27
        - to: Island Water West
        - to: Small Rock
        - to: Center Island East
          thru: [26.75, 26.4]
      exits:
        - to: Medium Rock
          req: $grab or $hook
          movement: base
          jumps: 2
        - to: West Wall
          req: $hover and $hook
          movement: base
          jumps: 2
    - name: Medium Rock
      coord: [26.7, 26.1]
      local:
        - to: Large Rock
        - to: Small Rock
          thru: [26.8, 26.1]
      exits:
        - to: West Wall
          req: $hover
          movement: base
          jumps: 1
        - to: West Platform
          req: $hover
          movement: base
          jumps: 2
        - to: Green Middle Ledge
          req: $hover and $hook
          movement: base
          jumps: 5
    - name: Small Rock
      coord: [27.0, 26.5]
      local:
        - to: Lower East Platform
        - to: Large Rock
          jumps: 1
    - name: Lower East Platform
      coord: [27.4, 26.7]
      local:
        - to: East 27
        - to: East Water Surface
          jumps_down: 1
        - to: Water Pillar
          jumps_down: 1
        - to: Center Island East
      exits:
        - to: Small Rock
          req: $hover
          movement: base
          jumps: 1
        - to: Below Block
          req: $climb
          jumps: 3
    - name: Below Block
      coord: [27.6, 26.15]
      local:
        - to: Lower East Platform
        - to: Water Pillar
      locations:
        - name: Shockwave Block
          item: Uhrum_Waterfalls_Block
          canon: Uhrum_Waterfalls_Block
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Small Rock
          req: $hover
          movement: base
        - to: Above Block
          req: Uhrum_Waterfalls_Block and $grab
          movement: base
          jumps: 2
        - to: East 26
          req: Uhrum_Waterfalls_Block and $grab
          movement: base
          jumps: 2
        - to: Above Block
          req: Uhrum_Waterfalls_Block and $hook
          movement: base
          jumps: 1
        - to: East 26
          req: Uhrum_Waterfalls_Block and $hook
          movement: base
          jumps: 1
    - name: Above Block
      coord: [27.65, 25.8]
      data:
        flipside: Uhrum Breach > Overgrown Ruins > Two Guards
      local:
        - to: East 26
      locations:
        - name: Block
          item: Uhrum_Waterfalls_Block
          canon: Uhrum_Waterfalls_Block
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Below Block
          req: Uhrum_Waterfalls_Block
          movement: base
        - to: East 25
          req: $hook
          movement: base
          jumps: 5
    - name: East 26
      coord: [27.95, 25.8]
      local:
        - to: Above Block
      locations:
        - name: Block
          item: Uhrum_Waterfalls_Block
          canon: Uhrum_Waterfalls_Block
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Below Block
          req: Uhrum_Waterfalls_Block
          movement: base
        - to: Annuna Corridor > West 26
          tags: [xshift]
    - name: East 25
      coord: [27.95, 24.75]
      local:
        - to: Above Block
          thru: [27.8, 24.75]
      exits:
        - to: Annuna Corridor > West 25
          tags: [xshift]
    - name: Green Middle Ledge
      coord: [27.2, 25.2]
      local:
        - to: East Palm Tree
          jumps: 3
        - to: Lower East Platform
        - to: East Water Surface
      exits:
        - to: Below Block
          req: $hover
          movement: base
    - name: East Palm Tree
      coord: [27.45, 24.75]
      local:
        - to: West 25
      exits:
        - to: Ledge Above Palm
          req: $grab
          movement: base
          jumps: 4
        - to: Ledge Above Palm
          req: $hook
          movement: base
          jumps: 2
    #endregion

    #region Water and Surface
    - name: West Water's Edge
      coord: [26.3, 26.9]
      local:
        - to: West 27
          jumps: 2
        - to: West Water Surface
    - name: West Water Surface
      coord: [26.35, 27.0]
      local:
        - to: West Water's Edge
          jumps: 1
        - to: West Water Ledge
        - to: West Shallow End
    - name: West Shallow End
      coord: [26.4, 27.3]
      local:
        - to: West Water Surface
          jumps: 2
        - to: West Water Surface
          jumps: 1
          jump_mvmt: water
        - to: West Water Ledge
      exits:
        - to: Center Island West
          req: $grab and Underwater_Movement
          movement: base
          jumps: 2
        - to: Center Island West
          req: $hook and Underwater_Movement
          movement: base
          jumps: 1
    - name: Center Island West
      coord: [26.7, 26.9]
      data:
        flipside: Uhrum Breach > West Copse > Center West
      local:
        - to: Center Island Middle
        - to: Island Water West
      exits:
        - to: West 27
          req: $hover
          movement: base
          jumps: 1
    - name: Center Island Middle
      coord: [26.85, 26.9]
      local:
        - to: Center Island West
        - to: Center Island East
      actions:
        - name: Throw Drone Up
          req: $can_deploy and Slingshot_Hook
          do: $deploy_drone
          to: Medium Rock
          time: 2
    - name: Center Island East
      coord: [27.0, 26.9]
      data:
        flipside: Uhrum Breach > West Copse > Center East
      local:
        - to: Center Island Middle
        - to: Water Pillar
      exits:
        - to: Lower East Platform
          req: $hover
          movement: base
          jumps: 1
        - to: East Water's Edge
          req: $hover
          movement: base
    - name: Island Water West
      coord: [26.65, 27.0]
      local:
        - to: West Water Ledge
    - name: West Water Ledge
      coord: [26.65, 27.4]
      data:
        flipside: Uhrum Breach > West Copse > Lower West Ledge
      local:
        - to: West Water's Edge
          jumps: 3
        - to: West Water's Edge
          jumps: 2
          jump_mvmt: water
        - to: West Water Nook
          thru: [26.65, 27.6]
        - to: West Shallow End
          jumps: 1
    - name: West Water Nook
      coord: [26.15, 27.75]
      data:
        flipside: Uhrum Breach > West Copse > West 28
      local:
        - to: Water Slope
          jumps: 1
      locations:
        - name: Tablet
          item: Suspension_Bridge
          tags: [standing]
      exits:
        - to: West Water Ledge
          req: Underwater_Movement and $grab
          movement: base
          jumps: 3
        - to: West Water Ledge
          req: Underwater_Movement and $hook
          movement: base
          jumps: 2
    - name: Water Slope
      coord: [26.9, 27.7]
      local:
        - to: Water Pillar
          jumps: 2
          jump_mvmt: water
        - to: West Water Ledge
          jumps: 1
          jump_mvmt: water
        - to: West Water Nook
    - name: Water Pillar
      coord: [27.1, 27.15]
      data:
        flipside: Uhrum Breach > West Copse > Center Pillar
      local:
        - to: West Water Nook
        - to: Water Slope
        - to: East 28
        - to: Center Island East
          jumps: 1
          jump_mvmt: water
        - to: East Water's Edge
          jumps: 1
          jump_mvmt: water
      exits:
        - to: Center Island East
          req: $grab
          movement: base
          jumps: 2
        - to: Center Island East
          req: $hook
          movement: base
          jumps: 1
        - to: East Water's Edge
          req: $hook
          movement: base
          jumps: 1
    - name: East Water Surface
      coord: [27.4, 27.0]
      local:
        - to: Water Pillar
        - to: East 28
    - name: East 28
      coord: [27.95, 27.75]
      exits:
        - to: East Lake > West 28
          tags: [xshift]
    - name: East Water's Edge
      coord: [27.45, 26.9]
      data:
        flipside: Uhrum Breach > West Copse > East Ledge
      local:
        - to: East 27
        - to: East Water Surface
        - to: Water Pillar
        - to: Lower East Platform
          jumps: 1
    - name: East 27
      coord: [27.95, 26.9]
      local:
        - to: East Water's Edge
        - to: Lower East Platform
          jumps: 1
      exits:
        - to: East Lake > West 27
          tags: [xshift]
    #endregion

- name: Save Room  # MARK: Save Room
  on_entry: $reset_old_area(^newpos)
  map: save
  data:
    save_point: Save Point
    map_spot: Menu > Kiengir Map > Uhrum Center
  spots:
    - name: East
      coord: [25.95, 26.75]
      local:
        - to: Save Point
      exits:
        - to: Waterfalls > West 27
          tags: [xshift]
    - name: Save Point
      coord: [25.5, 26.75]
      data:
        flipside: Uhrum Breach > North Slime > Center
      local:
        - to: East
        - to: West
      actions:
        - name: Save
          do: $save
          tags: [save]
    - name: West
      coord: [25.05, 26.75]
      local:
        - to: Save Point
      exits:
        - to: Glitchy Corridor > East 27
          tags: [xshift]

- name: East Lake  # MARK: East Lake
  on_entry: $reset_old_area(^newpos)
  map:
    cave: [28, 26, 29, 27]
    sw: [28, 27, 29, 28]
    se: [29, 27, 30, 28]
  datamap:
    water:
      sw: true
      se: true
    map_spot:
      cave: Menu > Kiengir Map > Uhrum East Lake Cave
  spots:
    - name: West 27
      coord: [28.05, 26.9]
      local:
        - to: West Water's Edge
      exits:
        - to: Waterfall
          req: $hover
          movement: base
          jumps: 3
        - to: Waterfalls > East 27
          tags: [xshift]
    - name: West Water's Edge
      coord: [28.2, 26.9]
      local:
        - to: West 27
        - to: West Underwater Ledge
      exits:
        - to: Waterfall
          req: $hover
          movement: base
          jumps: 3
        - to: West Block
          req: $hover
          movement: base
          jumps: 1
    - name: Waterfall
      coord: [28.4, 26.6]
      local:
        - to: West 27
        - to: West Water's Edge
        - to: West Block
        - to: West Underwater Ledge
          jumps_down: 1
      exits:
        - to: Interior > Uhrum Waterfall Cave > Entrance
          tags: [cave]
    - name: West Underwater Ledge
      coord: [28.45, 27.2]
      data:
        flipside: Uhrum Breach > East Copse > Lower West Ledge
      local:
        - to: West Underwater Hill
        - to: West 28
          thru: [28.45, 27.5]
        - to: West Water's Edge
          jumps: 1
        - to: West Wall
          jumps: 1
    - name: West Underwater Hill
      coord: [28.6, 27.55]
      local:
        - to: West 28
        - to: West Underwater Ledge
          jumps: 1
          jump_mvmt: water
    - name: West 28
      coord: [28.05, 27.75]
      local:
        - to: West Underwater Hill
          jumps: 2
      exits:
        - to: Waterfalls > East 28
          tags: [xshift]

    - name: West Wall
      coord: [28.675, 26.95]
      local:
        - to: West Underwater Hill
      exits:
        - to: West Block
          req: $grab and $climb
          movement: base
          jumps: 2
        - to: West Block
          req: $hook
          movement: base
          jumps: 1
    - name: West Block
      coord: [28.7, 26.7]
      local:
        - to: Waterfall
          jumps: 1
        - to: West Underwater Ledge
      locations:
        - name: Dislodge Block
          canon: Uhrum_East_Lake_Block
          item: Uhrum_East_Lake_Block
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: East Block
          req: Uhrum_East_Lake_Block
          movement: base
        - to: East Ledge
          req: Uhrum_East_Lake_Block and $hookhover
          movement: fast_hover
          jumps: 1
        - to: East Block
          req: $block_clip and Slingshot_Hook and not Uhrum_East_Lake_Block
          movement: base
          penalties:
            - add: 1  # ?
    - name: East Block
      coord: [29.0, 26.7]
      data:
        flipside: Uhrum Breach > East Copse > Center East
      local:
        - to: Island West
        - to: Island West Hook Point
      locations:
        - name: Dislodge Block
          canon: Uhrum_East_Lake_Block
          item: Uhrum_East_Lake_Block
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: West Block
          req: Uhrum_East_Lake_Block
          movement: base
        - to: Waterfall
          req: Uhrum_East_Lake_Block and $hookhover
          movement: fast_hover
          jumps: 1
        - to: Waterfalls > East Water's Edge
          req: Uhrum_East_Lake_Block and $hookhover
          movement: fast_hover
          penalty_tags: [xshift, -fast_hover.1]
    - name: Island West
      coord: [29.25, 26.9]
      data:
        flipside: Uhrum Breach > East Copse > Platform West
      local:
        - to: Island West Hook Point
        - to: Island East
      exits:
        - to: East Block
          req: $hook or $hover
          movement: base
          jumps: 1
        - to: East Block
          req: $grab
          movement: base
          jumps: 2
    - name: Island East
      coord: [29.55, 26.9]
      data:
        flipside: Uhrum Breach > East Copse > Platform East
      local:
        - to: Island West
        - to: East Underwater Ledge
      exits:
        - to: East Ledge
          req: $hook
          movement: base
          jumps: 1
        - to: East Block
          req: $hookhover
          movement: fast_hover
          jumps: 1
    - name: Island West Hook Point
      coord: [29.15, 26.95]
      exits:
        - to: East Ledge
          req: $hookhover
          movement: fast_hover
          jumps: 1
    - name: East Underwater Ledge
      coord: [29.75, 27.1]
      local:
        - to: Island East
          jumps: 1
      exits:
        - to: East Ledge
          req: $hook
          movement: base
          jumps: 1
        - to: East Ledge
          req: $hook and Underwater_Movement
          movement: water
          jumps: 1
        - to: East Ledge
          req: $grab and Underwater_Movement
          movement: water
          jumps: 2
    - name: East Ledge
      coord: [29.85, 26.75]
      local:
        - to: East
        - to: East Underwater Ledge
      exits:
        - to: Island East
          req: $hover
          movement: base
        - to: Cavern > Wall Left
          req: $hookhover
          movement: fast_hover
          penalty_tags: [xshift, -fast_hover.1]
    - name: East
      coord: [29.95, 26.75]
      local:
        - to: East Ledge
      exits:
        - to: Cavern > West
          tags: [xshift]

- name: Cavern  # MARK: Cavern
  on_entry: $reset_old_area(^newpos)
  data:
    portal_start: Portal Hole
  map:
    bracelet: [31, 26, 32, 27]
  datamap:
    map_spot:
      bracelet: Menu > Kiengir Map > Ensi's Bracelet
  spots:
    - name: West
      coord: [30.05, 26.75]
      local:
        - to: West Ledge
      exits:
        - to: East Lake > East
          tags: [xshift]
    - name: West Ledge
      coord: [30.2, 26.8]
      local:
        - to: West
          jumps: 1
        - to: West Slope
        - to: Bottom
      exits:
        - to: East Lake > East Block
          req: $hookhover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xshift, -fast_hover.1]
        - to: Wall Left
          req: $hover
          movement: base
    - name: West Slope
      coord: [30.25, 27.0]
      local:
        - to: West Ledge
          jumps: 1
        - to: Bottom
      exits:
        - to: Wall Left
          req: $hover
          movement: base
          jumps: 1
    - name: Bottom
      coord: [30.6, 27.5]
      local:
        - to: West Slope
          jumps: 3
        - to: Wall Left
          jumps: 6
      exits:
        - to: Wall Left
          req: $hook
          movement: base
          jumps: 3
        - to: Wall Left
          req: $hover
          movement: base
          jumps: 4
        - to: Wall Left
          req: $grab
          movement: base
          jumps: 5
    - name: Wall Left
      coord: [31.15, 26.8]
      data:
        flipside: Uhrum Breach > Annuna Gate > Structure West
      local:
        - to: Bottom
      locations:
        - name: Mist Through Wall
          canon: Uhrum_Cavern_Wall
          item: Uhrum_Cavern_Wall
          req: Nanite_Mist
          to: Wall Right
          movement: mist1
          tags: [event]
        - name: Upgraded Mist Through Wall
          canon: Uhrum_Cavern_Wall
          item: Uhrum_Cavern_Wall
          req: $mist2
          to: Wall Right
          movement: mist2
          tags: [event]
        - name: Charge Through Wall
          canon: Uhrum_Cavern_Wall
          item: Uhrum_Cavern_Wall
          req: $charge
          to: Pedestal
          movement: fling
          jumps: 1
          tags: [event]
          penalty_tags: [charge_time]
        - name: Spin Through Wall
          canon: Uhrum_Cavern_Wall
          item: Uhrum_Cavern_Wall
          req: $spin
          to: Wall Right
          movement: fast_hover
          tags: [event]
        - name: Spin Through Wall and Hover
          canon: Uhrum_Cavern_Wall
          item: Uhrum_Cavern_Wall
          req: $spinhover
          to: Pedestal
          movement: fast_hover
          jumps: 1
          tags: [event]
      exits:
        - to: Wall Right
          req: Uhrum_Cavern_Wall
          movement: base
        - to: Pedestal
          req: Uhrum_Cavern_Wall and $hookhover
          movement: fast_hover
          jumps: 1
    - name: Wall Right
      coord: [31.25, 26.8]
      local:
        - to: Pedestal
          jumps: 1
      locations:
        - name: Mist Through Wall
          canon: Uhrum_Cavern_Wall
          item: Uhrum_Cavern_Wall
          req: Nanite_Mist
          to: Wall Left
          movement: mist1
          tags: [event]
        - name: Upgraded Mist Through Wall
          canon: Uhrum_Cavern_Wall
          item: Uhrum_Cavern_Wall
          req: $mist2
          to: Wall Left
          movement: mist2
          tags: [event]
        - name: Charge Through Wall
          canon: Uhrum_Cavern_Wall
          item: Uhrum_Cavern_Wall
          req: $charge
          to: Bottom
          movement: fling
          tags: [event]
          penalty_tags: [charge_time]
        - name: Charge Through Wall and Hover
          canon: Uhrum_Cavern_Wall
          item: Uhrum_Cavern_Wall
          req: $chargehover
          to: West Ledge
          movement: fling
          tags: [event]
          penalty_tags: [charge_time]
        - name: Spin Through Wall
          canon: Uhrum_Cavern_Wall
          item: Uhrum_Cavern_Wall
          req: $spin
          to: Wall Left
          movement: fast_hover
          tags: [event]
        - name: Spin Through Wall and Hover
          canon: Uhrum_Cavern_Wall
          item: Uhrum_Cavern_Wall
          req: $spinhover
          to: West Ledge
          movement: fast_hover
          tags: [event]
      exits:
        - to: Wall Left
          req: Uhrum_Cavern_Wall
          movement: base
        - to: West Ledge
          req: Uhrum_Cavern_Wall and $hookhover
          movement: fast_hover
    - name: Pedestal
      coord: [31.5, 26.75]
      data:
        flipside: Uhrum Breach > Annuna Gate > Save Point
      local:
        - to: Wall Right
      locations:
        - name: Item
          item: Ensis_Bracelet
          tags: [standing]
    
    # inaccessible
    - name: Portal Hole
      coord: [31.475, 27.5]

- name: Tulip Tower  # MARK: Tulip Tower
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: West 24
      coord: [28.05, 23.8]
      exits:
        - to: Waterfalls > East 24
          tags: [xshift]
        - to: Lower Column
          req: $hook
          movement: base
          jumps: 1
        - to: Platform 1 West
          req: $hookhover
          movement: fast_hover
          jumps: 3
        - to: Lower Column
          req: $grab
          jumps: 3
        - to: Lower Column
          req: Anuman
          jumps: 2
    - name: Lower Column
      coord: [28.25, 23.4]
      local:
        - to: West 24
      exits:
        - to: Waterfalls > Barrier East
          req: $hover
          movement: base
          penalty_tags: [xshift, -base.1]
        - to: Platform 1 West
          req: $hook
          movement: base
          jumps: 1
    - name: Platform 1 West
      coord: [28.5, 23.0]
      local:
        - to: Platform 1 East
        - to: Lower Column
      exits:
        - to: Middle Ledge
          req: $hook
          movement: base
          jumps: 1
        - to: Platform 2 West
          req: $hook
          movement: base
          jumps: 2
        - to: Upper Right Ledge
          req: $hookhover
          movement: base
          jumps: 4
    - name: Platform 1 East
      coord: [28.65, 23.0]
      local:
        - to: Platform 1 West
      exits:
        - to: East 23
          req: $hook
          movement: fast_hover
          jumps: 1
        - to: East 23
          req: $grab
          movement: base
          jumps: 3
    - name: Middle Ledge
      coord: [28.35, 22.7]
      local:
        - to: Middle Plateau
        - to: Platform 1 West
        - to: Platform 2 West
          jumps: 1
        - to: Lower Column
      exits:
        - to: Platform 2 West
          req: $hook
          movement: fast_hover
          jumps: 1
    - name: Middle Plateau
      coord: [28.25, 22.7]
      local:
        - to: Middle Ledge
      locations:
        - name: Refill
          item: Power_Core
          tags: [standing]
    - name: Platform 2 West
      coord: [28.55, 22.5]
      local:
        - to: Middle Ledge
        - to: Platform 1 West
        - to: Platform 2 East
        - to: Lower Column
      exits:
        - to: Upper Middle Ledge
          req: $hookhover
          movement: base
          jumps: 4
        - to: Upper Right Ledge
          req: $hook
          movement: base
          jumps: 2
        - to: Upper Middle Ledge
          req: Nanite_Mist
          movement: mist1
        - to: Upper Middle Ledge
          req: $mist2
          movement: mist2
    - name: Platform 2 East
      coord: [28.8, 22.5]
      local:
        - to: Platform 2 West
        - to: East 23
      exits:
        - to: Upper Middle Ledge
          req: $hookhover
          movement: base
          jumps: 4
        - to: Upper Right Ledge
          req: $hook
          movement: base
          jumps: 2
        - to: Upper Middle Ledge
          req: Nanite_Mist
          movement: mist1
        - to: Upper Middle Ledge
          req: $mist2
          movement: mist2
    - name: East 23
      coord: [28.95, 22.8]
      local:
        - to: Platform 1 East
          thru: [28.85, 23.05]
          jumps: [0, 1]
      exits:
        - to: Annuna > Invisible Enemies > West 23
          tags: [xshift]
        - to: Platform 1 East
          req: $hook or $hover
          movement: base
        - to: Platform 2 East
          req: $hook or Anuman
          movement: base
          jumps: 1

    - name: West 22
      coord: [28.05, 21.8]
      exits:
        - to: Rocky Guardpost > East 22
          tags: [xshift]
        - to: Upper Column West
          req: $hook
          movement: base
          jumps: 1
        - to: Upper Column West
          req: $grab
          movement: base
          jumps: 3
        - to: Upper Column West
          req: Nanite_Mist
          movement: mist1
        - to: Upper Column West
          req: $mist2
          movement: mist2
    - name: NW Mid-air
      coord: [28.2, 21.65]
      exits:
        - to: Upper Column West
          req: $hook
          movement: fast_hover
          jumps: 1
    - name: Upper Column West
      coord: [28.35, 21.4]
      local:
        - to: Upper Column East
        - to: West 22
        - to: North
          jumps: 1
    - name: Upper Column East
      coord: [28.5, 21.45]
      local:
        - to: Upper Column West
          jumps: 1
        - to: North
          jumps: 2
        - to: Upper Middle Ledge
        - to: West 22
          jumps: 1
      exits:
        - to: North
          req: Anuman
          movement: base
          jumps: 1
    - name: Upper Middle Ledge
      coord: [28.65, 21.8]
      local:
        - to: Upper Right Ledge
        - to: Platform 2 West
        - to: Platform 2 East
        - to: East 23
      exits:
        - to: Upper Column East
          req: $hover
          movement: base
          jumps: 4
        - to: Upper Column East
          req: $climb
          movement: base
          jumps: 2
        - to: Upper Column East
          req: Nanite_Mist
          movement: mist1
        - to: Upper Column East
          req: $mist2
          movement: mist2
        - to: Amagi > Wiggly Room > South
          req: $mist2
          movement: mist2
          penalty_tags: [ydoor, -mist2.4]
        
    - name: Upper Right Ledge
      coord: [28.8, 22.0]
      local:
        - to: Upper Middle Ledge
          jumps: 1
        - to: Platform 2 West
        - to: Platform 2 East
        - to: East 23
          thru: [28.8, 22.3]
      exits:
        - to: Upper Column East
          req: Nanite_Mist
          movement: mist1
        - to: Upper Column East
          req: $mist2
          movement: mist2
    - name: North
      coord: [28.5, 21.2]
      data:
        flipside: SpotId::None
      local:
        - to: Upper Column West
        - to: Upper Column East
        - to: Upper Middle Ledge
      exits:
        - to: Amagi > Wiggly Room > South
          tags: [ydoor]

- name: Annuna Corridor  # MARK: Annuna Corridor
  on_entry: $reset_old_area(^newpos)
  map:
    save: [28, 25, 29, 26]
    urn: [29, 24, 30, 25]
    tablet: [30, 24, 31, 25]
    flask: [31, 24, 32, 25]
    throw: [30, 25, 31, 26]
  data:
    save_point: Save Point
  datamap:
    map_spot:
      save: Menu > Kiengir Map > Uhrum East
      urn: Menu > Kiengir Map > Anuman
      tablet: Menu > Kiengir Map > Plague of Thoughts
      flask: Menu > Kiengir Map > Uhrum Annuna Flask
      throw: Menu > Kiengir Map > Uhrum Annuna Corridor Udugs
  spots:
    - name: West 25
      coord: [28.05, 24.75]
      local:
        - to: Upper Trees
      exits:
        - to: Waterfalls > East 25
          tags: [xshift]
    - name: Upper Trees
      coord: [29.2, 24.75]
      local:
        - to: West 25
        - to: Pedestal
          jumps: 1
      locations:
        - name: Remote Urn
          item: Anuman
          canon: Anuman
          req: $boomerang
          tags: [remote_urn]
    - name: Pedestal
      coord: [29.5, 24.55]
      local:
        - to: Upper Trees
      locations:
        - name: Urn
          item: Anuman
          canon: Anuman
          tags: [urn]
      hybrid:
        - name: Urn Collection Skip
          item: Anuman
          canon: Anuman
          to: Menu > Warp Only > Kiengir
          tags: [cskip]
        - name: Urn Fast Travel
          item: Anuman
          canon: Anuman
          req: Fast_Travel
          to: Menu > Kiengir Map > Anuman
          tags: [cskip]

    - name: West 26
      coord: [28.05, 25.8]
      local:
        - to: Save Point
          jumps: 1
      exits:
        - to: Waterfalls > East 26
          tags: [xshift]
    - name: Save Point
      coord: [28.5, 25.7]
      data:
        flipside: Uhrum Breach > Overgrown Ruins > Portal Stand
      local:
        - to: West 26
        - to: Block West
          jumps: 1
      actions:
        - name: Save
          do: $save
          tags: [save]
    - name: Block West
      coord: [28.9, 25.6]
      data:
        flipside: Uhrum Breach > Overgrown Ruins > East
      local:
        - to: Save Point
      locations:
        - name: Dislodge Block
          item: Uhrum_Annuna_Corridor_Block
          canon: Uhrum_Annuna_Corridor_Block
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Block East
          req: Uhrum_Annuna_Corridor_Block
          movement: base
        - to: Block East
          req: $block_clip_escape and not Uhrum_Annuna_Corridor_Block
          time: 2  # ?
    - name: Block East
      coord: [29.1, 25.6]
      data:
        flipside: Uhrum Breach > Locked Down > West
      local:
        - to: Open Pillar
          jumps: 2
      locations:
        - name: Dislodge Block
          item: Uhrum_Annuna_Corridor_Block
          canon: Uhrum_Annuna_Corridor_Block
          req: $shockwave
          price: 100
          tags: [shockwave, event]
      exits:
        - to: Block West
          req: Uhrum_Annuna_Corridor_Block
          movement: base
    - name: Open Pillar
      coord: [30.1, 25.6]
      data:
        flipside: Uhrum Breach > Locked Down > West Path
      local:
        - to: Block East
        - to: Between Two Flowers
    - name: Between Two Flowers
      coord: [30.85, 25.75]
      data:
        flipside: Uhrum Breach > Locked Down > East Enemy
      local:
        - to: Block East
          jumps: 1
        - to: Wall Remnant
          jumps: 2
      exits:
        - to: Lower Platform
          req: Anuman
          movement: base
          jumps: 1
        - to: Lower Platform
          req: $hover
          time: 2  # ?
      actions:
        - name: Throw Drone Up
          req: $can_deploy and Drone_Hover
          do: $deploy_drone
          to: Middle Platform
          time: 1.75
        - name: Throw Drone Not As High
          req: $can_deploy
          do: $deploy_drone
          to: Lower Platform
          time: 1
    - name: Lower Platform
      coord: [31.0, 25.4]
      local:
        - to: Block East
      exits:
        - to: Middle Platform
          req: $hover
          time: 1
        - to: Middle Platform
          req: Anuman
          movement: base
          jumps: 1
    - name: Wall Remnant
      coord: [31.25, 25.5]
      data:
        flipside: Uhrum Breach > Locked Down > Item Behind Gate
      local:
        - to: Between Two Flowers
        - to: Lower Platform
          jumps: 1
    - name: Middle Platform
      coord: [30.85, 25.15]
      exits:
        - to: Upper Ledge
          req: $hook
          movement: base
          jumps: 1
        - to: Upper Platform
          req: Anuman
          movement: base
          jumps: 1
        - to: Upper Platform
          req: $hover
          time: 1
        # TODO: Hover to statue from here?
    - name: Upper Platform
      coord: [30.95, 24.95]
      exits:
        - to: Upper Ledge
          req: $hover
          movement: base
          jumps: 1
        - to: Statue
          req: $hover
          movement: base
          jumps: 1
    - name: Upper Ledge
      coord: [30.55, 24.8]
      local:
        - to: East Cubby
          jumps: 1
        - to: Block East
          thru: [30.55, 25.0]
        - to: Middle Platform
      exits:
        - to: Upper Platform
          req: $hover
          movement: base
    - name: East Cubby
      coord: [30.05, 24.6]
      local:
        - to: Upper Ledge
      locations:
        - name: Tablet
          item: Plague_of_Thoughts
          tags: [standing]
    - name: Statue
      coord: [31.6, 24.8]
      local:
        - to: Lower Platform
        - to: East 25
      locations:
        - name: Item
          item: Flask
          tags: [flask]
      exits:
        - to: Upper Platform
          req: $hover
          movement: base
    - name: East 25
      coord: [31.95, 24.8]
      local:
        - to: Statue
      exits:
        - to: Annuna > Mirror Match > West 25
          tags: [xshift]

- name: Artillery Practice  # MARK: Artillery Practice
  on_entry: $reset_old_area(^newpos)
  map:
    tablet: [23, 23, 24, 24]
  datamap:
    map_spot:
      tablet: Menu > Kiengir Map > Becoming An Arm
  spots:
    - name: East 24
      coord: [25.95, 23.75]
      local:
        - to: East Trees
      exits:
        - to: Waterfalls > West 24
          tags: [xshift]
        - to: East Outcrop East
          req: $hook and $hover
          movement: base
          jumps: 1
    - name: East Trees
      coord: [25.55, 23.8]
      local:
        - to: East Hill
          jumps: 1
        - to: East 24
          jumps: 1
      exits:
        - to: East Outcrop East
          req: $hook
          movement: base
          jumps: 2
        - to: East Lower Platform East
          req: $hook and $hover
          movement: base
          jumps: 2
    - name: East Hill
      coord: [25.05, 23.6]
      local:
        - to: East Trees
      exits:
        - to: East Outcrop West
          req: $hook
          movement: base
          jumps: 0.5
        - to: East Outcrop West
          req: $grab
          movement: base
          jumps: 2
        - to: East Outcrop West
          req: Anuman
          movement: base
          jumps: 1
        - to: East Lower Platform West
          req: $hook and $hover
          movement: base
          jumps: 2
    - name: East Outcrop West
      coord: [25.15, 23.35]
      local:
        - to: East Hill
        - to: East Outcrop East
        - to: East Lower Platform East
          jumps: 1
        - to: East Lower Platform West
          jumps: 1
    - name: East Outcrop East
      coord: [25.3, 23.35]
      local:
        - to: East 24
        - to: East Trees
        - to: East Outcrop West
        - to: East Lower Platform East
          jumps: 1
        - to: East Lower Platform West
          jumps: 1
    - name: East Lower Platform West
      coord: [25.15, 23.15]
      local:
        - to: East Lower Platform East
        - to: Column Platform
          jumps: 1
        - to: East Hill
          jumps_down: 1
        - to: East Outcrop East
          jumps_down: 1
        - to: East Outcrop West
          jumps_down: 1
      exits:
        - to: Column West
          req: $hook and $hover
          movement: base
          jumps: 2
    - name: East Lower Platform East
      coord: [25.25, 23.15]
      local:
        - to: East 24
        - to: East Trees
        - to: East Outcrop East
          jumps_down: 1
        - to: East Outcrop West
          jumps_down: 1
      exits:
        - to: East Knob
          req: $hover
          movement: base
          jumps: 1
        - to: Column West
          req: $hook and $hover
          movement: base
          jumps: 2
    - name: Column Platform
      coord: [24.95, 22.95]
      local:
        - to: East Lower Platform West
        - to: East Hill
          jumps_down: 1
        - to: Column East
          jumps: 1
    - name: Column East
      coord: [24.9, 22.75]
      local:
        - to: Column West
        - to: Column Platform
        - to: East Lower Platform West
        - to: East Lower Platform East
        - to: East Outcrop West
        - to: Far East Platform
      exits:
        - to: West Left Ledge
          req: $hook and $hover
          movement: fast_hover

    - name: Far East Platform
      coord: [25.75, 22.8]
      local:
        - to: East 23
          jumps: 1
        - to: East Lower Platform West
        - to: Column East
          jumps: 3
    - name: East Knob
      coord: [25.85, 22.9]
      local:
        - to: East 23
          jumps: 1
        - to: East 24
          thru: [25.85, 23.1]
    - name: East 23
      coord: [25.95, 22.75]
      local:
        - to: Far East Platform
        - to: East Knob
      exits:
        - to: Rocky Gate > West
          tags: [xshift]

    - name: Column West
      coord: [24.4, 22.75]
      local:
        - to: Column East
        - to: West Right Platform
        - to: Tunnel Entrance
      exits:
        - to: East 23
          req: $hook and $hover
          movement: fast_hover
        - to: West Top Platform
          req: $hover
          movement: base
          jumps: 1
        - to: West Right Ledge
          req: $hover
          movement: base
    - name: West Right Platform
      coord: [24.1, 23.0]
      local:
        - to: Tunnel Entrance
          jumps_down: 1
        - to: West Right Ledge
          jumps_down: 1
        - to: West Tree
        - to: West Top Platform
          jumps: 2
      exits:
        - to: Column West
          req: $hook or $hover
          movement: base
          jumps: 1
    - name: West Top Platform
      coord: [23.65, 22.6]
      local:
        - to: West Right Platform
        - to: West 23
        - to: West Left Ledge
        - to: West Right Ledge
          jumps_down: 2
      exits:
        - to: Column West
          req: $hover
          movement: base

    - name: Tunnel Entrance
      coord: [23.9, 23.8]
      locations:
        - name: Tablet
          item: Becoming_An_Arm
          tags: [standing]
      exits:
        - to: Glen > East
          req: ^mode == 'drone'
          movement: base
          penalty_tags: [xshift, -base.1]
        - to: West Right Ledge
          req: $hook
          movement: base
          jumps: 2
    - name: West Right Ledge
      coord: [23.9, 23.4]
      local:
        - to: Tunnel Entrance
        - to: West Tree
          jumps: 1
        - to: West Right Platform
          jumps: 2
        - to: West Top Platform
          jumps: 4
      exits:
        - to: West Middle Ledge
          req: $hook and $hover
          movement: fast_hover
          jumps: 1
    - name: West Tree
      coord: [23.6, 23.25]
      local:
        - to: West Right Ledge
        - to: West Right Platform
          jumps: 2
        - to: West Middle Ledge
          jumps: 1
    - name: West Middle Ledge
      coord: [23.3, 23.2]
      local:
        - to: West Tree
        - to: West 23
          jumps: 3
      exits:
        - to: West Left Ledge
          req: $hook
          movement: base
          jumps: 2
    - name: West Left Ledge
      coord: [23.15, 22.8]
      local:
        - to: West 23
          jumps: 1
        - to: West Middle Ledge
    - name: West 23
      coord: [23.05, 22.75]
      local:
        - to: West Left Ledge
        - to: West Top Platform
          jumps: 2
        - to: West Tree
        - to: West Right Ledge
      exits:
        - to: Grassy Guardpost > East 23
          tags: [xshift]

- name: Rocky Gate  # MARK: Rocky Gate
  on_entry: $reset_old_area(^newpos)
  data:
    map_spot: Menu > Kiengir Map > Does Technology
  spots:
    - name: West
      coord: [26.05, 22.75]
      local:
        - to: Wall West Ledge
          jumps: 1
      exits:
        - to: Artillery Practice > East 23
          tags: [xshift]
    - name: Wall West
      coord: [26.425, 22.35]
      local:
        - to: Wall West Ledge
        - to: West
      locations:
        - name: Mist Through Wall
          canon: Uhrum_Rocky_Gate_Rock
          item: Uhrum_Rocky_Gate_Rock
          req: Nanite_Mist
          to: Wall East
          movement: mist1
        - name: Upgraded Mist Through Wall
          canon: Uhrum_Rocky_Gate_Rock
          item: Uhrum_Rocky_Gate_Rock
          req: $mist2
          to: Wall East
          movement: mist2
      exits:
        - to: Wall East
          req: Uhrum_Rocky_Gate_Rock
          movement: base
        - to: Rocky Guardpost > Lower Step
          req: Uhrum_Rocky_Gate_Rock and $hookhover
          movement: fast_hover
          penalty_tags: [xshift, -fast_hover.1]
        - to: Rocky Guardpost > Mid-air
          req: Uhrum_Rocky_Gate_Rock and $hookhover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xshift, -fast_hover.1]
        - to: Rocky Guardpost > Middle Step
          req: Uhrum_Rocky_Gate_Rock and $hookhover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xshift, -fast_hover.1]
        - to: Rocky Guardpost > Upper Step
          req: Uhrum_Rocky_Gate_Rock and $hookhover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xshift, -fast_hover.1]
    - name: Wall West Ledge
      coord: [26.375, 22.6]
      local:
        - to: West
        - to: Wall West
          jumps: 2
      locations:
        - name: Charge Through Wall
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: $charge
          to: East Ledge
          movement: base
          penalty_tags: [charge_time, charge_time]  # can't get it in one
        - name: Spin Through Wall
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: $spin
          to: East Ledge
          movement: base  # slower than fling/fast hover would be
          # re-time?
    - name: Wall East
      coord: [26.575, 22.35]
      local:
        - to: Wall East Ledge
        - to: East Ledge
        - to: East
      locations:
        - name: Mist Through Wall
          canon: Uhrum_Rocky_Gate_Rock
          item: Uhrum_Rocky_Gate_Rock
          req: Nanite_Mist
          to: Wall West
          movement: mist1
        - name: Upgraded Mist Through Wall
          canon: Uhrum_Rocky_Gate_Rock
          item: Uhrum_Rocky_Gate_Rock
          req: $mist2
          to: Wall West
          movement: mist2
      exits:
        - to: Wall West
          req: Uhrum_Rocky_Gate_Rock
          movement: base
        - to: Artillery Practice > Column East
          req: Uhrum_Rocky_Gate_Rock and $hookhover
          movement: fast_hover
          penalty_tags: [xshift, -fast_hover.1]
        - to: Rocky Guardpost > Mid-air
          req: $hover
          movement: base
          jumps: 1
          penalty_tags: [xshift, -base.1]
    - name: Wall East Ledge
      coord: [26.625, 22.6]
      local:
        - to: Wall East
          jumps: 2
        - to: East Ledge
      locations:
        - name: Charge Through Wall
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: $charge
          to: Wall West Ledge
          movement: base
          penalty_tags: [charge_time, charge_time]  # can't get it in one
        - name: Spin Through Wall
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: $spin
          to: Wall West Ledge
          movement: base  # slower than fling/fast hover would be
          # re-time?
    - name: East Ledge
      coord: [26.7, 22.6]
      local:
        - to: Wall East
          jumps: 2
        - to: East
      locations:
        - name: Note
          item: Re_Does_Technology
          tags: [standing]
      exits:
        - to: Rocky Guardpost > Lower Step
          req: $hover
          movement: base
          jumps: 1
          penalty_tags: [xshift, -base.1]
        - to: Rocky Guardpost > Lower Mid-air
          req: $hover
          movement: base
          jumps: 1
          penalty_tags: [xshift, -base.1]
    - name: East
      coord: [26.95, 22.75]
      local:
        - to: East Ledge
          jumps: 1
      exits:
        - to: East Ledge
          req: $hook
          movement: fast_hover
          jumps: 0.5
        - to: Rocky Guardpost > West 23
          tags: [xshift]

- name: Grassy Guardpost  # MARK: Grassy Guardpost
  on_entry: $reset_old_area(^newpos)
  spots:
    - name: East 23
      coord: [22.95, 22.75]
      local:
        - to: Small Column East
          jumps: 1
      exits:
        - to: Artillery Practice > West 23
          tags: [xshift]
        - to: Small Column East
          req: $hook
          movement: base
          jumps: 0.5
    - name: Small Column East
      coord: [22.7, 22.55]
      local:
        - to: East 23
      exits:
        - to: Center Platform East
          req: $grab or $hook
          movement: base
          jumps: 2
        - to: West Ledge
          req: $hook
          movement: base
          jumps: 2
        - to: East Ledge
          req: $hook and $hover
          movement: base
          jumps: 3
    - name: Center Platform East
      coord: [22.6, 22.2]
      local:
        - to: West Ledge
          jumps: 1
        - to: East 23
        - to: Small Column East
      exits:
        - to: West Ledge
          req: $hook
          movement: base
          jumps: 1
    - name: West Ledge
      coord: [22.4, 22.0]
      local:
        - to: West 22
          jumps: 1
        - to: Center Platform East
      exits:
        - to: East Ledge
          req: $hook and $hover
          movement: base
          jumps: 1
    - name: West 22
      coord: [22.05, 21.8]
      local:
        - to: East Ledge
          jumps: 4
        - to: West Ledge
      exits:
        - to: East Ledge
          req: $hook
          movement: fast_hover
          jumps: 3
        - to: Emergence Save > Save Point
          req: $hook and $hover
          movement: fast_hover
          jumps: 2
          penalty_tags: [xshift, -fast_hover.1]
        - to: Giguna > Vertical Interchange > East 22
          tags: [xshift]
    - name: East Ledge
      coord: [22.85, 21.8]
      local:
        - to: East 22
        - to: East 23
          thru: [21.85, 22.1]
        - to: West 22
          jumps: 3
        - to: Small Column East
      exits:
        - to: West 22
          req: $hook and $hover
          movement: fast_hover
          jumps: 2
        - to: West Ledge
          req: $hover
          movement: base
        - to: West Ledge
          req: $hook and $hover
          movement: fast_hover
        - to: Emergence Save > Save Point
          req: $hook and $hover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xshift, -fast_hover.1]
        - to: Emergence Facility > West Approach
          req: $hook and $hover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xshift, xshift, -fast_hover.1, -fast_hover.1]
          maps: [Emergence Save > Save]
    - name: East 22
      coord: [22.95, 21.8]
      local:
        - to: East Ledge
      exits:
        - to: Emergence Save > West
          tags: [xshift]

- name: Glen  # MARK: Glen
  on_entry: $reset_old_area(^newpos)
  data:
    map_spot: Menu > Kiengir Map > Uhrum Glen Matrix
  spots:
    - name: East
      coord: [22.95, 23.8]
      local:
        - to: Center
          jumps: 1
      exits:
        - to: Artillery Practice > Tunnel Entrance
          req: ^mode == 'drone'
          movement: base
          penalty_tags: [xshift, -base.1]
    - name: Center
      coord: [22.55, 23.7]
      local:
        - to: East
      locations:
        - name: Item
          item: Power_Matrix
          tags: [standing]

- name: Emergence Save  # MARK: Emergence Save
  on_entry: $reset_old_area(^newpos)
  map: save
  data:
    map_spot: Menu > Kiengir Map > Uhrum Emergence
    save_point: Save Point
  spots:
    - name: West
      coord: [23.05, 21.8]
      local:
        - to: Save Point
          jumps: 1
      exits:
        - to: Grassy Guardpost > East 22
          tags: [xshift]
    - name: Save Point
      coord: [23.5, 21.7]
      local:
        - to: West
        - to: East
      actions:
        - name: Save
          do: $save
          tags: [save]
    - name: East
      coord: [23.95, 21.8]
      local:
        - to: Save Point
          jumps: 1
      exits:
        - to: Emergence Facility > West
          tags: [xshift]

- name: Emergence Facility  # MARK: Emergence Facility
  on_entry: $reset_old_area(^newpos)
  map:
    door: [24, 21, 25, 22]
    flask: [25, 20, 26, 21]
    wall: [26, 21, 27, 22]
  datamap:
    map_spot:
      door: Menu > Kiengir Map > Uhrum Emergence Facility Entrance
      flask: Menu > Kiengir Map > Uhrum Emergence Facility Flask
      wall: Menu > Kiengir Map > Uhrum Emergence Facility Wall
  spots:
    - name: West
      coord: [24.05, 21.8]
      local:
        - to: West Approach
      exits:
        - to: Emergence Save > East
          tags: [xshift]
    - name: West Approach
      coord: [24.7, 21.8]
      local:
        - to: West
        - to: Door
          jumps: 4
        - to: Middle Level Mid-air
          jumps: 5
        - to: East Stair Left
          jumps: 4
        - to: East Approach
      exits:
        - to: Upper Level Middle
          req: $hover
          movement: base
          jumps: 7
        - to: Upper Level Middle
          req: Anuman
          movement: base
          jumps: 5
    - name: East Approach
      coord: [25.1, 21.8]
      local:
        - to: West Approach
        - to: Door
          jumps: 4
        - to: Middle Level Mid-air
          jumps: 5
        - to: East Stair Left
          jumps: 4
        - to: Bush
      exits:
        - to: Upper Level Middle
          req: $hover
          movement: base
          jumps: 7
        - to: Upper Level Middle
          req: Anuman
          movement: base
          jumps: 5
    - name: Door
      coord: [24.925, 21.15]
      local:
        - to: West
        - to: Middle Level Mid-air
          jumps: 1
        - to: East Stair Left
        - to: Bush
          jumps_down: 1
      exits:
        - to: Upper Level Middle
          req: $hover
          movement: base
          jumps: 3
        - to: Upper Level Middle
          req: Anuman
          movement: base
          jumps: 1
        - to: Interior > Facility Interior > Door
          tags: [interior]
    - name: Middle Level Mid-air
      coord: [25.25, 21.0]
      local:
        - to: Door
        - to: East Stair Left
        - to: Bush
          jumps_down: 1
      locations:
        - name: Remote Flask
          req: $boomerang
          canon: Uhrum_Emergence_Flask
          item: Flask
          tags: [remote_flask]
        - name: Throw Up and Go Left
          req: $boomerang
          canon: Uhrum_Emergence_Flask
          item: Flask
          to: Door
          movement: base
          penalty_tags: [throw, flask]
        - name: Throw Up and Go Right
          req: $boomerang
          canon: Uhrum_Emergence_Flask
          item: Flask
          to: East Stair Left
          movement: base
          penalty_tags: [throw, flask]
        - name: Throw Up and Fast Travel
          req: $boomerang
          canon: Uhrum_Emergence_Flask
          item: Flask
          to: ^map_spot
          tags: [cskip]
    - name: East Stair Left
      coord: [25.8, 21.15]
      local:
        - to: Door
        - to: East Approach
          jumps_down: 1
        - to: Middle Level Mid-air
          jumps: 1
        - to: East Stair Right
        - to: Bush
          jumps_down: 1
        - to: East Stair Middle
          jumps: 2
    - name: East Stair Right
      coord: [26.1, 21.15]
      local:
        - to: East Stair Left
        - to: East Stair Middle
          jumps: 2
        - to: Bush
          jumps_down: 1
        - to: East Approach
          jumps_down: 1
        - to: Wall West Ledge
        - to: Wall West Mid-air
          jumps: 1
    - name: East Stair Middle
      coord: [25.8, 20.8]
      local:
        - to: East Stair Right
        - to: East Stair Left
          jumps_down: 1
        - to: Upper Level Middle
        - to: East Stair Roof
          jumps: 2
    - name: Upper Level Middle
      coord: [25.25, 20.8]
      local:
        - to: Door
          jumps_down: 1
        - to: West
        - to: East Stair Middle
        - to: East Stair Left
          jumps_down: 1
      exits:
        - to: Roof Middle
          req: $hover
          movement: base
          jumps: 3
        - to: Roof Middle
          req: Anuman
          movement: base
          jumps: 1
    - name: East Stair Roof
      coord: [25.6, 20.5]
      local:
        - to: Reservoir
        - to: East Stair Middle
          jumps_down: 2
        - to: East Stair Right
        - to: Upper Level Middle
          jumps_down: 1
    - name: Reservoir
      coord: [25.45, 20.5]
      local:
        - to: Balcony
          jumps: 1
        - to: Roof Middle
        - to: East Stair Roof
    - name: Balcony
      coord: [25.25, 20.4]
      local:
        - to: West
        - to: Door
          jumps_down: 3
        - to: Reservoir
      locations:
        - name: Flask
          canon: Uhrum_Emergence_Flask
          item: Flask
          tags: [flask]
        - name: Flask Collection Skip
          canon: Uhrum_Emergence_Flask
          item: Flask
          req: $melee_cskip
          to: Menu > Warp Only > Kiengir
          tags: [cskip]
        - name: Flask Fast Travel
          canon: Uhrum_Emergence_Flask
          item: Flask
          req: $melee_cskip and Fast_Travel
          to: ^map_spot
          tags: [cskip]
    - name: Roof Middle
      coord: [25.25, 20.5]
      local:
        - to: Reservoir
        - to: Upper Level Middle
          jumps_down: 1
        - to: East Stair Middle
          jumps_down: 1
        - to: West
        - to: Door
          jumps_down: 2
        - to: Balcony
          jumps: 1
      locations:
        - name: Flask from Below
          canon: Uhrum_Emergence_Flask
          item: Flask
          req: $melee
          tags: [flask]

    - name: Bush
      coord: [26.2, 21.8]
      local:
        - to: East Approach
        - to: Wall West Ledge
          jumps: 1
    - name: Wall West Ledge
      coord: [26.4, 21.6]
      local:
        - to: Bush
        - to: Wall West Mid-air
          jumps: 2
      locations:
        - name: Charge Through Wall
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: $charge
          to: Wall East Ledge
          movement: base
          penalty_tags: [charge_time, charge_time]  # can't get it in one
        - name: Spin Through Wall
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: $spin
          to: Wall East Ledge
          movement: base  # slower than fling/fast hover would be
          # re-time?
      exits:
        - to: Wall East Mid-air
          req: Uhrum_Emergence_Wall
          movement: base
          jumps: 2
    - name: Wall West Mid-air
      coord: [26.45, 21.35]
      local:
        - to: Wall West Ledge
        - to: Bush
      locations:
        - name: Break Wall With Mist
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: Nanite_Mist
          to: Wall East Mid-air
          movement: mist1
        - name: Break Wall With Mist Upgrade
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: $mist2
          to: Wall East Mid-air
          movement: mist2
      exits:
        - to: Wall East Mid-air
          req: Uhrum_Emergence_Wall
          movement: base
        - to: East Stair Right
          req: Uhrum_Emergence_Wall and $hover
          movement: base
          jumps: 1
        # TODO: fast_hovers into Rocky Guardpost
    - name: Above Wall West
      coord: [26.4, 21.15]
      local:
        - to: Bush
        - to: East Approach
        - to: Wall West Mid-air
      exits:
        - to: Wall East Mid-air
          req: Uhrum_Emergence_Wall
          movement: base
        - to: East Stair Right
          req: $hover
          movement: base
    - name: Wall East Mid-air
      coord: [26.6, 21.35]
      local:
        - to: East
        - to: Wall East Ledge
      locations:
        - name: Break Wall With Mist
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: Nanite_Mist
          to: Wall West Mid-air
          movement: mist1
        - name: Break Wall With Mist Upgrade
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: $mist2
          to: Wall West Mid-air
          movement: mist2
        - name: Break Wall Upward With Mist
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: Nanite_Mist
          to: Above Wall West
          movement: mist1
        - name: Break Wall Upward With Mist Upgrade
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: $mist2
          to: Above Wall West
          movement: mist2
      exits:
        - to: Wall West Mid-air
          req: Uhrum_Emergence_Wall
          movement: base
        - to: East Stair Right
          req: Uhrum_Emergence_Wall and $hook and $hover
          movement: fast_hover
          jumps: 1
        - to: East Approach
          req: Uhrum_Emergence_Wall and $hook and $hover
          movement: fast_hover
          jumps: 1
    - name: Wall East Ledge
      coord: [26.7, 21.6]
      local:
        - to: Wall East Mid-air
          jumps: 1
        - to: East
      locations:
        - name: Charge Through Wall
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: $charge
          to: Wall West Mid-air
          movement: base
          penalty_tags: [charge_time, charge_time]  # can't get it in one
        - name: Spin Through Wall
          canon: Uhrum_Emergence_Wall
          item: Uhrum_Emergence_Wall
          req: $spin
          to: Wall West Mid-air
          movement: base  # slower than fling/fast hover would be
          # re-time?
    - name: East
      coord: [26.95, 21.8]
      local:
        - to: Wall East Ledge
          jumps: 1
      exits:
        - to: Rocky Guardpost > West 22
          tags: [xshift]

- name: Rocky Guardpost  # MARK: Rocky Guardpost
  on_entry: $reset_old_area(^newpos)
  map:
    flask: [27, 22, 28, 23]
  datamap:
    map_spot:
      flask: Menu > Kiengir Map > Uhrum Rocky Guardpost Flask
  spots:
    - name: West 22
      coord: [27.05, 21.8]
      local:
        - to: Upper Ledge
          jumps: 1
      exits:
        - to: East 22
          req: $hookhover
          movement: fast_hover
          jumps: 1
        - to: Emergence Facility > East
          tags: [xshift]
        - to: Tulip Tower > NW Mid-air
          req: $hookhover
          movement: fast_hover
          jumps: 1
          penalty_tags: [xshift, -fast_hover.1]
    - name: Upper Ledge
      coord: [27.3, 21.65]
      local:
        - to: West 22
        - to: Mid-air
        - to: Middle Step
        - to: Lower Step
        - to: Under The Ledge
      exits:
        - to: East 22
          req: $hover
          movement: base
    - name: Mid-air
      coord: [27.3, 22.2]
      local:
        - to: West 23
      exits:
        - to: Upper Step
          req: $hookhover
          movement: base
          jumps: 1
        - to: Middle Step
          req: $hover
          movement: base
        - to: Upper Ledge
          req: Nanite_Mist
          movement: mist1
        - to: Upper Ledge
          req: $mist2
          movement: mist2
    - name: Lower Mid-air
      coord: [27.3, 22.3]
      local:
        - to: West 23
      exits:
        - to: Upper Ledge
          req: Nanite_Mist
          movement: mist1
        - to: Upper Ledge
          req: $mist2
          movement: mist2

    - name: West 23
      coord: [27.05, 22.75]
      local:
        - to: Under The Ledge
      exits:
        - to: Rocky Gate > East
          tags: [xshift]
        - to: Lower Step
          req: $hook
          movement: base
          jumps: 1
        - to: Lower Step
          req: $grab
          movement: base
          jumps: 2
    - name: Under The Ledge
      coord: [27.525, 22.75]
      local:
        - to: West 23
      locations:
        - name: Shockwave Block
          canon: Uhrum_Rocky_Guardpost_Flask
          item: Flask
          req: $shockwave
          price: 100
          tags: [shockwave]
          penalty_tags: [flask]
    - name: Lower Step
      coord: [27.5, 22.4]
      local:
        - to: West 23
        - to: Middle Step
          jumps: 1
      locations:
        - name: Shockwave Block
          canon: Uhrum_Rocky_Guardpost_Flask
          item: Flask
          req: $shockwave
          price: 100
          tags: [shockwave]
          penalty_tags: [flask]
      exits:
        - to: Upper Step
          req: $hook
          movement: fast_hover
          jumps: 1
        - to: Upper Ledge
          req: Nanite_Mist
          movement: mist1
        - to: Upper Ledge
          req: $mist2
          movement: mist2
    - name: Middle Step
      coord: [27.6, 22.2]
      local:
        - to: Lower Step
        - to: West 23
        - to: Upper Step
          jumps: 1
      locations:
        - name: Shockwave Block
          canon: Uhrum_Rocky_Guardpost_Flask
          item: Flask
          req: $shockwave
          price: 100
          tags: [shockwave]
          penalty_tags: [flask]
      exits:
        - to: Upper Ledge
          req: Nanite_Mist
          movement: mist1
        - to: Upper Ledge
          req: $mist2
          movement: mist2
    - name: Upper Step
      coord: [27.7, 22.0]
      local:
        - to: Middle Step
        - to: West 23
        - to: East 22
          jumps: 1
      locations:
        - name: Shockwave Block
          canon: Uhrum_Rocky_Guardpost_Flask
          item: Flask
          req: $shockwave
          price: 100
          tags: [shockwave]
          penalty_tags: [flask]
      exits:
        - to: Upper Ledge
          req: Nanite_Mist
          movement: mist1
        - to: Upper Ledge
          req: $mist2
          movement: mist2
    - name: East 22
      coord: [27.95, 21.8]
      local:
        - to: Upper Step
        - to: Middle Step
        - to: West 23
      exits:
        - to: Upper Ledge
          req: $hover
          movement: base
          jumps: 1
        - to: Tulip Tower > West 22
          tags: [xshift]

- name: Seclusion  # MARK: Seclusion
  on_entry: $reset_old_area(^newpos)
  data:
    portal_start: Portal Stand
    portal_hidden: true
  map:
    portal: [22, 20, 23, 21]
    flask: [23, 20, 24, 21]
  datamap:
    map_spot:
      portal: Menu > Kiengir Map > Uhrum Seclusion Portal
      flask: Menu > Kiengir Map > Uhrum Seclusion Flask
  spots:
    - name: Portal West
      coord: [22.3, 20.8]
      data:
        flipside: Uhrum Breach > Blob > West Side
      local:
        - to: Portal Stand
          jumps: 1
      exits:
        - to: Portal Stand
          req: $hook
          movement: fast_hover
          jumps: 1
        - to: Boome Range
          req: $hookhover
          movement: fast_hover
        - to: Shock Range
          req: $hookhover
          movement: fast_hover
    - name: Portal Stand
      coord: [22.525, 20.7]
      data:
        flipside: Uhrum Breach > Blob > Plinth
      local:
        - to: Portal West
        - to: Portal East
    - name: Portal East
      coord: [22.7, 20.8]
      data:
        flipside: Uhrum Breach > Blob > East Side
      local:
        - to: Portal Stand
          jumps: 1
      exits:
        - to: Portal Stand
          req: $hook
          movement: fast_hover
          jumps: 1
    - name: Boome Range
      coord: [23.3, 20.8]
      local:
        - to: Portal East
        - to: Shock Range
      locations:
        - name: Remote Flask
          canon: Uhrum_Seclusion_Flask
          item: Big_Flask
          req: $boomerang
          tags: [remote_flask]
        - name: Remote Flask Fast Travel
          canon: Uhrum_Seclusion_Flask
          item: Big_Flask
          req: $boomerang and Fast_Travel
          to: ^map_spot
          tags: [throw]
    - name: Shock Range
      coord: [23.4, 20.8]
      local:
        - to: Boome Range
        - to: Close Range
      locations:
        - name: Shockwave Flask
          canon: Uhrum_Seclusion_Flask
          item: Big_Flask
          req: $shockwave
          price: 100
          tags: [shockwave]
    - name: Close Range
      coord: [23.6, 20.8]
      local:
        - to: Shock Range
      locations:
        - name: Flask
          canon: Uhrum_Seclusion_Flask
          item: Big_Flask
          tags: [flask]
        - name: Flask Collection Skip
          canon: Uhrum_Seclusion_Flask
          item: Big_Flask
          req: $melee_cskip
          to: Menu > Warp Only > Kiengir
          tags: [cskip]
        - name: Flask Fast Travel
          canon: Uhrum_Seclusion_Flask
          item: Big_Flask
          req: $melee_cskip
          to: ^map_spot
          tags: [cskip]
