# AUTOGENERATED FOR {{ game_name }} - MODIFICATIONS WILL BE LOST
# Requires graphviz (for neato), GraphicsMagick (for gm), m4 (for scripting), and bash (for shell redirection)

(
cd "$( dirname -- "${BASH_SOURCE[0]}" )";
FILE=${1:-full_graph.m4};
PNG=$(basename -- ${FILE%.m4}).png;
echo "Generating graph..." &&
neato -Tpng -o $PNG <(m4 $FILE) &&
%% if special.map_file
echo "Merging graph with map..." &&
gm composite $PNG {{ special.map_file }} ${FILE%.m4}-map.png;
%% else
echo "Set map_file and map params in Game.yaml under 'special:' to render this graph on the map."
%% endif
)