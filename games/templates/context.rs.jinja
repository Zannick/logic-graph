//! AUTOGENERATED FOR {{ game }} - DO NOT MODIFY
//!
//! Context (game state).

#![allow(non_snake_case)]

use crate::graph::*;
use crate::items::Item;
use analyzer::context;

pub struct Context {
%% for ctx, t in context_types.items()
    {{ ctx }}: {{ t }},
%% endfor
%% for item, ct in gl.item_max_counts().items()|sort
    {{ item|lower }}: {{ ct|get_item_type_for_max }},
%% endfor
}

%# we might not need these, if we reference the parameter directly in rules
%# or whatnot
impl context::ItemContext<Item> for Context {
    fn has(&self, item: &Item) -> bool {
        match item {
%% for item, ct in gl.item_max_counts().items()|sort
            Item::{{ item }} => self.{{ item|lower }}{% if ct > 1 %} >= 1{% endif %},
%% endfor
            _ => false,
        }
    }
    fn count(&self, item: &Item) -> i16 {
        match item {
%% for item, ct in gl.item_max_counts().items()|sort
            Item::{{ item }} => self.{{ item|lower }}.into(),
%% endfor
            _ => 0,
        }
    }
}

impl context::PosContext<Spot> for Context {
    fn position(&self) -> &Spot {
        &self.position
    }
    fn set_position(&mut self, pos: Spot) {
        self.position = pos;
    }
}
